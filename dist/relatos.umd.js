(function(gA,rt){typeof exports=="object"&&typeof module<"u"?rt(exports):typeof define=="function"&&define.amd?define(["exports"],rt):(gA=typeof globalThis<"u"?globalThis:gA||self,rt(gA.Relatos={}))})(this,(function(gA){"use strict";const rt=`<!-- relatos/src/assets/icons/icons.svg -->
<svg xmlns="http://www.w3.org/2000/svg" style="display:none">
  <!-- =========================================
       Edit (pencil) : toggle "edit relations"
       ========================================= -->
  <symbol id="icon-edit" viewBox="0 0 24 24">
    <path
      d="M12 20h9"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M16.5 3.5a2.12 2.12 0 0 1 3 3L8 18l-4 1 1-4 11.5-11.5z"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </symbol>

  <!-- =========================================
       Sun (day/night shading toggle)
       ========================================= -->
  <symbol id="icon-sun" viewBox="0 0 24 24">
    <circle
      cx="12"
      cy="12"
      r="4"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M12 2v2"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M12 20v2"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M2 12h2"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M20 12h2"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M4.93 4.93l1.41 1.41"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M17.66 17.66l1.41 1.41"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M19.07 4.93l-1.41 1.41"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M6.34 17.66l-1.41 1.41"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </symbol>

  <!-- =========================================
       Home (fit to graph / reset view)
       ========================================= -->
  <symbol id="icon-home" viewBox="0 0 24 24">
    <path
      d="M3 10.5l9-7 9 7"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M5 9.8V20a1 1 0 0 0 1 1h4v-6h4v6h4a1 1 0 0 0 1-1V9.8"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </symbol>

  <!-- =========================================
       Relations (edges show/hide toggle)
       - Universal: 3 nodes + connections
       ========================================= -->
  <symbol id="icon-relations" viewBox="0 0 24 24">
    <circle
      cx="6.5"
      cy="7"
      r="2.5"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <circle
      cx="17.5"
      cy="6.5"
      r="2.5"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <circle
      cx="12"
      cy="17.5"
      r="2.5"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M8.8 7.7l6.4-0.6"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M8.2 9.1l2.7 6"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M16.2 8.6l-2.6 6.1"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </symbol>

  <!-- Close / Cancel: circle with X (for Cancel edit button) -->
  <symbol id="icon-close" viewBox="0 0 24 24">
    <circle
      cx="12"
      cy="12"
      r="10"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
    />
    <path
      d="M8 8l8 8M16 8l-8 8"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
    />
  </symbol>

  <!-- =========================================
       Undo / Restore previous state
       - Universal: curved left arrow (undo)
       ========================================= -->
  <symbol id="icon-undo" viewBox="0 0 24 24">
    <path
      d="M7 7L10.5 3.5"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M7 7L10.5 10.5"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />

    <path
      d="M7 7h6.5a7.5 7.5 0 0 1 0 15H6"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </symbol>

  <!-- =========================================
       Redo: curved right arrow (mirror of undo)
       ========================================= -->
  <symbol id="icon-redo" viewBox="0 0 24 24">
    <path
      d="M17 7L13.5 3.5"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M17 7L13.5 10.5"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M17 7h-6.5a7.5 7.5 0 0 0 0 15H18"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </symbol>

  <symbol id="icon-view-graph" viewBox="0 0 24 24">
    <!-- Left node (pushed to the left) -->
    <rect
      x="2.5"
      y="8.5"
      width="5"
      height="7"
      rx="1.5"
      ry="1.5"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
    />

    <!-- Right node (pushed to the right) -->
    <rect
      x="16.5"
      y="8.5"
      width="5"
      height="7"
      rx="1.5"
      ry="1.5"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
    />

    <!-- Bidirectional arrow (long and clear) -->
    <path
      d="M8.8 12h6.4"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
    />

    <!-- Left arrow head (points left) -->
    <path
      d="M8.8 12l1.8-1.8"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M8.8 12l1.8 1.8"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />

    <!-- Right arrow head (points right) -->
    <path
      d="M15.2 12l-1.8-1.8"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M15.2 12l-1.8 1.8"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </symbol>

  <symbol id="icon-view-globe3d" viewBox="0 0 24 24">
    <!-- Globe outline: as large as possible inside viewBox -->
    <circle
      cx="12"
      cy="12"
      r="11"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
    />

    <!-- Left node (pushed left) -->
    <rect
      x="4.2"
      y="8.5"
      width="4.6"
      height="7"
      rx="1.3"
      ry="1.3"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
    />
    <!-- Right node (pushed right) -->
    <rect
      x="15.2"
      y="8.5"
      width="4.6"
      height="7"
      rx="1.3"
      ry="1.3"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
    />

    <!-- Bidirectional arrow (longer, not crushed) -->
    <path
      d="M9.6 12h4.8"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
    />
    <!-- Left arrow head (points left) -->
    <path
      d="M9.6 12l1.6-1.6"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M9.6 12l1.6 1.6"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <!-- Right arrow head (points right) -->
    <path
      d="M14.4 12l-1.6-1.6"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M14.4 12l-1.6 1.6"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </symbol>

  <symbol id="icon-view-map" viewBox="0 0 24 24">
    <!-- Map frame: as large as possible inside viewBox -->
    <rect
      x="1"
      y="3"
      width="22"
      height="18"
      rx="3"
      ry="3"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
    />

    <!-- Left node (pushed left) -->
    <rect
      x="4.2"
      y="8.5"
      width="4.6"
      height="7"
      rx="1.3"
      ry="1.3"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
    />
    <!-- Right node (pushed right) -->
    <rect
      x="15.2"
      y="8.5"
      width="4.6"
      height="7"
      rx="1.3"
      ry="1.3"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
    />

    <!-- Bidirectional arrow (longer, not crushed) -->
    <path
      d="M9.6 12h4.8"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
    />
    <!-- Left arrow head (points left) -->
    <path
      d="M9.6 12l1.6-1.6"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M9.6 12l1.6 1.6"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <!-- Right arrow head (points right) -->
    <path
      d="M14.4 12l-1.6-1.6"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M14.4 12l-1.6 1.6"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </symbol>

  <symbol id="icon-map-tiles" viewBox="0 0 24 24">
    <!-- Top-left (filled) -->
    <rect
      x="4"
      y="4"
      width="7"
      height="7"
      rx="1.2"
      ry="1.2"
      fill="currentColor"
      stroke="currentColor"
      stroke-width="2"
    />
    <!-- Top-right (outline) -->
    <rect
      x="14"
      y="4"
      width="7"
      height="7"
      rx="1.2"
      ry="1.2"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
    />
    <!-- Bottom-left (outline) -->
    <rect
      x="4"
      y="14"
      width="7"
      height="7"
      rx="1.2"
      ry="1.2"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
    />
    <!-- Bottom-right (filled) -->
    <rect
      x="14"
      y="14"
      width="7"
      height="7"
      rx="1.2"
      ry="1.2"
      fill="currentColor"
      stroke="currentColor"
      stroke-width="2"
    />
  </symbol>

  <!-- =========================================
       Export (share/external link icon)
       - For relat export (copy to clipboard)
       ========================================= -->
  <symbol id="icon-export" viewBox="0 0 24 24">
    <!-- Box -->
    <path
      d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <!-- Arrow up -->
    <polyline
      points="17 8 12 3 7 8"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <line
      x1="12"
      y1="3"
      x2="12"
      y2="15"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </symbol>

  <!-- =========================================
       Trash (delete bend point / remove)
       - Universal: trash can with lid
       ========================================= -->
  <symbol id="icon-trash" viewBox="0 0 24 24">
    <!-- Lid -->
    <path
      d="M4 7h16"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <!-- Handle -->
    <path
      d="M10 4h4"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <!-- Top cap -->
    <path
      d="M9 6h6"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <!-- Can body -->
    <path
      d="M7 7l1 14h8l1-14"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linejoin="round"
    />
    <!-- Inner lines -->
    <path
      d="M10 11v7"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
    />
    <path
      d="M14 11v7"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
    />
  </symbol>

</svg>`;let Te=!1;const Ss="relatos-icons-sprite";function XA(){if(Te)return;if(document.getElementById(Ss)){Te=!0;return}const i=document.createElement("div");i.id=Ss,i.style.display="none",i.innerHTML=rt,document.body.appendChild(i),Te=!0}async function Zn(i){try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(i),!0;{const A=document.createElement("textarea");A.value=i,A.style.position="fixed",A.style.left="-999999px",A.style.top="-999999px",document.body.appendChild(A),A.focus(),A.select();const t=document.execCommand("copy");return document.body.removeChild(A),t}}catch(A){return console.error("Failed to copy to clipboard:",A),!1}}function jn(i){let A="",t=0;const e=i.length;let s=0;for(;t<e;){const n=i[t];if(n==="["){s++,A+=n,t++;continue}if(n==="]"){s--,A+=n,t++;continue}if(s>0){A+=n,t++;continue}if(n==="/"&&i[t+1]==="/"){for(t+=2;t<e&&i[t]!==`
`&&i[t]!=="\r";)t++;continue}if(n==="#"){for(t++;t<e&&i[t]!==`
`&&i[t]!=="\r";)t++;continue}if(n==="/"&&i[t+1]==="*"){for(t+=2;t<e-1&&!(i[t]==="*"&&i[t+1]==="/");)t++;t=t<e-1?t+2:e;continue}A+=n,t++}return A}function $n(i){const A=[],t=[],e=i.length;let s=0,n=0,o=0;function a(){for(;s<e&&n===0&&o===0;){const r=i[s];if(r===`
`||r==="\r"||r===","||r===";"){A.push({type:18,value:r,offset:s}),r==="\r"&&i[s+1]===`
`&&s++,s++;continue}if(/[\s]/.test(r)){s++;continue}break}}for(;s<e&&(a(),!(s>=e));){const r=s,h=i[s];if(h==="{"){n++,A.push({type:4,value:"{",offset:r}),s++;continue}if(h==="}"){n--,A.push({type:5,value:"}",offset:r}),s++;continue}if(h==="["){o++,A.push({type:6,value:"[",offset:r}),s++;continue}if(h==="]"){o--,A.push({type:7,value:"]",offset:r}),s++;continue}if(h===":"){A.push({type:8,value:":",offset:r}),s++;continue}if(h==="="){A.push({type:9,value:"=",offset:r}),s++;continue}if(h==="#"&&s+1<e&&/[0-9a-fA-F]/.test(i[s+1])){let c="#";for(s++;s<e&&/[0-9a-fA-F]/.test(i[s]);)c+=i[s],s++;A.push({type:0,value:c,offset:r});continue}if(h==="-"&&i[s+1]==="-"&&i[s+2]===">"){A.push({type:3,value:"-->",offset:r}),s+=3;continue}if(h==='"'||h==="'"){const c=h;s++;let u="";for(;s<e&&i[s]!==c;){if(i[s]==="\\"){s++,u+=i[s]??"",s++;continue}u+=i[s],s++}s>=e?t.push(`Unclosed string at ${r}`):s++,A.push({type:2,value:u,offset:r});continue}if(/\d/.test(h)||h==="."&&s+1<e&&/\d/.test(i[s+1])){const c=s;for(;s<e&&/\d/.test(i[s]);)s++;let u=!1;if(s<e&&i[s]==="."&&s+1<e&&/\d/.test(i[s+1]))for(u=!0,s++;s<e&&/\d/.test(i[s]);)s++;const l=i.slice(c,s);u?A.push({type:1,value:l,offset:c}):A.push({type:0,value:l,offset:c});continue}if(/[a-zA-Z_0-9_\u0080-\uFFFF]/.test(h)||h==="-"&&(s+2>=e||i[s+1]!=="-"||i[s+2]!==">")){let c="";for(;s<e;){const u=i[s];if(u==="-"&&s+2<e&&i[s+1]==="-"&&i[s+2]===">"||!/[a-zA-Z_0-9\u0080-\uFFFF-]/.test(u)&&!(u==="."&&c.length>0))break;c+=u,s++}c==="as"?A.push({type:10,value:c,offset:r}):c==="node"?A.push({type:11,value:c,offset:r}):c==="layout"?A.push({type:12,value:c,offset:r}):c==="style"?A.push({type:13,value:c,offset:r}):c==="rel"?A.push({type:14,value:c,offset:r}):c==="group"?A.push({type:15,value:c,offset:r}):c==="edge"?A.push({type:16,value:c,offset:r}):c==="bends"?A.push({type:17,value:c,offset:r}):c==="fixed"?A.push({type:0,value:c,offset:r}):A.push({type:0,value:c,offset:r});continue}s++}return A.push({type:19,value:"",offset:e}),{tokens:A,errors:t}}function qn(i){const A=i.trim();return A==="true"?!0:A==="false"?!1:/^#[\da-fA-F]+$/.test(A)?A:/^-?\d+(\.\d+)?$/.test(A)?Number(A):A.startsWith('"')&&A.endsWith('"')||A.startsWith("'")&&A.endsWith("'")?A.slice(1,-1).replace(/\\"/g,'"').replace(/\\'/g,"'"):A}function BA(i,A){if(A.current>=i.length||i[A.current].type!==6)return null;A.current++;const t={},e=i.length;for(;A.current<e&&i[A.current].type!==7;){const s=i[A.current];if(s.type===0){const n=s.value;if(A.current++,A.current<e&&i[A.current].type===9){A.current++;const o=i[A.current];let a=!0;o&&(o.type===0||o.type===1||o.type===2)&&(a=o.type===2?o.value:qn(o.value),A.current++),t[n]=a}else t[n]=!0}else A.current++;for(;A.current<e&&(i[A.current].type===18||i[A.current].value===","||i[A.current].value===";");)A.current++}return A.current<e&&i[A.current].type===7&&A.current++,t}function Ds(i,A){if(!(!i&&!A))return i?A?{...i,...A}:i:A}function Ms(i){const A=[],t=jn(i),{tokens:e,errors:s}=$n(t);A.push(...s);const n={},o={},a=[];let r,h;function c(E,F,m,v){const H=n[E];H?(F!==void 0&&F!==E&&(H.label=F),H.style=Ds(H.style,m)??H.style,v!==void 0&&(H.group=v)):n[E]={id:E,label:F??E,style:m??void 0,group:v}}function u(E,F,m,v){const H=o[E];H?(F!==void 0&&F!==E&&(H.label=F),H.style=Ds(H.style,m)??H.style,v&&(H.members=[...new Set([...H.members,...v])])):o[E]={id:E,label:F??E,style:m??void 0,members:v??[]}}const l={current:0},d=e.length;function g(E){let F=1,m=1;for(let v=0;v<E&&v<t.length;v++)t[v]===`
`?(F++,m=1):m++;return{line:F,col:m}}function f(E){const F=l.current<d?e[l.current].offset:t.length,{line:m,col:v}=g(F);A.push(`${E} (line ${m}, column ${v})`)}function B(E,F){return l.current>=d?E===19:e[l.current].type===E}function w(E,F){if(l.current>=d)return null;const m=e[l.current];return m.type!==E?null:(l.current++,m)}function p(){for(;l.current<d&&(e[l.current].type===18||e[l.current].value===","||e[l.current].value===";"||e[l.current].value===`
`);)l.current++;for(;l.current<d&&e[l.current].type===0&&e[l.current].value==="";)l.current++}function C(E){const F=[];for(;;){if(p(),B(5))return l.current++,F;if(B(19))return f("Missing closing } for group"),F;if(B(15)){if(l.current++,!B(0))return A.push("Expected group ID after group"),F;const m=e[l.current].value;l.current++;let v=m;B(10)&&(l.current++,B(2)&&(v=e[l.current].value,l.current++));const H=BA(e,l)??void 0;if(!w(4))return A.push("Expected { after group id"),F;const b=C(m);u(m,v!==m?v:m,H,b),F.push(m);continue}if(B(0)){const m=e[l.current].value;l.current++;let v=m;B(10)&&(l.current++,B(2)&&(v=e[l.current].value,l.current++));const H=BA(e,l)??void 0;if(B(4)){w(4);const I=C(m);u(m,v!==m?v:m,void 0,I),F.push(m)}else c(m,v,H,E),F.push(m);continue}f("Expected node ID or nested group in group block"),l.current++}}function y(){if(!B(19)){if(B(15)){if(l.current++,!B(0)){A.push("Expected group ID after group");return}const E=e[l.current].value;l.current++;const F=BA(e,l)??void 0;if(!w(4)){A.push("Expected { after group id");return}const m=C(E);u(E,E,F,m);return}if(B(12)){if(l.current++,!w(4)){A.push("Expected { after layout");return}const E={},F={},m={};for(;!B(5)&&!B(19)&&(p(),!(B(19)||B(5)));)if(B(11)){if(l.current++,!B(0)){A.push("Expected node ID in layout");continue}const v=e[l.current].value;if(l.current++,p(),!w(4)){A.push("Expected { after node ID in layout");continue}let H,b,I,T,D=!1;for(;!B(5)&&!B(19)&&(p(),!B(5));)if(B(0)){const S=e[l.current].value;if(l.current++,B(9)){l.current++;const M=e[l.current];if(M&&(M.type===0||M.type===1)){const N=M.value;l.current++;const O=Number(N);S==="x"?H=O:S==="y"?b=O:S==="w"?I=O:S==="h"?T=O:S==="fixed"&&(D=N==="true"||N==="1")}}else S==="fixed"&&(D=!0)}else l.current++;B(5)&&l.current++,H!=null&&b!=null&&(E[v]={x:H,y:b,w:I,h:T,fixed:D||void 0})}else if(B(15)){if(l.current++,!B(0)){A.push("Expected group ID in layout");continue}const v=e[l.current].value;if(l.current++,p(),!w(4)){A.push("Expected { after group ID in layout");continue}let H,b,I,T;for(;!B(5)&&!B(19)&&(p(),!B(5));)if(B(0)){const D=e[l.current].value;if(l.current++,B(9)){l.current++;const S=e[l.current];if(S&&(S.type===0||S.type===1)){const M=S.value;l.current++;const N=Number(M);D==="x"?H=N:D==="y"?b=N:D==="w"?I=N:D==="h"&&(T=N)}}}else l.current++;B(5)&&l.current++,H!=null&&b!=null&&I!=null&&T!=null&&(F[v]={x:H,y:b,w:I,h:T})}else if(B(16)){if(l.current++,!B(0)){A.push("Expected edge ID in layout");continue}const v=e[l.current].value;l.current++,p();let H,b,I,T;if(B(4)){for(l.current++;!B(5)&&!B(19)&&(p(),!B(5));)if(B(0)){const S=e[l.current].value;if(l.current++,B(9)){l.current++;const M=e[l.current],N=M&&M.type===1,O=M&&M.type===0;if(N||O){const P=M.value;l.current++;const V=Number(P);S==="src_side"?H=P:S==="src_t"?b=Number.isNaN(V)?void 0:V:S==="dst_side"?I=P:S==="dst_t"&&(T=Number.isNaN(V)?void 0:V)}}}else l.current++;B(5)&&l.current++,p()}const D=[];if(B(17)&&(l.current++,p(),w(4))){for(;!B(5)&&!B(19)&&(p(),!B(5));)if(B(4)){l.current++;let S,M;for(;!B(5)&&!B(19)&&(p(),!B(5));)if(B(0)){const N=e[l.current].value;if(l.current++,B(9)){l.current++;const O=e[l.current];if(O&&(O.type===0||O.type===1)){const P=O.value;l.current++;const V=Number(P);N==="x"?S=V:N==="y"&&(M=V)}}}else l.current++;B(5)&&l.current++,S!=null&&M!=null&&D.push({x:S,y:M})}B(5)&&l.current++}if(D.length>0||H!=null||b!=null||I!=null||T!=null){const S={};D.length>0&&(S.bends=D),H!=null&&(S.src_side=H),b!=null&&(S.src_t=b),I!=null&&(S.dst_side=I),T!=null&&(S.dst_t=T),m[v]=S}}else l.current++;B(5)&&l.current++,r={nodes:Object.keys(E).length?E:void 0,groups:Object.keys(F).length?F:void 0,edges:Object.keys(m).length?m:void 0};return}if(B(13)){if(l.current++,!w(4)){A.push("Expected { after style");return}const E={},F={},m={},v={};for(;!B(5)&&!B(19)&&(p(),!(B(19)||B(5)));)if(B(11)){if(l.current++,!B(0)){A.push("Expected node ID in style");continue}const H=e[l.current].value;l.current++;const b=BA(e,l);b&&Object.keys(b).length>0&&(E[H]=b)}else if(B(15)){if(l.current++,!B(0)){A.push("Expected group ID in style");continue}const H=e[l.current].value;l.current++;const b=BA(e,l);b&&Object.keys(b).length>0&&(F[H]=b)}else if(B(16)){if(l.current++,!B(0)){A.push("Expected edge ID in style");continue}const H=e[l.current].value;l.current++;const b=BA(e,l);b&&Object.keys(b).length>0&&(m[H]=b)}else if(B(14)){if(l.current++,!B(0)){A.push("Expected relID in style");continue}const H=e[l.current].value;l.current++;const b=BA(e,l);b&&Object.keys(b).length>0&&(v[H]=b)}else l.current++;B(5)&&l.current++,h={nodes:Object.keys(E).length?E:void 0,groups:Object.keys(F).length?F:void 0,edges:Object.keys(m).length?m:void 0,rels:Object.keys(v).length?v:void 0};return}if(B(0)){const E=e[l.current].value,F=l.current+1<d?e[l.current+1].type:19;if(F===3){if(l.current++,w(3),!B(0)&&!B(2)){A.push("Expected target node after -->");return}let b;e[l.current].type,b=e[l.current].value,l.current++,c(E,E),c(b,b);let I,T;if(B(8)){if(l.current++,B(0))I=e[l.current].value,l.current++,B(10)&&(l.current++,B(2)&&(T=e[l.current].value,l.current++));else if(B(2)){const S=e[l.current].value;I=S,T=S,l.current++}}const D=BA(e,l)??void 0;a.push({from:E,to:b,relId:I,label:T,style:D});return}let m=F===4;if(F===6){let b=l.current+2,I=1;for(;b<d&&I>0;)e[b].type===6?I++:e[b].type===7&&I--,b++;b<d&&e[b].type===4&&(m=!0)}if(!m&&F===10){let b=l.current+1;if(b+1<d&&e[b].type===10&&e[b+1].type===2){for(b+=2;b<d&&e[b].type===6;){let I=1;for(b++;b<d&&I>0;)e[b].type===6?I++:e[b].type===7&&I--,b++}b<d&&e[b].type===4&&(m=!0)}}if(m){const b=e[l.current].value;l.current++;let I=b;B(10)&&(l.current++,B(2)&&(I=e[l.current].value,l.current++));const T=BA(e,l)??void 0;if(!B(4)){A.push("Expected { after group id or style");return}w(4);const D=C(b);u(b,I!==b?I:b,T,D);return}l.current++;let v=E;B(10)&&(l.current++,B(2)&&(v=e[l.current].value,l.current++));const H=BA(e,l)??void 0;c(E,v??E,H);return}if(B(11)){if(l.current++,!B(0)){A.push("Expected node ID after node");return}const E=e[l.current].value;l.current++;let F=E;B(10)&&(l.current++,B(2)&&(F=e[l.current].value,l.current++));const m=BA(e,l)??void 0;c(E,F??E,m);return}l.current++}}const U=Math.max(d*3,1e4);let Q=0;for(;l.current<d&&!B(19);){if(Q++>U){f("Parse iteration limit exceeded (possible infinite loop or malformed input)");break}if(p(),B(19))break;y()}return{nodes:n,groups:o,edges:a,layout:r,style:h,warnings:A}}function Tt(i,A="info.",t){if(!i||typeof i!="object")return[];const e=[];for(const[s,n]of Object.entries(i)){if(n===void 0||t?.has(s))continue;const o=A+s;n!=null&&typeof n=="object"&&!Array.isArray(n)&&!(n instanceof Date)?e.push(...Tt(n,o+".")):e.push(`${o}=${typeof n=="string"?JSON.stringify(n):n}`)}return e}function Ar(i,A,t){if(!t||typeof t!="object")return;const e=new Set;return i&&i.length>=2&&(e.add("lat"),e.add("lon"),e.add("latitude"),e.add("longitude")),A!=null&&t.color===A&&e.add("color"),e.size>0?e:void 0}function Ks(i,A,t,e){const s=[];i&&(i.color!=null&&s.push(`color=${i.color}`),i.borderColor!=null&&s.push(`border=${i.borderColor}`),A||(i.width!=null&&s.push(`width=${i.width}`),i.height!=null&&s.push(`height=${i.height}`))),t&&t.length>=2&&s.push(`lat=${t[0]}`,`lon=${t[1]}`);const n=Ar(t,i?.color,e);return s.push(...Tt(e,"info.",n)),s.length?`[${s.join(",")}]`:""}function Ns(i,A,t){const e=[];return i&&(i.color!=null&&e.push(`color=${i.color}`),i.weight!=null&&e.push(`weight=${i.weight}`),!A&&i.label!=null&&e.push(`label=${JSON.stringify(i.label)}`)),e.push(...Tt(t)),e.length?`[${e.join(",")}]`:""}function Os(i,A){const t=[];return i&&(i.color!=null&&t.push(`color=${i.color}`),i.borderColor!=null&&t.push(`border=${i.borderColor}`),i.borderWidth!=null&&t.push(`width=${i.borderWidth}`),i.borderDash===!1?t.push("dash=false"):i.borderDash===!0&&t.push("dash=true")),t.push(...Tt(A)),t.length?`[${t.join(",")}]`:""}function ks(i){const A=i.layout,t=i.style,e=Object.values(i.nodes).map(r=>{const h=xt(r.style,t?.nodes?.[r.id])??{},{style:c,coordinates:u,info:l}=tr(h);let d=Object.keys(c).length?ir(c):void 0;const g=A?.nodes?.[r.id],f=g;return f&&(f.w!=null||f.h!=null)&&(d={...d},f.w!=null&&(d.width=f.w),f.h!=null&&(d.height=f.h)),{id:r.id,label:r.label??r.id,style:d,position:g?{x:g.x,y:g.y}:void 0,coordinates:u,info:l}}),s=Object.values(i.groups).map(r=>{const h=xt(r.style,t?.groups?.[r.id])??{},{style:c,info:u}=sr(h),l=Object.keys(c).length?nr(c):void 0,d=A?.groups?.[r.id],g=r.members.filter(f=>f in i.nodes);return{id:r.id,label:r.label??r.id,nodeIds:g,style:l,layout:d?{position:{x:d.x,y:d.y},size:{width:d.w,height:d.h}}:void 0,info:u}});for(const r of Object.values(i.groups))for(const h of r.members)if(h in i.groups){const c=s.find(u=>u.id===h);c&&(c.parentId=r.id)}const n=s,o=new Map,a=i.edges.map(r=>{const h=`${r.from}	${r.to}`,c=(o.get(h)??0)+1;o.set(h,c);const u=c===1?`e_${r.from}_${r.to}`:`e_${r.from}_${r.to}_${c}`,l=r.relId??"link",d=xt(r.style,xt(t?.edges?.[u],t?.rels?.[l]))??{},{style:g,info:f}=er(d),B=Object.keys(g).length?rr(g):void 0,w=r.label??B?.label??(r.relId&&r.relId!=="link"?r.relId:void 0),p=A?.edges?.[u],C=p?.src_side!=null?{side:p.src_side,t:p.src_t??.5}:void 0,y=p?.dst_side!=null?{side:p.dst_side,t:p.dst_t??.5}:void 0;return{id:u,src:r.from,dst:r.to,relType:l,style:w?B?{...B,label:w}:{label:w}:B,bends:p?.bends?.length?p.bends:void 0,srcAnchor:C,dstAnchor:y,info:f}});return{nodes:e,edges:a,groups:n}}function xt(i,A){if(!(!i&&!A))return i?A?{...i,...A}:i:A}function xe(i,A){const t={};for(const[e,s]of Object.entries(i))if(typeof e=="string"&&e.startsWith(A)&&s!==void 0){const n=e.slice(A.length);if(n==="")continue;const o=n.startsWith(".")?n.slice(1).split("."):n.split(".");let a=t;for(let r=0;r<o.length-1;r++){const h=o[r];(!(h in a)||typeof a[h]!="object")&&(a[h]={}),a=a[h]}a[o[o.length-1]]=s}return Object.keys(t).length?t:void 0}function tr(i){const A={};let t;const e=i.lat??i.latitude,s=i.lon??i.longitude;typeof e=="number"&&typeof s=="number"&&(t=[e,s]);const n=xe(i,"info."),o=["lat","lon","latitude","longitude"];for(const[a,r]of Object.entries(i))o.includes(a)||typeof a=="string"&&a.startsWith("info.")||(A[a]=r);return{style:A,coordinates:t,info:n}}function er(i){const A={},t=xe(i,"info.");for(const[e,s]of Object.entries(i))if(!(typeof e=="string"&&e.startsWith("info."))){if(e==="weight"){A.width=s;continue}A[e]=s}return{style:A,info:t}}function sr(i){const A={},t=xe(i,"info.");for(const[e,s]of Object.entries(i))typeof e=="string"&&e.startsWith("info.")||(A[e]=s);return{style:A,info:t}}function ir(i){const A={};return i.color!=null&&(A.color=String(i.color)),i.border!=null&&(A.borderColor=String(i.border)),i.width!=null&&(A.width=Number(i.width)),i.height!=null&&(A.height=Number(i.height)),Object.keys(A).length?A:void 0}function nr(i){const A={};return i.color!=null&&(A.color=String(i.color)),i.border!=null&&(A.borderColor=String(i.border)),i.width!=null&&(A.borderWidth=Number(i.width)),i.dash!==void 0&&(A.borderDash=!!i.dash),Object.keys(A).length?A:void 0}function rr(i){const A={};return i.color!=null&&(A.color=String(i.color)),i.width!=null&&(A.weight=Number(i.width)),i.weight!=null&&(A.weight=Number(i.weight)),i.label!=null&&(A.label=String(i.label)),Object.keys(A).length?A:void 0}function or(i,A){const t=new Map(A.nodes.map(r=>[r.id,r])),e=new Map(A.edges.map(r=>[r.id,r])),s=new Map((A.groups??[]).map(r=>[r.id,r])),n=i.nodes.map(r=>{const h=t.get(r.id);if(!h)return r;const c=r,u=h,l=h.position??r.position;let d=c.style;return(u.style?.width!==void 0||u.style?.height!==void 0)&&(d={...d},u.style.width!==void 0&&(d.width=u.style.width),u.style.height!==void 0&&(d.height=u.style.height)),{...r,position:l,style:d}}),o=i.edges.map(r=>{const h=e.get(r.id);if(!h)return r;const c=h;return{...r,srcAnchor:c.srcAnchor??r.srcAnchor,dstAnchor:c.dstAnchor??r.dstAnchor,bends:c.bends??r.bends}}),a=i.groups.map(r=>{const h=s.get(r.id);return h?{...r,layout:h.layout??r.layout}:r});return{nodes:n,edges:o,groups:a}}function Le(i,A){const t=Ms(i);A?.onWarnings&&t.warnings.length>0&&A.onWarnings(t.warnings);const e=ks(t);return A?.layoutPayload?or(e,A.layoutPayload):e}function Lt(i,A,t,e){const s=[],n=new Set(i.map(c=>c.id));function o(c){const u=t.filter(B=>B.parentId===c.id),d=[...c.nodeIds.filter(B=>n.has(B))];for(const B of u)d.push(o(B));const g=d.join(", "),f=c.label!==c.id?`${c.id} as "${c.label.replace(/"/g,'\\"')}"`:c.id;return g?`${f} { ${g} }`:`${f} { }`}const a=t.filter(c=>!c.parentId);for(const c of a){const u=t.filter(w=>w.parentId===c.id),l=c.nodeIds.filter(w=>n.has(w));if(!(l.length>0||u.length>0))continue;const g=c.label!==c.id?`${c.id} as "${c.label.replace(/"/g,'\\"')}"`:c.id,f=Os(c.style,c.info),B=[...l];for(const w of u)B.push(o(w));s.push(`${g}${f} { ${B.join(", ")} }`)}for(const c of i){const u=c.style?{...c.style,width:void 0,height:void 0}:void 0,l=u&&Object.keys(u).some(B=>u[B]!=null);if(!(c.label!==c.id||l||c.coordinates!=null||c.info!=null&&Object.keys(c.info).length>0))continue;const g=c.label!==c.id?`${c.id} as "${c.label.replace(/"/g,'\\"')}"`:c.id,f=Ks(c.style,!0,c.coordinates,c.info);s.push(`${g}${f}`)}const r=new Map;for(const c of[...new Set(A.map(u=>u.relType).filter(Boolean))]){if(c==="link")continue;const u=A.filter(d=>d.relType===c);if(u.length<2)continue;const l=[...new Set(u.map(d=>d.style?.label??c))];l.length===1&&l[0]!==c&&r.set(c,l[0])}for(const c of A){let u=`${c.src}-->${c.dst}${c.relType&&c.relType!=="link"?` : ${c.relType}`:""}`;const l=c.style?.label,d=l!=null&&l!==c.relType,g=c.relType!=null&&r.has(c.relType);g||d&&(u+=` as "${l.replace(/"/g,'\\"')}"`);const f=l!=null&&l===c.relType,B=g||d||f,w=Ns(c.style,B,c.info);w&&(u+=" "+w),s.push(u)}if(e?.includeLayout){const c=[];for(const u of i)if(u.position!=null){const l=u.style?.width,d=u.style?.height,g=[l!=null?`w=${l}`:"",d!=null?`h=${d}`:""].filter(Boolean).join(" ");c.push(`node ${u.id} {x=${u.position.x} y=${u.position.y}${g?` ${g}`:""}}`)}for(const u of t)u.layout&&c.push(`group ${u.id} {x=${u.layout.position.x} y=${u.layout.position.y} w=${u.layout.size.width} h=${u.layout.size.height}}`);for(const u of A){const l=u.srcAnchor!=null||u.dstAnchor!=null,d=u.bends!=null&&u.bends.length>0;if(!l&&!d)continue;const g=u.srcAnchor?.side??"right",f=u.srcAnchor?.t??.5,B=u.dstAnchor?.side??"right",w=u.dstAnchor?.t??.5,p=l?` { src_side=${g}, src_t=${f}, dst_side=${B}, dst_t=${w} }`:"",C=d&&u.bends?` bends {${u.bends.map(y=>`{x=${y.x},y=${y.y}}`).join(",")}}`:"";c.push(`edge ${u.id}${p}${C}`)}c.length>0&&(s.push(""),s.push("layout {"),s.push(...c.map(u=>`  ${u}`)),s.push("}"))}const h=[];if(e?.includeStyle){for(const c of i){const u=Ks(c.style,!1,c.coordinates,c.info);u&&h.push(`node ${c.id} ${u}`)}for(const c of t){const u=Os(c.style,c.info);u&&h.push(`group ${c.id} ${u}`)}for(const c of A){const u=Ns(c.style,!0,c.info);u&&h.push(`edge ${c.id} ${u}`)}}for(const[c,u]of r)h.push(`rel ${c} [label=${JSON.stringify(u)}]`);return h.length>0&&(s.push(""),s.push("style {"),s.push(...h.map(c=>`  ${c}`)),s.push("}")),s.join(`
`)}function wA(i,A=16){return XA(),`<svg width="${A}" height="${A}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <use href="#${i}"></use>
  </svg>`}function Gs(i,A){if(!i)return;const t=A.split(".");let e=i;for(const s of t){if(e==null||typeof e!="object")return;e=e[s]}return e}function Rs(i,A){if(!i||typeof i!="object")return"";const t=[];function e(s,n){for(const[o,a]of Object.entries(s)){const r=n?`${n}.${o}`:o;a!=null&&typeof a=="object"&&!Array.isArray(a)&&!(a instanceof Date)?e(a,r):t.push(`${A}.${r}: ${a==null?"":String(a)}`)}}return e(i,""),t.join(`
`)}class ar{constructor(A,t,e){this.currentView=null,this.views=new Map,this.tabButtons=new Map,this.editToggleButton=null,this.alwaysShowEdgesButton=null,this.lightingToggleButton=null,this.tileTypeButton=null,this.moonToggleButton=null,this.fitCenterButton=null,this.deleteBendButton=null,this.undoButton=null,this.redoButton=null,this.cancelEditButton=null,this.exportButton=null,this.tableContainer=null,this.nodesTableContainer=null,this.edgesTableContainer=null,this.groupsTableContainer=null,this.tableOptions=null,this.nodes=[],this.edges=[],this.groups=[],this.isExternalTableContainer=!1,this.hasEdges=!1,this.sharedAlwaysShowEdges=!1,this.sharedLightingEnabled=!1,this.sharedTime=null,this.sharedTileServerIndex=0,this.showExportButton=!0,this.showMoonButton=!0,this.showLightingButton=!0,this.container=A,this.enabledViews=t,this.showExportButton=e?.showExportButton!==!1,this.showMoonButton=e?.showMoonButton!==!1,this.showLightingButton=e?.showLightingButton!==!1,this.sharedAlwaysShowEdges=e?.initialAlwaysShowEdges===!0,XA(),this.container.style.display="flex",this.container.style.flexDirection="column",this.container.style.width="100%",this.tabContainer=document.createElement("div"),this.tabContainer.style.display="flex",this.tabContainer.style.gap="4px",this.tabContainer.style.padding="8px",this.tabContainer.style.borderBottom="none",this.tabContainer.style.backgroundColor="transparent",this.tabContainer.style.position="absolute",this.tabContainer.style.top="0",this.tabContainer.style.left="0",this.tabContainer.style.right="0",this.tabContainer.style.zIndex="1000",this.tabContainer.style.pointerEvents="auto",this.viewContainer=document.createElement("div"),this.viewContainer.style.flex="1 1 0%",this.viewContainer.style.position="relative",this.viewContainer.style.overflow="hidden",this.viewContainer.style.minHeight="0",this.createTabButtons(),this.createCommonControlsContainer(),this.container.appendChild(this.viewContainer),this.viewContainer.appendChild(this.tabContainer)}setTableOptions(A){this.tableOptions=A,A&&(A.nodes?.format||A.edges?.format||A.groups?.format)?this.createTableContainer():this.tableContainer&&(this.isExternalTableContainer?(this.tableContainer.innerHTML="",this.tableContainer=null,this.isExternalTableContainer=!1):this.container.contains(this.tableContainer)&&(this.container.removeChild(this.tableContainer),this.tableContainer=null),this.nodesTableContainer=null,this.edgesTableContainer=null,this.groupsTableContainer=null)}setOnNodeClickCallback(A){this.onNodeClickCallback=A}createTableContainer(){if(!this.tableContainer){if(this.tableOptions&&"container"in this.tableOptions&&this.tableOptions.container){const A=this.tableOptions.container;let t=null;if(typeof A=="string"?t=document.querySelector(A):A instanceof HTMLElement&&(t=A),t){this.tableContainer=t,this.isExternalTableContainer=!0;return}}this.tableContainer=document.createElement("div"),this.tableContainer.style.height="300px",this.tableContainer.style.overflowY="auto",this.tableContainer.style.backgroundColor="#fff",this.tableContainer.style.borderTop="1px solid #ddd",this.isExternalTableContainer=!1,this.container.appendChild(this.tableContainer)}}setData(A,t,e){this.nodes=A,this.edges=t,this.groups=e||[],this.hasEdges=Array.isArray(t)&&t.length>0,this.updateTables(),this.updateAlwaysShowEdgesButtonVisibility()}getData(){return{nodes:this.nodes,edges:this.edges,groups:this.groups}}updateTables(){if(!(!this.tableOptions||!this.tableContainer)){if(this.tableContainer.innerHTML="",this.tableOptions.nodes?.format){this.nodesTableContainer=this.createTable("nodes",this.tableOptions.nodes.header||"",this.tableOptions.nodes.format,this.nodes,"node");const A=this.wrapTableSection(this.nodesTableContainer,this.tableOptions.nodes.sectionTitle);this.tableContainer.appendChild(A)}if(this.tableOptions.edges?.format){this.edgesTableContainer=this.createTable("edges",this.tableOptions.edges.header||"",this.tableOptions.edges.format,this.edges,"edge");const A=this.wrapTableSection(this.edgesTableContainer,this.tableOptions.edges.sectionTitle);this.tableContainer.appendChild(A)}if(this.tableOptions.groups?.format){this.groupsTableContainer=this.createTable("groups",this.tableOptions.groups.header||"",this.tableOptions.groups.format,this.groups,"group");const A=this.wrapTableSection(this.groupsTableContainer,this.tableOptions.groups.sectionTitle);this.tableContainer.appendChild(A)}}}wrapTableSection(A,t){const e=document.createElement("div");if(e.className="relatos-table-section",t){const s=document.createElement("h3");s.textContent=t,s.style.margin="0 0 8px 0",s.style.padding="8px 12px 0",s.style.fontSize="14px",s.style.color="#333",e.appendChild(s)}return e.appendChild(A),e}createTable(A,t,e,s,n){const o=document.createElement("div"),a=document.createElement("table");if(a.style.width="100%",a.style.borderCollapse="collapse",!document.getElementById("relatos-table-styles")){const c=document.createElement("style");c.id="relatos-table-styles",c.textContent=`
        .relatos-table tr {
          border-bottom: 1px solid #ddd;
        }
        .relatos-table tr:hover {
          background-color: #f9f9f9;
        }
        .relatos-table tr.highlight {
          background-color: #fff9c4;
          animation: relatos-highlight-fade 2s ease-out;
        }
        @keyframes relatos-highlight-fade {
          from {
            background-color: #fff9c4;
          }
          to {
            background-color: transparent;
          }
        }
        .relatos-table th,
        .relatos-table td {
          padding: 12px;
          text-align: left;
        }
        .relatos-table th {
          background-color: #f5f5f5;
          font-weight: 600;
          color: #333;
          position: sticky;
          top: 0;
          z-index: 1;
        }
      `,document.head.appendChild(c)}a.className="relatos-table";const r=document.createElement("thead");if(t)r.innerHTML=t;else{const c=document.createElement("tr");r.appendChild(c)}a.appendChild(r);const h=document.createElement("tbody");for(const c of s){const u=document.createElement("tr");u.id=`${n}-${c.id}`,u.style.cursor="pointer";let l=e;if(l=l.replace(/\{\{info\}\}/g,()=>Rs("info"in c?c.info:void 0,"info")),l=l.replace(/\{\{info\.([^}]+)\}\}/g,(B,w)=>String(Gs("info"in c?c.info:void 0,w)??"")),l=l.replace(/\{\{meta\}\}/g,()=>Rs("meta"in c?c.meta:void 0,"meta")),l=l.replace(/\{\{meta\.([^}]+)\}\}/g,(B,w)=>String(Gs("meta"in c?c.meta:void 0,w)??"")),l=l.replace(/\{\{id\}\}/g,String(c.id||"")),l=l.replace(/\{\{label\}\}/g,String("label"in c&&c.label||"")),"position"in c&&c.position&&typeof c.position=="object"){const B=c.position;l=l.replace(/\{\{position\.x\}\}/g,String(B.x??"")),l=l.replace(/\{\{position\.y\}\}/g,String(B.y??"")),l=l.replace(/\{\{x\}\}/g,String(B.x??"")),l=l.replace(/\{\{y\}\}/g,String(B.y??""))}if("coordinates"in c&&c.coordinates&&(l=l.replace(/\{\{coordinates\.0\}\}/g,String(c.coordinates[0]||"")),l=l.replace(/\{\{coordinates\.1\}\}/g,String(c.coordinates[1]||"")),l=l.replace(/\{\{lat\}\}/g,String(c.coordinates[0]||"")),l=l.replace(/\{\{lon\}\}/g,String(c.coordinates[1]||"")),l=l.replace(/\{\{latitude\}\}/g,String(c.coordinates[0]||"")),l=l.replace(/\{\{longitude\}\}/g,String(c.coordinates[1]||""))),c.style&&typeof c.style=="object"){const B=c.style;l=l.replace(/\{\{style\.color\}\}/g,String(B.color??"")),l=l.replace(/\{\{style\.borderColor\}\}/g,String(B.borderColor??"")),l=l.replace(/\{\{style\.width\}\}/g,String(B.width??"")),l=l.replace(/\{\{style\.height\}\}/g,String(B.height??"")),l=l.replace(/\{\{style\.weight\}\}/g,String(B.weight??"")),l=l.replace(/\{\{style\.label\}\}/g,String(B.label??"")),l=l.replace(/\{\{style\.srcLabel\}\}/g,String(B.srcLabel??"")),l=l.replace(/\{\{style\.dstLabel\}\}/g,String(B.dstLabel??"")),l=l.replace(/\{\{style\.borderDash\}\}/g,String(B.borderDash??"")),l=l.replace(/\{\{style\.dash\}\}/g,String(B.borderDash??"")),l=l.replace(/\{\{weight\}\}/g,String(B.weight??""))}if(!("nodeIds"in c)&&c.style&&typeof c.style=="object"){const B=c.style;l=l.replace(/\{\{w\}\}/g,String(B.width??"")),l=l.replace(/\{\{h\}\}/g,String(B.height??""))}"src"in c&&(l=l.replace(/\{\{src\}\}/g,String(c.src||"")),l=l.replace(/\{\{dst\}\}/g,String(c.dst||"")),l=l.replace(/\{\{relType\}\}/g,String(c.relType||"")));const d=c,g=d.srcAnchor??d.anchors?.src,f=d.dstAnchor??d.anchors?.dst;if(l=l.replace(/\{\{src_side\}\}/g,String(g?.side??"")),l=l.replace(/\{\{src_t\}\}/g,String(g?.t??"")),l=l.replace(/\{\{dst_side\}\}/g,String(f?.side??"")),l=l.replace(/\{\{dst_t\}\}/g,String(f?.t??"")),l=l.replace(/\{\{src\.x\}\}/g,""),l=l.replace(/\{\{src\.y\}\}/g,""),l=l.replace(/\{\{dst\.x\}\}/g,""),l=l.replace(/\{\{dst\.y\}\}/g,""),"src"in c){const B=c.bends,w=Array.isArray(B)&&B.length>0?B.map(p=>`{x=${p.x},y=${p.y}}`).join(", "):"";l=l.replace(/\{\{bends\}\}/g,w)}if("nodeIds"in c){const B=c,w=Array.isArray(s)?s.filter(p=>p.parentId===B.id).map(p=>p.id):[];l=l.replace(/\{\{nodeIds\}\}/g,String(B.nodeIds?.join(", ")||"")),l=l.replace(/\{\{nodeCount\}\}/g,String(B.nodeIds?.length||0)),l=l.replace(/\{\{groupIds\}\}/g,String(w.join(", ")||"")),l=l.replace(/\{\{groupCount\}\}/g,String(w.length||0)),l=l.replace(/\{\{parentId\}\}/g,String(B.parentId||"")),B.layout&&(l=l.replace(/\{\{layout\.position\.x\}\}/g,String(B.layout.position.x||"")),l=l.replace(/\{\{layout\.position\.y\}\}/g,String(B.layout.position.y||"")),l=l.replace(/\{\{layout\.size\.width\}\}/g,String(B.layout.size.width||"")),l=l.replace(/\{\{layout\.size\.height\}\}/g,String(B.layout.size.height||"")),l=l.replace(/\{\{x\}\}/g,String(B.layout.position.x??"")),l=l.replace(/\{\{y\}\}/g,String(B.layout.position.y??"")),l=l.replace(/\{\{w\}\}/g,String(B.layout.size.width??"")),l=l.replace(/\{\{h\}\}/g,String(B.layout.size.height??"")))}l=l.replace(/\{\{[^}]*\}\}/g,""),u.innerHTML=l,u.addEventListener("click",()=>{if(n==="node"){if(this.highlightAndScrollToRow(u),!this.currentView)return;const B=this.views.get(this.currentView);B?.selectNode&&B.selectNode(c.id)}}),h.appendChild(u)}return a.appendChild(h),o.appendChild(a),o}highlightAndScrollToRow(A){const t=this.tableContainer?.querySelector(".highlight");t&&t.classList.remove("highlight"),A.classList.add("highlight"),setTimeout(()=>{A.classList.remove("highlight")},2e3),A.scrollIntoView({behavior:"smooth",block:"center"})}highlightNodeRow(A){if(!A||!this.tableContainer)return;const t=this.tableContainer.querySelector(`#node-${A}`);t&&this.highlightAndScrollToRow(t)}highlightNodeRows(A){if(!A||A.length===0||!this.tableContainer)return;this.tableContainer.querySelectorAll(".highlight").forEach(s=>s.classList.remove("highlight"));let e=null;for(const s of A){const n=this.tableContainer?.querySelector(`#node-${s}`);n&&(n.classList.add("highlight"),e||(e=n),setTimeout(()=>{n.classList.remove("highlight")},2e3))}e&&e.scrollIntoView({behavior:"smooth",block:"center"})}highlightEdgeRow(A){if(!A||!this.tableContainer)return;const t=this.tableContainer.querySelector(`#edge-${A}`);t&&this.highlightAndScrollToRow(t)}highlightGroupRow(A){if(!A||!this.tableContainer)return;const t=this.tableContainer.querySelector(`#group-${A}`);t&&this.highlightAndScrollToRow(t)}createCommonControlsContainer(){this.commonControlsContainer=document.createElement("div"),this.commonControlsContainer.style.display="flex",this.commonControlsContainer.style.gap="4px",this.commonControlsContainer.style.marginLeft="auto",this.commonControlsContainer.style.pointerEvents="auto",this.createCancelEditButton(),this.createUndoButton(),this.createRedoButton(),this.createEditToggleButton(),this.createAlwaysShowEdgesButton(),this.createDeleteBendButton(),this.createLightingToggleButton(),this.createTileTypeButton(),this.createMoonToggleButton(),this.createFitCenterButton(),this.createExportButton(),this.tabContainer.appendChild(this.commonControlsContainer)}createEditToggleButton(){this.editToggleButton=document.createElement("button"),this.editToggleButton.className="relatos-edit-toggle",this.editToggleButton.style.padding="6px",this.editToggleButton.style.border="1px solid #ccc",this.editToggleButton.style.borderRadius="4px",this.editToggleButton.style.backgroundColor="#fff",this.editToggleButton.style.cursor="pointer",this.editToggleButton.style.fontSize="16px",this.editToggleButton.style.width="32px",this.editToggleButton.style.height="32px",this.editToggleButton.style.display="none",this.editToggleButton.style.alignItems="center",this.editToggleButton.style.justifyContent="center",this.editToggleButton.style.pointerEvents="auto",this.editToggleButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.editToggleButton.style.transition="0.2s",this.editToggleButton.style.color="#333",this.commonControlsContainer.insertBefore(this.editToggleButton,this.commonControlsContainer.firstChild)}createAlwaysShowEdgesButton(){this.alwaysShowEdgesButton=document.createElement("button"),this.alwaysShowEdgesButton.className="relatos-always-show-edges-toggle",this.alwaysShowEdgesButton.innerHTML=wA("icon-relations",16),this.alwaysShowEdgesButton.setAttribute("aria-label","Toggle edges"),this.alwaysShowEdgesButton.setAttribute("title","Toggle edges"),this.alwaysShowEdgesButton.style.padding="6px",this.alwaysShowEdgesButton.style.border="1px solid #ccc",this.alwaysShowEdgesButton.style.borderRadius="4px",this.alwaysShowEdgesButton.style.backgroundColor="#fff",this.alwaysShowEdgesButton.style.cursor="pointer",this.alwaysShowEdgesButton.style.fontSize="16px",this.alwaysShowEdgesButton.style.width="32px",this.alwaysShowEdgesButton.style.height="32px",this.alwaysShowEdgesButton.style.display="flex",this.alwaysShowEdgesButton.style.alignItems="center",this.alwaysShowEdgesButton.style.justifyContent="center",this.alwaysShowEdgesButton.style.pointerEvents="auto",this.alwaysShowEdgesButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.alwaysShowEdgesButton.style.transition="0.2s",this.alwaysShowEdgesButton.style.color="#000000",this.alwaysShowEdgesButton.addEventListener("click",()=>{if(!this.currentView)return;const A=this.views.get(this.currentView);if(A?.getAlwaysShowEdges){const t=A.getAlwaysShowEdges();this.setAlwaysShowEdges(!t)}}),this.commonControlsContainer.appendChild(this.alwaysShowEdgesButton)}createLightingToggleButton(){this.lightingToggleButton=document.createElement("button"),this.lightingToggleButton.innerHTML=wA("icon-sun",16),this.lightingToggleButton.setAttribute("aria-label","Toggle lighting"),this.lightingToggleButton.setAttribute("title","Toggle lighting"),this.lightingToggleButton.style.padding="6px",this.lightingToggleButton.style.border="1px solid #ccc",this.lightingToggleButton.style.borderRadius="4px",this.lightingToggleButton.style.backgroundColor="#fff",this.lightingToggleButton.style.cursor="pointer",this.lightingToggleButton.style.fontSize="16px",this.lightingToggleButton.style.width="32px",this.lightingToggleButton.style.height="32px",this.lightingToggleButton.style.display="none",this.lightingToggleButton.style.alignItems="center",this.lightingToggleButton.style.justifyContent="center",this.lightingToggleButton.style.pointerEvents="auto",this.lightingToggleButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.lightingToggleButton.style.transition="0.2s",this.lightingToggleButton.addEventListener("click",()=>{if(!this.currentView)return;const A=this.views.get(this.currentView);if(A?.getLightingEnabled){const t=A.getLightingEnabled();this.setLightingEnabled(!t)}}),this.commonControlsContainer.appendChild(this.lightingToggleButton)}createTileTypeButton(){this.tileTypeButton=document.createElement("button"),this.tileTypeButton.innerHTML=wA("icon-map-tiles",16),this.tileTypeButton.setAttribute("aria-label","Switch tile type"),this.tileTypeButton.setAttribute("title","Switch tile type"),this.tileTypeButton.style.padding="6px",this.tileTypeButton.style.border="1px solid #ccc",this.tileTypeButton.style.borderRadius="4px",this.tileTypeButton.style.backgroundColor="#fff",this.tileTypeButton.style.cursor="pointer",this.tileTypeButton.style.fontSize="16px",this.tileTypeButton.style.width="32px",this.tileTypeButton.style.height="32px",this.tileTypeButton.style.display="none",this.tileTypeButton.style.alignItems="center",this.tileTypeButton.style.justifyContent="center",this.tileTypeButton.style.pointerEvents="auto",this.tileTypeButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.tileTypeButton.style.transition="0.2s",this.tileTypeButton.addEventListener("click",()=>{if(!this.currentView)return;let A=0;for(const t of this.views.values())if(t.getTileServerCount){const e=t.getTileServerCount();e>A&&(A=e)}if(!(A<2)){this.sharedTileServerIndex=(this.sharedTileServerIndex+1)%A;for(const t of this.views.values())if(t.getTileServerCount&&t.setTileServerIndex){const e=t.getTileServerCount();if(e>0){const s=this.sharedTileServerIndex%e;t.setTileServerIndex(s)}}this.updateTileTypeButton()}}),this.commonControlsContainer.appendChild(this.tileTypeButton)}createMoonToggleButton(){this.moonToggleButton=document.createElement("button"),this.moonToggleButton.setAttribute("aria-label","Toggle moon"),this.moonToggleButton.setAttribute("title","Toggle moon"),this.moonToggleButton.style.padding="6px",this.moonToggleButton.style.border="1px solid #ccc",this.moonToggleButton.style.borderRadius="4px",this.moonToggleButton.style.backgroundColor="#fff",this.moonToggleButton.style.cursor="pointer",this.moonToggleButton.style.fontSize="16px",this.moonToggleButton.style.width="32px",this.moonToggleButton.style.height="32px",this.moonToggleButton.style.display="none",this.moonToggleButton.style.alignItems="center",this.moonToggleButton.style.justifyContent="center",this.moonToggleButton.style.pointerEvents="auto",this.moonToggleButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.moonToggleButton.style.transition="0.2s",this.moonToggleButton.addEventListener("click",()=>{if(this.currentView==="map2d"){const A=this.views.get("map2d");A&&A.toggleMoon&&(A.toggleMoon(),this.updateMoonButton())}}),this.commonControlsContainer.appendChild(this.moonToggleButton)}updateMoonButton(){if(!this.moonToggleButton||this.currentView!=="map2d")return;const A=this.views.get("map2d");if(!A)return;const t=A.isMoonEnabled?.()||!1,e=A.getTime?.()||null,s=e?new Date(e):new Date,n=A.getMoonPhase?.(s)||0,o=A.getMoonPhaseIcon?.(n,16)||"";this.moonToggleButton.innerHTML=o,t?(this.moonToggleButton.style.backgroundColor="#fff9c4",this.moonToggleButton.style.boxShadow="inset 0 2px 4px rgba(0, 0, 0, 0.2)",this.moonToggleButton.style.transform="translateY(1px)",this.moonToggleButton.setAttribute("title","Hide moon")):(this.moonToggleButton.style.backgroundColor="#fff",this.moonToggleButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.moonToggleButton.style.transform="translateY(0)",this.moonToggleButton.setAttribute("title","Show moon"))}createFitCenterButton(){this.fitCenterButton=document.createElement("button"),this.fitCenterButton.innerHTML=wA("icon-home",16),this.fitCenterButton.setAttribute("aria-label","Fit and center"),this.fitCenterButton.setAttribute("title","Fit and center"),this.fitCenterButton.style.padding="6px",this.fitCenterButton.style.border="1px solid #ccc",this.fitCenterButton.style.borderRadius="4px",this.fitCenterButton.style.backgroundColor="#fff",this.fitCenterButton.style.cursor="pointer",this.fitCenterButton.style.fontSize="16px",this.fitCenterButton.style.width="32px",this.fitCenterButton.style.height="32px",this.fitCenterButton.style.display="flex",this.fitCenterButton.style.alignItems="center",this.fitCenterButton.style.justifyContent="center",this.fitCenterButton.style.pointerEvents="auto",this.fitCenterButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.fitCenterButton.style.transition="0.2s",this.fitCenterButton.addEventListener("click",()=>{if(!this.currentView)return;const A=this.views.get(this.currentView);A?.fitAndCenter&&A.fitAndCenter()}),this.commonControlsContainer.appendChild(this.fitCenterButton)}createExportButton(){this.exportButton=document.createElement("button"),this.exportButton.innerHTML=wA("icon-export",16),this.exportButton.setAttribute("aria-label","Export to relat"),this.exportButton.setAttribute("title","Export to relat (copy to clipboard)"),this.exportButton.style.padding="6px",this.exportButton.style.border="1px solid #ccc",this.exportButton.style.borderRadius="4px",this.exportButton.style.backgroundColor="#fff",this.exportButton.style.cursor="pointer",this.exportButton.style.fontSize="16px",this.exportButton.style.width="32px",this.exportButton.style.height="32px",this.exportButton.style.display="flex",this.exportButton.style.alignItems="center",this.exportButton.style.justifyContent="center",this.exportButton.style.pointerEvents="auto",this.exportButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.exportButton.style.transition="0.2s",this.exportButton.addEventListener("click",async()=>{await this.exportRelatAndCopy()}),this.commonControlsContainer.appendChild(this.exportButton)}async exportRelatAndCopy(){const A="Export to relat (copy to clipboard)";try{const t=Lt(this.nodes,this.edges,this.groups,{includeLayout:!0});console.log("Exported relat length:",t.length);const e=await Zn(t);this.exportButton&&(e?(this.exportButton.style.backgroundColor="#c8e6c9",this.exportButton.style.borderColor="#4caf50",this.exportButton.setAttribute("title","Copied to clipboard!"),setTimeout(()=>{this.exportButton&&(this.exportButton.style.backgroundColor="#fff",this.exportButton.style.borderColor="#ccc",this.exportButton.setAttribute("title",A))},2e3)):(this.exportButton.style.backgroundColor="#ffcdd2",this.exportButton.style.borderColor="#f44336",this.exportButton.setAttribute("title","Failed to copy"),setTimeout(()=>{this.exportButton&&(this.exportButton.style.backgroundColor="#fff",this.exportButton.style.borderColor="#ccc",this.exportButton.setAttribute("title",A))},2e3)))}catch(t){console.error("Export failed:",t),this.exportButton&&(this.exportButton.style.backgroundColor="#ffcdd2",this.exportButton.style.borderColor="#f44336",this.exportButton.setAttribute("title",`Export failed: ${t instanceof Error?t.message:String(t)}`),setTimeout(()=>{this.exportButton&&(this.exportButton.style.backgroundColor="#fff",this.exportButton.style.borderColor="#ccc",this.exportButton.setAttribute("title",A))},3e3))}}getExportRelat(A){return Lt(this.nodes,this.edges,this.groups,{includeLayout:A??!0})}createDeleteBendButton(){this.deleteBendButton=document.createElement("button"),this.deleteBendButton.innerHTML=wA("icon-trash",16),this.deleteBendButton.setAttribute("aria-label","Delete bend point"),this.deleteBendButton.setAttribute("title","Delete bend point"),this.deleteBendButton.style.padding="6px",this.deleteBendButton.style.border="1px solid #ccc",this.deleteBendButton.style.borderRadius="4px",this.deleteBendButton.style.backgroundColor="#fff",this.deleteBendButton.style.cursor="pointer",this.deleteBendButton.style.fontSize="16px",this.deleteBendButton.style.width="32px",this.deleteBendButton.style.height="32px",this.deleteBendButton.style.display="none",this.deleteBendButton.style.alignItems="center",this.deleteBendButton.style.justifyContent="center",this.deleteBendButton.style.pointerEvents="auto",this.deleteBendButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.deleteBendButton.style.transition="0.2s",this.deleteBendButton.addEventListener("click",()=>{if(!this.currentView)return;const A=this.views.get(this.currentView);A?.deleteNearestBendPoint&&A.deleteNearestBendPoint()})}createCancelEditButton(){this.cancelEditButton=document.createElement("button"),this.cancelEditButton.innerHTML=wA("icon-close",16),this.cancelEditButton.setAttribute("aria-label","Cancel edit"),this.cancelEditButton.setAttribute("title","Cancel edit and restore previous state"),this.cancelEditButton.style.padding="6px",this.cancelEditButton.style.border="1px solid #ccc",this.cancelEditButton.style.borderRadius="4px",this.cancelEditButton.style.backgroundColor="#fff",this.cancelEditButton.style.cursor="pointer",this.cancelEditButton.style.fontSize="16px",this.cancelEditButton.style.width="32px",this.cancelEditButton.style.height="32px",this.cancelEditButton.style.display="none",this.cancelEditButton.style.alignItems="center",this.cancelEditButton.style.justifyContent="center",this.cancelEditButton.style.pointerEvents="auto",this.cancelEditButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.cancelEditButton.style.transition="0.2s",this.cancelEditButton.addEventListener("click",()=>{if(!this.currentView)return;const A=this.views.get(this.currentView);A?.cancelEdit&&A.cancelEdit()}),this.commonControlsContainer.appendChild(this.cancelEditButton)}createUndoButton(){this.undoButton=document.createElement("button"),this.undoButton.innerHTML=wA("icon-undo",16),this.undoButton.setAttribute("aria-label","Undo"),this.undoButton.setAttribute("title","Undo (Ctrl+Z)"),this.undoButton.style.padding="6px",this.undoButton.style.border="1px solid #ccc",this.undoButton.style.borderRadius="4px",this.undoButton.style.backgroundColor="#fff",this.undoButton.style.cursor="pointer",this.undoButton.style.fontSize="16px",this.undoButton.style.width="32px",this.undoButton.style.height="32px",this.undoButton.style.display="none",this.undoButton.style.alignItems="center",this.undoButton.style.justifyContent="center",this.undoButton.style.pointerEvents="auto",this.undoButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.undoButton.style.transition="0.2s",this.undoButton.addEventListener("click",()=>{if(!this.currentView)return;const A=this.views.get(this.currentView);A?.undo&&A.undo()}),this.commonControlsContainer.appendChild(this.undoButton)}createRedoButton(){this.redoButton=document.createElement("button"),this.redoButton.innerHTML=wA("icon-redo",16),this.redoButton.setAttribute("aria-label","Redo"),this.redoButton.setAttribute("title","Redo (Ctrl+Shift+Z)"),this.redoButton.style.padding="6px",this.redoButton.style.border="1px solid #ccc",this.redoButton.style.borderRadius="4px",this.redoButton.style.backgroundColor="#fff",this.redoButton.style.cursor="pointer",this.redoButton.style.fontSize="16px",this.redoButton.style.width="32px",this.redoButton.style.height="32px",this.redoButton.style.display="none",this.redoButton.style.alignItems="center",this.redoButton.style.justifyContent="center",this.redoButton.style.pointerEvents="auto",this.redoButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.redoButton.style.transition="0.2s",this.redoButton.addEventListener("click",()=>{if(!this.currentView)return;const A=this.views.get(this.currentView);A?.redo&&A.redo()}),this.commonControlsContainer.appendChild(this.redoButton)}updateEditToggleButton(){if(!this.editToggleButton||!this.currentView)return;const A=this.views.get(this.currentView);if(!A)return;if((A.isEditable?.()||!1)&&this.currentView==="graph"){this.editToggleButton.style.display="flex";const e=A.getEditToggleButton?.();e&&(this.editToggleButton.innerHTML=e.innerHTML,this.editToggleButton.setAttribute("aria-label",e.getAttribute("aria-label")||"Toggle edit mode"),this.editToggleButton.setAttribute("title",e.getAttribute("title")||"Toggle edit mode"),this.editToggleButton.className=e.className,this.editToggleButton.style.padding="6px",this.editToggleButton.style.border=e.style.border||"1px solid #ccc",this.editToggleButton.style.borderRadius=e.style.borderRadius||"4px",this.editToggleButton.style.backgroundColor=e.style.backgroundColor||"#fff",this.editToggleButton.style.color=e.style.color||"#333",this.editToggleButton.style.borderColor=e.style.borderColor||"#ccc",this.editToggleButton.style.cursor=e.style.cursor||"pointer",this.editToggleButton.style.fontSize="16px",this.editToggleButton.style.width="32px",this.editToggleButton.style.height="32px",this.editToggleButton.style.alignItems="center",this.editToggleButton.style.justifyContent="center",this.editToggleButton.style.transition=e.style.transition||"0.2s",this.editToggleButton.style.boxShadow=e.style.boxShadow||"0 2px 4px rgba(0, 0, 0, 0.1)",this.editToggleButton.style.transform=e.style.transform||"translateY(0)",this.editToggleButton.onclick=()=>{e.click()})}else this.editToggleButton.style.display="none"}createTabButtons(){const A={graph:"icon-view-graph",map2d:"icon-view-map",globe3d:"icon-view-globe3d"},t={graph:"Graph",map2d:"Map 2D",globe3d:"Globe 3D"};for(const e of this.enabledViews){const s=document.createElement("button");s.innerHTML=wA(A[e],16),s.setAttribute("aria-label",t[e]),s.setAttribute("title",t[e]),s.style.padding="8px 16px",s.style.border="1px solid #ccc",s.style.borderRadius="4px 4px 0 0",s.style.backgroundColor="#fff",s.style.cursor="pointer",s.style.fontSize="14px",s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",s.style.color="#000000",s.style.pointerEvents="auto",s.style.visibility="visible",s.style.opacity="1",s.addEventListener("click",()=>{this.switchView(e)}),this.tabButtons.set(e,s),this.tabContainer.appendChild(s)}}registerView(A,t){this.views.set(A,t),t.hide(),this.applySharedToggleStates(t),this.updateEditToggleButton()}switchView(A){if(!this.enabledViews.includes(A)||this.currentView===A)return;if(this.currentView){const s=this.views.get(this.currentView);s&&s.hide();const n=this.tabButtons.get(this.currentView);n&&(n.style.backgroundColor="#fff",n.style.fontWeight="normal",n.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",n.style.transform="translateY(0)")}const t=this.views.get(A);t&&(this.applySharedToggleStates(t),t.show(),setTimeout(()=>{this.currentView===A&&(this.applySharedToggleStates(t),this.updateLightingButton(),this.updateTileTypeButton(),this.updateMoonButton())},A==="globe3d"?500:100),t.resize());const e=this.tabButtons.get(A);e&&(e.style.backgroundColor="#fff9c4",e.style.fontWeight="bold",e.style.boxShadow="inset 0 2px 4px rgba(0, 0, 0, 0.2)",e.style.transform="translateY(1px)"),this.currentView=A,this.updateEditToggleButton(),this.updateCommonControlsVisibility(),this.updateAlwaysShowEdgesButton(),this.updateLightingButton(),this.updateTileTypeButton(),this.updateCancelEditButton(),this.updateDeleteBendButton()}setInitialView(A){if(!this.enabledViews.includes(A)){this.switchView(this.enabledViews[0]);return}this.switchView(A)}getCurrentView(){return this.currentView}getViewContainer(){return this.viewContainer}getView(A){return this.views.get(A)}resize(){if(this.currentView){const A=this.views.get(this.currentView);A&&A.resize()}}applySharedToggleStates(A){if(A.setAlwaysShowEdges&&A.setAlwaysShowEdges(this.sharedAlwaysShowEdges),A.setLightingEnabled){const t=A.setLightingEnabled;t&&t.call(A,this.sharedLightingEnabled,!1)}if(A.setTime&&this.sharedTime!==null&&A.setTime(this.sharedTime),A.getTileServerCount&&A.setTileServerIndex){const t=A.getTileServerCount();if(t>0){const e=this.sharedTileServerIndex%t;A.setTileServerIndex(e)}}}setAlwaysShowEdges(A){this.sharedAlwaysShowEdges=A;for(const t of this.views.values())t.setAlwaysShowEdges&&t.setAlwaysShowEdges(A);this.updateAlwaysShowEdgesButton()}getAlwaysShowEdges(){return this.sharedAlwaysShowEdges}setLightingEnabled(A){this.sharedLightingEnabled=A;for(const t of this.views.values())t.setLightingEnabled&&t.setLightingEnabled(A);this.updateLightingButton()}getLightingEnabled(){return this.sharedLightingEnabled}setTime(A){this.sharedTime=A;for(const t of this.views.values())t.setTime&&t.setTime(A);this.currentView==="map2d"&&this.updateMoonButton()}getTime(){return this.sharedTime}updateCommonControlsVisibility(){const A=this.currentView==="graph",t=this.currentView==="map2d"||this.currentView==="globe3d";this.cancelEditButton&&t&&(this.cancelEditButton.style.display="none"),this.editToggleButton&&t&&(this.editToggleButton.style.display="none"),this.deleteBendButton&&(A?this.updateDeleteBendButton():this.deleteBendButton.style.display="none"),this.lightingToggleButton&&(this.lightingToggleButton.style.display=t&&this.showLightingButton?"flex":"none"),this.tileTypeButton&&(this.tileTypeButton.style.display=t?"flex":"none"),this.moonToggleButton&&(this.moonToggleButton.style.display=this.currentView==="map2d"&&this.showMoonButton?"flex":"none"),this.alwaysShowEdgesButton&&(this.alwaysShowEdgesButton.style.display=this.hasEdges?"flex":"none"),this.fitCenterButton&&(this.fitCenterButton.style.display="flex"),this.reorderButtons()}reorderButtons(){const A=this.currentView==="graph",t=this.currentView==="map2d"||this.currentView==="globe3d";if(!this.commonControlsContainer)return;const e=[];for(this.cancelEditButton&&e.push(this.cancelEditButton),this.undoButton&&e.push(this.undoButton),this.redoButton&&e.push(this.redoButton),this.editToggleButton&&e.push(this.editToggleButton),this.deleteBendButton&&e.push(this.deleteBendButton),this.lightingToggleButton&&e.push(this.lightingToggleButton),this.moonToggleButton&&e.push(this.moonToggleButton),this.tileTypeButton&&e.push(this.tileTypeButton),this.alwaysShowEdgesButton&&this.hasEdges&&e.push(this.alwaysShowEdgesButton),this.fitCenterButton&&e.push(this.fitCenterButton),this.exportButton&&this.showExportButton&&e.push(this.exportButton);this.commonControlsContainer.firstChild;)this.commonControlsContainer.removeChild(this.commonControlsContainer.firstChild);A?(this.undoButton&&this.commonControlsContainer.appendChild(this.undoButton),this.redoButton&&this.commonControlsContainer.appendChild(this.redoButton),this.deleteBendButton&&this.commonControlsContainer.appendChild(this.deleteBendButton),this.cancelEditButton&&this.commonControlsContainer.appendChild(this.cancelEditButton),this.editToggleButton&&this.commonControlsContainer.appendChild(this.editToggleButton),this.alwaysShowEdgesButton&&this.hasEdges&&this.commonControlsContainer.appendChild(this.alwaysShowEdgesButton),this.fitCenterButton&&this.commonControlsContainer.appendChild(this.fitCenterButton),this.exportButton&&this.showExportButton&&this.commonControlsContainer.appendChild(this.exportButton)):t&&(this.moonToggleButton&&this.currentView==="map2d"&&this.showMoonButton&&this.commonControlsContainer.appendChild(this.moonToggleButton),this.lightingToggleButton&&this.showLightingButton&&this.commonControlsContainer.appendChild(this.lightingToggleButton),this.tileTypeButton&&this.commonControlsContainer.appendChild(this.tileTypeButton),this.alwaysShowEdgesButton&&this.hasEdges&&this.commonControlsContainer.appendChild(this.alwaysShowEdgesButton),this.fitCenterButton&&this.commonControlsContainer.appendChild(this.fitCenterButton),this.exportButton&&this.showExportButton&&this.commonControlsContainer.appendChild(this.exportButton))}updateAlwaysShowEdgesButtonVisibility(){this.alwaysShowEdgesButton&&(this.alwaysShowEdgesButton.style.display=this.hasEdges?"flex":"none",this.reorderButtons(),this.updateAlwaysShowEdgesButton())}updateAlwaysShowEdgesButton(){if(!this.alwaysShowEdgesButton)return;if(!this.hasEdges){this.alwaysShowEdgesButton.style.display="none";return}if(!this.currentView)return;const A=this.views.get(this.currentView);if(!A)return;A.getAlwaysShowEdges?.()??this.sharedAlwaysShowEdges?(this.alwaysShowEdgesButton.setAttribute("aria-label","Hide edges"),this.alwaysShowEdgesButton.setAttribute("title","Hide edges"),this.alwaysShowEdgesButton.classList.add("relatos-always-show-edges-active"),this.alwaysShowEdgesButton.style.backgroundColor="#fff9c4",this.alwaysShowEdgesButton.style.color="#000000",this.alwaysShowEdgesButton.style.borderColor="#999",this.alwaysShowEdgesButton.style.boxShadow="inset 0 2px 4px rgba(0, 0, 0, 0.2)",this.alwaysShowEdgesButton.style.transform="translateY(1px)"):(this.alwaysShowEdgesButton.setAttribute("aria-label","Show edges"),this.alwaysShowEdgesButton.setAttribute("title","Show edges"),this.alwaysShowEdgesButton.classList.remove("relatos-always-show-edges-active"),this.alwaysShowEdgesButton.style.backgroundColor="#fff",this.alwaysShowEdgesButton.style.color="#333",this.alwaysShowEdgesButton.style.borderColor="#ccc",this.alwaysShowEdgesButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.alwaysShowEdgesButton.style.transform="translateY(0)")}updateLightingButton(){if(!this.lightingToggleButton)return;this.sharedLightingEnabled?(this.lightingToggleButton.style.backgroundColor="#fff9c4",this.lightingToggleButton.style.boxShadow="inset 0 2px 4px rgba(0, 0, 0, 0.2)",this.lightingToggleButton.style.transform="translateY(1px)"):(this.lightingToggleButton.style.backgroundColor="#fff",this.lightingToggleButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.lightingToggleButton.style.transform="translateY(0)")}updateTileTypeButton(){if(!this.tileTypeButton)return;let A=0;for(const t of this.views.values())if(t.getTileServerCount){const e=t.getTileServerCount();e>A&&(A=e)}if(A>=2){this.tileTypeButton.style.display="flex";const t=this.sharedTileServerIndex%A;this.tileTypeButton.setAttribute("title",`Tile server ${t+1}/${A} (click to switch)`);return}this.tileTypeButton.style.display="none",this.tileTypeButton.removeAttribute("title")}updateCancelEditButton(){if(!this.cancelEditButton)return;if(!this.currentView||this.currentView!=="graph"){this.cancelEditButton.style.display="none";return}const A=this.views.get(this.currentView);if(!A){this.cancelEditButton.style.display="none";return}const e=A.getMode?.()==="edit";this.cancelEditButton.style.display=e?"flex":"none"}updateDeleteBendButton(){if(!this.deleteBendButton)return;if(!this.currentView||this.currentView!=="graph"){this.deleteBendButton.style.display="none";return}const A=this.views.get(this.currentView);if(!A){this.deleteBendButton.style.display="none";return}const t=A,e=t.getSelectedEdgeId?.();if(e&&t.hasBendPoints){const s=t.hasBendPoints(e);this.deleteBendButton.style.display=s?"flex":"none"}else this.deleteBendButton.style.display="none"}updateUndoRedoButtons(){if(!this.undoButton||!this.redoButton)return;if(!this.currentView||this.currentView!=="graph"){this.undoButton.style.display="none",this.redoButton.style.display="none";return}const A=this.views.get(this.currentView);if(!A){this.undoButton.style.display="none",this.redoButton.style.display="none";return}const t=A;if(!(t.getMode?.()==="edit")){this.undoButton.style.display="none",this.redoButton.style.display="none";return}this.undoButton.style.display="flex",this.redoButton.style.display="flex",this.undoButton.disabled=!t.canUndo?.(),this.redoButton.disabled=!t.canRedo?.()}updateGraphButtons(){this.updateCancelEditButton(),this.updateUndoRedoButtons(),this.updateDeleteBendButton()}destroy(){for(const A of this.views.values())A.destroy();this.views.clear(),this.tabButtons.clear(),this.container.contains(this.tabContainer)&&this.container.removeChild(this.tabContainer),this.container.contains(this.viewContainer)&&this.container.removeChild(this.viewContainer)}}function ot(i,A=16){return XA(),`<svg width="${A}" height="${A}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <use href="#${i}"></use>
  </svg>`}const ve=class ve{constructor(A,t,e,s=!1,n,o){this.nodes=[],this.edges=[],this.groups=[],this.mode="view",this.editable=!1,this.nodeElements=new Map,this.edgeElements=new Map,this.selectedEdgeId=null,this.selectedNodeId=null,this.zoomedNodeId=null,this.anchorHandles=new Map,this.draggingAnchor=null,this.bendHandles=new Map,this.draggingBend=null,this.draggingNode=null,this.draggingGroup=null,this.panning=null,this.lastPanEndTime=0,this.resizingNode=null,this.resizingGroup=null,this.saveDebounceTimer=null,this.SAVE_DEBOUNCE_MS=500,this.resizeRenderTimer=null,this.editToggleButton=null,this.alwaysShowEdgesButton=null,this.alwaysShowEdges=!1,this.hoveredEdgePairKey=null,this.tappedEdgePairKey=null,this.snapshotBeforeEdit=null,this.edgeClickTimers=new WeakMap,this.undoStack=[],this.redoStack=[],this.offsetX=0,this.offsetY=0,this.zoom=1,this.pinchDistance=null,this.pinchCenter=null,this.initialZoom=1,this.popupElement=null,this.popupNodeId=null,this.DEFAULT_NODE_WIDTH=120,this.DEFAULT_NODE_HEIGHT=60,this.AUTO_LAYOUT_REFERENCE_WIDTH=1e3,this.AUTO_LAYOUT_REFERENCE_HEIGHT=600,this.EDGE_DEFAULT_COLOR="#999",this.EDGE_HOVER_COLOR="#333",this.EDGE_DEFAULT_WIDTH=1.5,this.EDGE_HOVER_WIDTH=3,this.EDGE_MIN_WEIGHT=1,this.EDGE_MAX_WEIGHT=10,this.NODE_PADDING=10,this.HANDLE_RADIUS=8,this.BEND_HANDLE_RADIUS=7,this.HIT_PATH_WIDTH=32,this.controlButtonsContainer=null,this.deleteBendButton=null,this.fitCenterButton=null,this.cancelEditButton=null,this.container=A,this.onNodeClick=t?a=>{this.popupNodeId===a.node.id&&this.popupElement&&this.popupElement.style.opacity==="1"?this.hidePopup():this.showPopup(a.node),t(a)}:void 0,this.onSave=e,this.editable=s,this.onEdgeClick=n,this.onGroupClick=o,this.container.style.position="relative",this.container.style.width="100%",this.container.style.height="100%",this.container.style.overflow="visible",this.createAlwaysShowEdgesButton(),this.alwaysShowEdgesButton&&(this.alwaysShowEdgesButton.style.display="none",this.alwaysShowEdgesButton.parentNode&&this.alwaysShowEdgesButton.parentNode.removeChild(this.alwaysShowEdgesButton)),this.createEditToggleButton(),this.editToggleButton&&(this.editToggleButton.style.display="none",this.editToggleButton.parentNode&&this.editToggleButton.parentNode.removeChild(this.editToggleButton)),this.createControlButtons(),this.controlButtonsContainer&&(this.controlButtonsContainer.style.display="none",this.controlButtonsContainer.parentNode&&this.controlButtonsContainer.parentNode.removeChild(this.controlButtonsContainer)),this.createAttributionLabel(),this.svgWrapper=document.createElement("div"),this.svgWrapper.style.position="absolute",this.svgWrapper.style.top="0",this.svgWrapper.style.left="0",this.svgWrapper.style.width="100%",this.svgWrapper.style.height="100%",this.svgWrapper.style.transformOrigin="0 0",this.svgWrapper.style.pointerEvents="none",this.container.appendChild(this.svgWrapper),this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.width="100%",this.svg.style.height="100%",this.svg.style.display="block",this.svg.style.pointerEvents="auto",this.svgWrapper.appendChild(this.svg),this.svgDefs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this.createArrowMarkers(),this.svg.appendChild(this.svgDefs),this.groupsGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.groupsGroup.setAttribute("class","groups"),this.svg.appendChild(this.groupsGroup),this.edgesGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.edgesGroup.setAttribute("class","edges"),this.svg.appendChild(this.edgesGroup),this.nodesGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.nodesGroup.setAttribute("class","nodes"),this.svg.appendChild(this.nodesGroup),this.anchorHandlesGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.anchorHandlesGroup.setAttribute("class","anchor-handles"),this.anchorHandlesGroup.style.display="none",this.svg.appendChild(this.anchorHandlesGroup),this.bendHandlesGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.bendHandlesGroup.setAttribute("class","bend-handles"),this.bendHandlesGroup.style.display="none",this.svg.appendChild(this.bendHandlesGroup),this.edgeLabelsGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.edgeLabelsGroup.setAttribute("class","edge-labels"),this.svg.appendChild(this.edgeLabelsGroup),this.updateTransform(),this.setupEventListeners()}createAlwaysShowEdgesButton(){this.alwaysShowEdgesButton=document.createElement("button"),this.alwaysShowEdgesButton.className="relatos-always-show-edges-toggle",this.alwaysShowEdgesButton.setAttribute("aria-label","Always show all edges"),this.alwaysShowEdgesButton.setAttribute("title","Always show all edges"),this.alwaysShowEdgesButton.style.padding="6px",this.alwaysShowEdgesButton.style.border="1px solid #ccc",this.alwaysShowEdgesButton.style.borderRadius="4px",this.alwaysShowEdgesButton.style.backgroundColor="#fff",this.alwaysShowEdgesButton.style.cursor="pointer",this.alwaysShowEdgesButton.style.fontSize="16px",this.alwaysShowEdgesButton.style.lineHeight="1",this.alwaysShowEdgesButton.style.width="32px",this.alwaysShowEdgesButton.style.height="32px",this.alwaysShowEdgesButton.style.display="flex",this.alwaysShowEdgesButton.style.alignItems="center",this.alwaysShowEdgesButton.style.justifyContent="center",this.alwaysShowEdgesButton.style.transition="all 0.2s",this.alwaysShowEdgesButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.alwaysShowEdgesButton.style.pointerEvents="auto",this.alwaysShowEdgesButton.style.color="#000000",this.alwaysShowEdgesButton.innerHTML=ot("icon-relations",16),this.alwaysShowEdgesButton.addEventListener("click",()=>{this.alwaysShowEdges=!this.alwaysShowEdges,this.updateAlwaysShowEdgesButton(),this.alwaysShowEdges||(this.hoveredEdgePairKey=null,this.tappedEdgePairKey=null),this.onAlwaysShowEdgesChange&&this.onAlwaysShowEdgesChange(this.alwaysShowEdges),this.render()}),this.updateAlwaysShowEdgesButton()}updateAlwaysShowEdgesButton(){this.alwaysShowEdgesButton&&(this.alwaysShowEdges?(this.alwaysShowEdgesButton.setAttribute("aria-label","Hide edge labels"),this.alwaysShowEdgesButton.setAttribute("title","Hide edge labels"),this.alwaysShowEdgesButton.classList.add("relatos-always-show-edges-active"),this.alwaysShowEdgesButton.style.backgroundColor="#fff9c4",this.alwaysShowEdgesButton.style.color="#000000",this.alwaysShowEdgesButton.style.borderColor="#999",this.alwaysShowEdgesButton.style.boxShadow="inset 0 2px 4px rgba(0, 0, 0, 0.2)",this.alwaysShowEdgesButton.style.transform="translateY(1px)"):(this.alwaysShowEdgesButton.setAttribute("aria-label","Always show all edges"),this.alwaysShowEdgesButton.setAttribute("title","Always show all edges"),this.alwaysShowEdgesButton.classList.remove("relatos-always-show-edges-active"),this.alwaysShowEdgesButton.style.backgroundColor="#fff",this.alwaysShowEdgesButton.style.color="#333",this.alwaysShowEdgesButton.style.borderColor="#ccc",this.alwaysShowEdgesButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.alwaysShowEdgesButton.style.transform="translateY(0)"))}createEditToggleButton(){this.editToggleButton=document.createElement("button"),this.editToggleButton.className="relatos-edit-toggle",this.editToggleButton.setAttribute("aria-label","Toggle edit mode"),this.editToggleButton.setAttribute("title","Toggle edit mode"),this.editToggleButton.style.position="relative",this.editToggleButton.style.zIndex="1000",this.editToggleButton.style.padding="6px",this.editToggleButton.style.border="1px solid #ccc",this.editToggleButton.style.borderRadius="4px",this.editToggleButton.style.backgroundColor="#fff",this.editToggleButton.style.cursor="pointer",this.editToggleButton.style.fontSize="16px",this.editToggleButton.style.lineHeight="1",this.editToggleButton.style.width="28px",this.editToggleButton.style.height="28px",this.editToggleButton.style.display="flex",this.editToggleButton.style.alignItems="center",this.editToggleButton.style.justifyContent="center",this.editToggleButton.style.transition="all 0.2s",this.editToggleButton.style.boxShadow="0 1px 2px rgba(0, 0, 0, 0.1)",this.updateEditToggleButtonIcon(),this.editToggleButton.addEventListener("click",()=>{this.toggleEditMode()})}updateEditToggleButtonIcon(){this.editToggleButton&&(this.editToggleButton.innerHTML=ot("icon-edit",16),this.mode==="edit"?(this.editToggleButton.setAttribute("aria-label","Exit edit mode"),this.editToggleButton.setAttribute("title","Exit edit mode"),this.editToggleButton.classList.add("relatos-edit-toggle-active"),this.editToggleButton.style.backgroundColor="#fff9c4",this.editToggleButton.style.color="red",this.editToggleButton.style.borderColor="#999",this.editToggleButton.style.boxShadow="inset 0 2px 4px rgba(0, 0, 0, 0.2)",this.editToggleButton.style.transform="translateY(1px)"):(this.editToggleButton.setAttribute("aria-label","Enter edit mode"),this.editToggleButton.setAttribute("title","Enter edit mode"),this.editToggleButton.classList.remove("relatos-edit-toggle-active"),this.editToggleButton.style.backgroundColor="#fff",this.editToggleButton.style.color="#333",this.editToggleButton.style.borderColor="#ccc",this.editToggleButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.editToggleButton.style.transform="translateY(0)"))}toggleEditMode(){this.editable&&this.setMode(this.mode==="edit"?"view":"edit")}createControlButtons(){this.controlButtonsContainer=document.createElement("div"),this.controlButtonsContainer.style.position="absolute",this.controlButtonsContainer.style.top="8px",this.controlButtonsContainer.style.right="8px",this.controlButtonsContainer.style.display="flex",this.controlButtonsContainer.style.gap="4px",this.controlButtonsContainer.style.zIndex="1000",this.controlButtonsContainer.style.pointerEvents="none",this.deleteBendButton=this.createIconButton(ot("icon-trash",16),"Delete bend point","Delete bend point",()=>{this.selectedEdgeId&&this.deleteNearestBendPoint()}),this.deleteBendButton.style.display="none",this.fitCenterButton=this.createIconButton(ot("icon-home",16),"Fit and center","Fit and center",()=>{this.fitAndCenter()}),this.fitCenterButton.style.display="none",this.cancelEditButton=this.createIconButton(ot("icon-close",16),"Cancel edit","Cancel edit and restore previous state",()=>{this.restoreSnapshot(),this.setMode("view")}),this.cancelEditButton.style.display="none",this.controlButtonsContainer.appendChild(this.deleteBendButton),this.controlButtonsContainer.appendChild(this.fitCenterButton),this.controlButtonsContainer.appendChild(this.cancelEditButton)}createAttributionLabel(){const A=document.createElement("div");A.style.position="absolute",A.style.bottom="8px",A.style.left="8px",A.style.zIndex="1000",A.style.pointerEvents="auto",A.style.fontSize="12px",A.style.fontFamily="Arial, sans-serif",A.style.color="#333",A.style.backgroundColor="rgba(255, 255, 255, 0.8)",A.style.padding="4px 8px",A.style.borderRadius="4px",A.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.2)";const t=document.createElement("a");t.href="https://humanhistories.org/en/histoverse/",t.target="_blank",t.rel="noopener noreferrer",t.textContent="Relatos",t.style.color="#333",t.style.textDecoration="none",t.style.cursor="pointer",t.addEventListener("mouseenter",()=>{t.style.textDecoration="underline",t.style.color="#0066cc"}),t.addEventListener("mouseleave",()=>{t.style.textDecoration="none",t.style.color="#333"}),A.appendChild(t),this.container.appendChild(A)}createIconButton(A,t,e,s){const n=document.createElement("button");return n.innerHTML=A,n.setAttribute("aria-label",t),n.setAttribute("title",e),n.style.padding="6px",n.style.border="1px solid #ccc",n.style.borderRadius="4px",n.style.backgroundColor="#fff",n.style.cursor="pointer",n.style.fontSize="16px",n.style.width="32px",n.style.height="32px",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.pointerEvents="auto",n.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",n.style.transition="all 0.2s",n.addEventListener("click",o=>{o.stopPropagation(),s()}),n.addEventListener("mouseenter",()=>{n.style.backgroundColor="#f5f5f5"}),n.addEventListener("mouseleave",()=>{n.style.backgroundColor="#fff"}),n}updateControlButtons(){this.onGraphButtonsUpdate&&this.onGraphButtonsUpdate()}zoomToPoint(A,t,e){const s=this.screenToSvg(t,e);this.zoom,this.zoom=A;const n=this.container.getBoundingClientRect(),o=t-n.left,a=e-n.top,r={x:o/this.zoom-this.offsetX,y:a/this.zoom-this.offsetY},h=s.x-r.x,c=s.y-r.y;this.offsetX+=h,this.offsetY+=c}screenToSvg(A,t){const e=this.container.getBoundingClientRect(),s=A-e.left,n=t-e.top,o=s/this.zoom,a=n/this.zoom;return{x:o-this.offsetX,y:a-this.offsetY}}updateTransform(){if(this.popupNodeId&&this.popupElement){const o=this.nodes.find(a=>a.id===this.popupNodeId);o&&this.updatePopupPosition(o)}const A=isFinite(this.zoom)&&this.zoom>0?this.zoom:1,t=isFinite(this.offsetX)?this.offsetX:0,e=isFinite(this.offsetY)?this.offsetY:0,s=1/A;this.svgWrapper.style.width=`${s*100}%`,this.svgWrapper.style.height=`${s*100}%`,this.svgWrapper.style.transform=`scale(${A})`;const n=`translate(${-t}, ${-e})`;this.nodesGroup.setAttribute("transform",n),this.edgesGroup.setAttribute("transform",n),this.groupsGroup.setAttribute("transform",n),this.anchorHandlesGroup.setAttribute("transform",n),this.bendHandlesGroup.setAttribute("transform",n),this.edgeLabelsGroup&&this.edgeLabelsGroup.setAttribute("transform",n)}fitAndCenter(){if(this.nodes.length===0)return;const A=this.container.getBoundingClientRect();if(A.width<=0||A.height<=0||!isFinite(A.width)||!isFinite(A.height))return;let t=1/0,e=1/0,s=-1/0,n=-1/0;for(const w of this.nodes)if(w.position){const p=w.style||{},C=p.width||this.DEFAULT_NODE_WIDTH,y=p.height||this.DEFAULT_NODE_HEIGHT;t=Math.min(t,w.position.x-C/2),e=Math.min(e,w.position.y-y/2),s=Math.max(s,w.position.x+C/2),n=Math.max(n,w.position.y+y/2)}for(const w of this.edges){const p=this.getEdgePoints(w);for(const C of p)t=Math.min(t,C.x),e=Math.min(e,C.y),s=Math.max(s,C.x),n=Math.max(n,C.y)}if(t===1/0)return;const o=60;t-=o,e-=o,s+=o,n+=o;const a=(t+s)/2,r=(e+n)/2,h=s-t,c=n-e,u=this.container.getBoundingClientRect();if(u.width<=0||u.height<=0||!isFinite(h)||!isFinite(c)||h<=0||c<=0)return;const l=u.width/h,d=u.height/c;if(!isFinite(l)||!isFinite(d))return;const g=Math.min(l,d,1);this.zoom=g;const f=u.width/(2*this.zoom),B=u.height/(2*this.zoom);!isFinite(a)||!isFinite(r)||!isFinite(f)||!isFinite(B)||(this.offsetX=a-f,this.offsetY=r-B,this.svg.removeAttribute("viewBox"),this.updateTransform(),this.render())}animateFitAndCenter(){if(this.nodes.length===0)return;const A=this.container.getBoundingClientRect();if(A.width<=0||A.height<=0||!isFinite(A.width)||!isFinite(A.height))return;let t=1/0,e=1/0,s=-1/0,n=-1/0;for(const w of this.nodes)if(w.position){const p=w.style||{},C=p.width||this.DEFAULT_NODE_WIDTH,y=p.height||this.DEFAULT_NODE_HEIGHT;t=Math.min(t,w.position.x-C/2),e=Math.min(e,w.position.y-y/2),s=Math.max(s,w.position.x+C/2),n=Math.max(n,w.position.y+y/2)}if(t===1/0)return;const o=60;t-=o,e-=o,s+=o,n+=o;const a=(t+s)/2,r=(e+n)/2,h=s-t,c=n-e,u=this.container.getBoundingClientRect();if(u.width<=0||u.height<=0||!isFinite(h)||!isFinite(c)||h<=0||c<=0)return;const l=u.width/h,d=u.height/c;if(!isFinite(l)||!isFinite(d))return;const g=Math.min(l,d,1),f=u.width/2,B=u.height/2;this.animateZoomToPoint(g,f,B,a,r)}setupEventListeners(){this.svg.addEventListener("click",s=>{const n=s.target;n.closest("[data-node-id]")||n.getAttribute("data-edge-pair-key")||n.getAttribute("data-hit-edge-pair-key")||Date.now()-(this.lastPanEndTime||0)<100||this.mode==="view"&&this.hidePopup()}),this.svg.addEventListener("pointerdown",s=>{const n=s.target,o=n.closest("[data-node-id]")?.getAttribute("data-node-id"),a=n.getAttribute("data-edge-pair-key")||n.getAttribute("data-hit-edge-pair-key"),r=n.getAttribute("data-handle-type"),h=n.getAttribute("data-bend-index");if(this.mode==="edit"){const c=n.getAttribute("data-resize-side");if(c){const u=n.getAttribute("data-node-id");if(u){const l=this.nodes.find(d=>d.id===u);if(l?.position){this.pushUndoState();const d=l.style||{},g=d.width||this.DEFAULT_NODE_WIDTH,f=d.height||this.DEFAULT_NODE_HEIGHT,B=this.screenToSvg(s.clientX,s.clientY);this.resizingNode={nodeId:u,side:c,startX:B.x,startY:B.y,startWidth:g,startHeight:f,startNodeX:l.position.x,startNodeY:l.position.y},s.target.setPointerCapture(s.pointerId),s.preventDefault(),s.stopPropagation();return}}}if(o){const u=this.nodes.find(l=>l.id===o);if(u?.position){this.pushUndoState();const l=this.screenToSvg(s.clientX,s.clientY);this.draggingNode={nodeId:o,offsetX:l.x-u.position.x,offsetY:l.y-u.position.y},s.target.setPointerCapture(s.pointerId),s.preventDefault(),s.stopPropagation();return}}else if(h!==null){const u=n.getAttribute("data-edge-id");if(u){const l=this.screenToSvg(s.clientX,s.clientY),d=this.edges.find(g=>g.id===u);if(d){const[g,f]=d.src<d.dst?[d.src,d.dst]:[d.dst,d.src],B=`${g}||${f}`,w=this.groupEdgesByPair(this.edges).find(p=>p.key===B);if(w&&w.bends){const p=parseInt(h,10);if(p>=0&&p<w.bends.length){this.pushUndoState();const C=w.bends[p];this.draggingBend={edgeId:u,bendIndex:p,offsetX:l.x-C.x,offsetY:l.y-C.y},s.preventDefault(),s.stopPropagation();return}}}}}else if(r){const u=n.getAttribute("data-edge-id");if(u){const l=this.screenToSvg(s.clientX,s.clientY),d=this.edges.find(g=>g.id===u);if(d){const[g,f]=d.src<d.dst?[d.src,d.dst]:[d.dst,d.src],B=`${g}||${f}`,w=this.groupEdgesByPair(this.edges).find(p=>p.key===B);if(w){const p=r==="src"?w.a:w.b,C=this.nodes.find(y=>y.id===p);if(C){const y=r==="src"?w.b:w.a,U=this.nodes.find(Q=>Q.id===y);if(U){this.pushUndoState();const Q=r==="src"?w.srcAnchor||this.estimateAnchor(C,U):w.dstAnchor||this.estimateAnchor(C,U),E=C.style||{},F=E.width||this.DEFAULT_NODE_WIDTH,m=E.height||this.DEFAULT_NODE_HEIGHT,v=this.calculateAnchorPosition(C,Q,F,m);this.draggingAnchor={edgeId:u,type:r,offsetX:l.x-v.x,offsetY:l.y-v.y},s.preventDefault(),s.stopPropagation();return}}}}}}else a||this.deselectEdge()}else if(o){const c=this.nodes.find(u=>u.id===o);if(c&&this.onNodeClick){const u=this.screenToSvg(s.clientX,s.clientY);this.onNodeClick({node:c,position:{x:u.x,y:u.y},originalEvent:s})}}else a||(this.deselectEdge(),this.tappedEdgePairKey&&(this.tappedEdgePairKey=null,this.render()))});let A=0,t=null;this.svg.addEventListener("pointerdown",s=>{const n=s.target,o=n.getAttribute("data-edge-pair-key")||n.getAttribute("data-hit-edge-pair-key");if(this.mode==="edit"&&o){const a=Date.now();if(a-A<300&&t===n){const h=this.groupEdgesByPair(this.edges).find(c=>c.key===o);if(h&&h.edges.length>0){this.insertBendPoint(h.edges[0].id,s),s.preventDefault(),s.stopPropagation(),A=0,t=null;return}}A=a,t=n}}),this.container.addEventListener("dblclick",s=>{if(this.mode!=="edit")return;const n=s.target;if(!n||!this.container.contains(n))return;const o=n.getAttribute("data-hit-edge-pair-key")||n.getAttribute("data-edge-pair-key");if(o){const r=this.groupEdgesByPair(this.edges).find(h=>h.key===o);if(r&&r.edges.length>0){this.insertBendPoint(r.edges[0].id,s),s.preventDefault(),s.stopPropagation();return}}let a=n;for(;a&&a!==this.svg;){const r=a.getAttribute("data-hit-edge-pair-key")||a.getAttribute("data-edge-pair-key");if(r){const h=this.groupEdgesByPair(this.edges).find(c=>c.key===r);if(h&&h.edges.length>0){this.insertBendPoint(h.edges[0].id,s),s.preventDefault(),s.stopPropagation();return}}a=a.parentElement}},!0);const e=new Map;this.svg.addEventListener("pointerdown",s=>{if(s.pointerType==="touch"&&(e.set(s.pointerId,s),e.size===2)){const n=Array.from(e.values()),[o,a]=n;this.pinchDistance=Math.hypot(a.clientX-o.clientX,a.clientY-o.clientY),this.pinchCenter={x:(o.clientX+a.clientX)/2,y:(o.clientY+a.clientY)/2},this.initialZoom=this.zoom,s.preventDefault()}}),this.svg.addEventListener("pointermove",s=>{if(s.pointerType==="touch"&&e.set(s.pointerId,s),this.pinchDistance!==null&&this.pinchCenter!==null&&e.size===2){const h=Array.from(e.values()),[c,u]=h,d=Math.hypot(u.clientX-c.clientX,u.clientY-c.clientY)/this.pinchDistance,g=Math.pow(d,1.5),f=Math.max(.1,Math.min(5,this.initialZoom*g));this.zoomToPoint(f,this.pinchCenter.x,this.pinchCenter.y),this.updateTransform(),this.render(),s.preventDefault();return}const n=s.target,o=n instanceof HTMLButtonElement||n.closest("button")!==null||n.closest(".relatos-always-show-edges-toggle")!==null||n.closest(".relatos-edit-toggle")!==null||n.closest(".relatos-control-buttons")!==null,a=s.pointerType==="touch"&&e.size===1,r=s.pointerType==="mouse"&&s.buttons===1;if(!o&&!this.resizingNode&&!this.resizingGroup&&!this.draggingNode&&!this.draggingGroup&&!this.draggingAnchor&&!this.draggingBend&&(a||r)){if(!this.panning)this.panning={startX:s.clientX,startY:s.clientY,startOffsetX:this.offsetX,startOffsetY:this.offsetY};else{const h=s.clientX-this.panning.startX,c=s.clientY-this.panning.startY,u=h/this.zoom,l=c/this.zoom;this.offsetX=this.panning.startOffsetX+u,this.offsetY=this.panning.startOffsetY+l,this.updateTransform(),this.render()}s.preventDefault();return}this.resizingNode?this.updateNodeSize(s):this.resizingGroup?this.updateGroupSize(s):this.draggingNode?this.updateNodePosition(s):this.draggingGroup?this.updateGroupPosition(s):this.draggingAnchor?this.updateAnchorPosition(s):this.draggingBend&&this.updateBendPosition(s)}),document.addEventListener("pointermove",s=>{s.pointerType==="touch"&&e.set(s.pointerId,s);const n=s.target;if(!(n instanceof HTMLButtonElement||n.closest("button")!==null||n.closest(".relatos-always-show-edges-toggle")!==null||n.closest(".relatos-edit-toggle")!==null||n.closest(".relatos-control-buttons")!==null)&&this.panning&&!this.resizingNode&&!this.resizingGroup&&!this.draggingNode&&!this.draggingGroup&&!this.draggingAnchor&&!this.draggingBend){const a=s.pointerType==="touch"&&e.size===1,r=s.pointerType==="mouse"&&(s.buttons===1||s.button===0);if(a||r){const h=s.clientX-this.panning.startX,c=s.clientY-this.panning.startY,u=h/this.zoom,l=c/this.zoom;this.offsetX=this.panning.startOffsetX-u,this.offsetY=this.panning.startOffsetY-l,this.updateTransform(),this.render(),s.preventDefault();return}}this.resizingNode?this.updateNodeSize(s):this.resizingGroup?this.updateGroupSize(s):this.draggingNode?this.updateNodePosition(s):this.draggingGroup?this.updateGroupPosition(s):this.draggingAnchor?this.updateAnchorPosition(s):this.draggingBend&&this.updateBendPosition(s)}),this.svg.addEventListener("pointerup",s=>{s.pointerType==="touch"&&(e.delete(s.pointerId),e.size<2&&(this.pinchDistance=null,this.pinchCenter=null)),s.target instanceof SVGElement&&s.target.releasePointerCapture(s.pointerId),this.resizingNode&&this.handleResizeEnd(),this.panning&&(this.lastPanEndTime=Date.now()),this.panning=null,this.resizingNode?this.handleResizeEnd():this.resizingGroup&&this.handleGroupResizeEnd(),this.resizingNode=null,this.resizingGroup=null,this.draggingNode=null,this.draggingGroup=null,this.draggingAnchor=null,this.draggingBend=null}),document.addEventListener("pointerup",s=>{s.pointerType==="touch"&&(e.delete(s.pointerId),e.size<2&&(this.pinchDistance=null,this.pinchCenter=null)),this.resizingNode&&this.handleResizeEnd(),this.panning&&(this.lastPanEndTime=Date.now()),this.panning=null,this.resizingNode?this.handleResizeEnd():this.resizingGroup&&this.handleGroupResizeEnd(),this.resizingNode=null,this.resizingGroup=null,this.draggingNode=null,this.draggingGroup=null,this.draggingAnchor=null,this.draggingBend=null}),this.svg.addEventListener("pointercancel",s=>{s.pointerType==="touch"&&(e.delete(s.pointerId),e.size<2&&(this.pinchDistance=null,this.pinchCenter=null)),s.target instanceof SVGElement&&s.target.releasePointerCapture(s.pointerId),this.resizingNode&&this.handleResizeEnd(),this.panning&&(this.lastPanEndTime=Date.now()),this.panning=null,this.resizingNode?this.handleResizeEnd():this.resizingGroup&&this.handleGroupResizeEnd(),this.resizingNode=null,this.resizingGroup=null,this.draggingNode=null,this.draggingGroup=null,this.draggingAnchor=null,this.draggingBend=null}),this.container.addEventListener("keydown",s=>{if(this.mode==="edit"){if((s.ctrlKey||s.metaKey)&&s.key==="z"&&!s.shiftKey){this.canUndo()&&(this.undo(),s.preventDefault());return}if((s.ctrlKey||s.metaKey)&&(s.key==="y"||s.key==="z"&&s.shiftKey)){this.canRedo()&&(this.redo(),s.preventDefault());return}this.selectedEdgeId&&(s.key==="Delete"||s.key==="Backspace")&&(this.deleteNearestBendPoint(),s.preventDefault())}}),this.container.setAttribute("tabindex","0"),this.container.addEventListener("wheel",s=>{if(s.ctrlKey||s.metaKey){s.preventDefault();const n=Math.pow(1.5,-s.deltaY/60),o=Math.max(.1,Math.min(5,this.zoom*n));this.zoomToPoint(o,s.clientX,s.clientY),this.updateTransform(),this.render()}else{s.preventDefault();const n=Math.pow(1.5,s.deltaY/60),o=Math.max(.1,Math.min(5,this.zoom*n));this.zoomToPoint(o,s.clientX,s.clientY),this.updateTransform(),this.render()}},{passive:!1})}createArrowMarkers(){const A=document.createElementNS("http://www.w3.org/2000/svg","marker");A.setAttribute("id","arrow-end"),A.setAttribute("viewBox","0 0 10 10"),A.setAttribute("refX","9"),A.setAttribute("refY","5"),A.setAttribute("markerWidth","6"),A.setAttribute("markerHeight","6"),A.setAttribute("orient","auto");const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d","M 0 0 L 10 5 L 0 10 z"),t.setAttribute("fill","#333"),A.appendChild(t),this.svgDefs.appendChild(A);const e=document.createElementNS("http://www.w3.org/2000/svg","marker");e.setAttribute("id","arrow-start"),e.setAttribute("viewBox","0 0 10 10"),e.setAttribute("refX","1"),e.setAttribute("refY","5"),e.setAttribute("markerWidth","6"),e.setAttribute("markerHeight","6"),e.setAttribute("orient","auto");const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d","M 10 0 L 0 5 L 10 10 z"),s.setAttribute("fill","#333"),e.appendChild(s),this.svgDefs.appendChild(e)}setData(A,t,e){this.nodes=A,this.edges=t,this.groups=e||[],this.ensureNodePositions(),this.render(),this.container.style.display!=="none"&&this.container.offsetParent!==null&&setTimeout(()=>{const s=this.container.getBoundingClientRect();s.width>0&&s.height>0&&this.fitAndCenter()},100)}selectNode(A,t=!0){if(A&&t&&this.zoomedNodeId===A){this.zoomedNodeId=null,this.selectedNodeId=A,this.render(),this.animateFitAndCenter();return}if(this.selectedNodeId=A,A?this.zoomedNodeId=A:this.zoomedNodeId=null,this.render(),A&&t){this.zoomToNode(A);const e=this.nodes.find(s=>s.id===A);e&&this.showPopup(e)}else A||(this.zoomedNodeId=null,this.hidePopup())}zoomToNode(A){const t=this.nodes.find(p=>p.id===A);if(!t||!t.position)return;const e=this.container.getBoundingClientRect();if(e.width<=0||e.height<=0)return;const s=t.style||{},n=s.width||this.DEFAULT_NODE_WIDTH,o=s.height||this.DEFAULT_NODE_HEIGHT,a=t.position.x+n/2,r=t.position.y+o/2;n*this.zoom,o*this.zoom;const h=Math.min(e.width*.3,e.height*.3),c=h/n,u=h/o,l=Math.min(c,u),f=Math.max(.5,Math.min(3,l)),B=e.width/2,w=e.height/2;this.animateZoomToPoint(f,B,w,a,r)}animateZoomToPoint(A,t,e,s,n){const o=this.zoom,a=this.offsetX,r=this.offsetY,h=this.container.getBoundingClientRect(),c=h.width/(2*A),u=h.height/(2*A),l=s-c,d=n-u,g=500,f=performance.now(),B=w=>{const p=w-f,C=Math.min(p/g,1),y=1-Math.pow(1-C,3),U=o+(A-o)*y,Q=a+(l-a)*y,E=r+(d-r)*y;if(this.zoom=U,this.offsetX=Q,this.offsetY=E,this.updateTransform(),this.render(),C>=1){const F=this.container.getBoundingClientRect(),m=F.width/2,v=F.height/2;m/this.zoom-this.offsetX,v/this.zoom-this.offsetY}C<1&&requestAnimationFrame(B)};requestAnimationFrame(B)}ensureNodePositions(){const A=this.nodes.filter(p=>p.coordinates&&p.coordinates.length===2),t=this.nodes.filter(p=>!p.coordinates||p.coordinates.length!==2),e=this.nodes.filter(p=>!p.position),s=this.nodes.every(p=>p.position),n=this.groups.every(p=>p.layout);if(s&&n||e.length===0&&A.length===0&&t.length===0)return;const o=this.AUTO_LAYOUT_REFERENCE_WIDTH,a=this.AUTO_LAYOUT_REFERENCE_HEIGHT,r=2,h=o*r*.25,c=o*r*.75,u=a*r,l=h,d=a*r,g=0,f=[];for(const p of this.nodes)if(p.position){const C=p.style||{},y=C.width||this.DEFAULT_NODE_WIDTH,U=C.height||this.DEFAULT_NODE_HEIGHT;if(f.push({x:p.position.x-y/2,y:p.position.y-U/2,width:y,height:U}),p.coordinates&&p.coordinates.length===2){const[Q,E]=p.coordinates}}const B=[...A].sort((p,C)=>p.id.localeCompare(C.id));if(B.length>0){const p=B.map(T=>T.coordinates[0]),C=B.map(T=>T.coordinates[1]),y=Math.min(...p),U=Math.max(...p),Q=Math.min(...C),E=Math.max(...C),F=U-y,m=E-Q,v=Math.max(F,m)*.1||.01,H={minLat:y-v,maxLat:U+v,minLon:Q-v,maxLon:E+v},b=new Map,I=new Map;for(const T of B){const[D,S]=T.coordinates,M=(S-H.minLon)/(H.maxLon-H.minLon),N=1-(D-H.minLat)/(H.maxLat-H.minLat),O={x:l+M*c,y:N*u},P=T.style||{},V=P.width||this.DEFAULT_NODE_WIDTH,lA=P.height||this.DEFAULT_NODE_HEIGHT,$=O.x,J=O.y;b.set(T.id,{originalCenterX:$,originalCenterY:J}),I.set(T.id,{node:T,width:V,height:lA,originalCenterX:$,originalCenterY:J})}this.resolveNodePositionsWithVectorConstraints(I,b)}const w=t.filter(p=>!p.position);if(w.length>0){const C=[...w].sort((v,H)=>v.id.localeCompare(H.id)),y=Math.ceil(Math.sqrt(C.length)),U=Math.ceil(C.length/y),Q=h-40,E=d-40,F=Q/y,m=E/U;C.forEach((v,H)=>{const b=v.style||{},I=b.width||this.DEFAULT_NODE_WIDTH,T=b.height||this.DEFAULT_NODE_HEIGHT,D=Math.floor(H/y),S=H%y,M=g+20+(S+.5)*F,N=20+(D+.5)*m;v.position={x:M,y:N},f.push({x:M-I/2,y:N-T/2,width:I,height:T})})}if(this.groups.length>0){const p=y=>{if(!y.parentId)return 0;const U=this.groups.find(Q=>Q.id===y.parentId);return U?1+p(U):0},C=[...this.groups].sort((y,U)=>p(U)-p(y));for(const y of C){const U=this.calculateGroupBounds(y.nodeIds,y.id);U&&(y.layout={position:{x:U.minX,y:U.minY},size:{width:U.maxX-U.minX,height:U.maxY-U.minY}})}}}resolveNodePositionsWithVectorConstraints(A,t){const h=new Set,c=new Set;for(const w of this.groups)w.layout&&c.add(w.id);const u=new Map,l=new Map;for(const[w,p]of A){const C=p.node,y=t.get(w);C.position?(u.set(w,{centerX:C.position.x,centerY:C.position.y}),h.add(w)):u.set(w,{centerX:y.originalCenterX,centerY:y.originalCenterY});const U=u.get(w);l.set(w,{x:U.centerX-p.width/2,y:U.centerY-p.height/2,width:p.width,height:p.height})}const d=w=>{const p=[];for(const C of this.groups){const y=new Set,U=Q=>{for(const F of Q.nodeIds)y.add(F);const E=this.groups.filter(F=>F.parentId===Q.id);for(const F of E)U(F)};U(C),y.has(w)&&p.push(C)}return p},g=w=>{if(c.has(w.id)&&w.layout)return{minX:w.layout.position.x,maxX:w.layout.position.x+w.layout.size.width,minY:w.layout.position.y,maxY:w.layout.position.y+w.layout.size.height};const p=this.groups.some(H=>H.parentId===w.id),C=new Set;if(p){const H=this.groups.filter(b=>b.parentId===w.id);for(const b of H){const I=T=>{for(const S of T.nodeIds)C.add(S);const D=this.groups.filter(S=>S.parentId===T.id);for(const S of D)I(S)};I(b)}}let y=1/0,U=-1/0,Q=1/0,E=-1/0,F=!1;for(const H of w.nodeIds){if(p&&C.has(H))continue;const b=l.get(H);b&&(F=!0,y=Math.min(y,b.x),U=Math.max(U,b.x+b.width),Q=Math.min(Q,b.y),E=Math.max(E,b.y+b.height))}if(p){const H=this.groups.filter(b=>b.parentId===w.id);for(const b of H){const I=g(b);I&&(F=!0,y=Math.min(y,I.minX),U=Math.max(U,I.maxX),Q=Math.min(Q,I.minY),E=Math.max(E,I.maxY))}}if(!F)return null;const m=p?50:30,v=m+25;return{minX:y-m,maxX:U+m,minY:Q-v,maxY:E+m}},f=[...A.entries()].sort((w,p)=>w[0].localeCompare(p[0]));for(let w=0;w<100;w++){let p=!1;for(let C=0;C<f.length;C++){const[y,U]=f[C],Q=u.get(y),E=l.get(y),F=d(y);for(let m=C+1;m<f.length;m++){const[v,H]=f[m],b=u.get(v),I=l.get(v),T=d(v),D=t.get(y),S=t.get(v),M=S.originalCenterX-D.originalCenterX,N=S.originalCenterY-D.originalCenterY,O=Math.sqrt(M*M+N*N);if(O===0)continue;const P=M/O,V=N/O;let lA=!1,$=0;for(const J of F){const G=g(J);if(G)for(const rA of T){let oA=!1;if(J.id===rA.id)oA=!0;else{const mA=(IA,kA)=>{if(kA.parentId===IA.id)return!0;if(!kA.parentId)return!1;const UA=this.groups.find(HA=>HA.id===kA.parentId);return UA?mA(IA,UA):!1};oA=mA(J,rA)||mA(rA,J)}if(oA)continue;const q=g(rA);if(!q)continue;const it=G.minX<q.maxX+60&&G.maxX+60>q.minX,nt=G.minY<q.maxY+60&&G.maxY+60>q.minY;if(it&&nt){lA=!0;const mA=(G.minX+G.maxX)/2,IA=(G.minY+G.maxY)/2,kA=(q.minX+q.maxX)/2,UA=(q.minY+q.maxY)/2,HA=kA-mA,be=UA-IA,xs=Math.sqrt(HA*HA+be*be),Ls=G.maxX-G.minX,Ie=G.maxY-G.minY,He=q.maxX-q.minX,zh=q.maxY-q.minY,Zh=Math.abs(Ls*P)+Math.abs(Ie*V),jh=Math.abs(He*P)+Math.abs(zh*V),zn=(Zh+jh)/2+60;xs<zn&&($=Math.max($,zn))}}}if(lA&&$>0){p=!0;const J=b.centerX-Q.centerX,G=b.centerY-Q.centerY;if(Math.sqrt(J*J+G*G)<$){const oA=h.has(y),q=h.has(v);if(oA&&q)continue;const it=$/O,nt=M*it,mA=N*it,IA=D.originalCenterX+nt,kA=D.originalCenterY+mA,UA=(IA-b.centerX)/2,HA=(kA-b.centerY)/2;oA||(Q.centerX-=UA,Q.centerY-=HA,E.x=Q.centerX-U.width/2,E.y=Q.centerY-U.height/2),q||(b.centerX+=UA,b.centerY+=HA,I.x=b.centerX-H.width/2,I.y=b.centerY-H.height/2)}}if(!lA){const J=h.has(y),G=h.has(v);if(J&&G)continue;const rA=E.x<I.x+I.width+20&&E.x+E.width+20>I.x,oA=E.y<I.y+I.height+20&&E.y+E.height+20>I.y;if(rA&&oA){p=!0;const q=Math.abs(U.width*P)+Math.abs(U.height*V),it=Math.abs(H.width*P)+Math.abs(H.height*V),nt=(q+it)/2+20,mA=b.centerX-Q.centerX,IA=b.centerY-Q.centerY;if(Math.sqrt(mA*mA+IA*IA)<nt){const UA=nt/O,HA=M*UA,be=N*UA,xs=D.originalCenterX+HA,Ls=D.originalCenterY+be,Ie=(xs-b.centerX)/2,He=(Ls-b.centerY)/2;J||(Q.centerX-=Ie,Q.centerY-=He,E.x=Q.centerX-U.width/2,E.y=Q.centerY-U.height/2),G||(b.centerX+=Ie,b.centerY+=He,I.x=b.centerX-H.width/2,I.y=b.centerY-H.height/2)}}}}}if(!p)break}const B=[...A.entries()].sort((w,p)=>w[0].localeCompare(p[0]));for(const[w,p]of B){if(h.has(w))continue;const C=u.get(w);p.node.position={x:C.centerX,y:C.centerY}}for(const w of this.groups){const p=g(w);p&&(w.layout={position:{x:p.minX,y:p.minY},size:{width:p.maxX-p.minX,height:p.maxY-p.minY}})}}resolveGroupPositionsWithOrderConstraints(A){const s=[],n=r=>{const h=new Set,c=g=>{for(const B of g.nodeIds)h.add(B);const f=this.groups.filter(B=>B.parentId===g.id);for(const B of f)c(B)};if(c(r),h.size===0)return null;let u=0,l=0,d=0;for(const g of h){const f=A.get(g);f&&(u+=f.originalCenterX,l+=f.originalCenterY,d++)}return d===0?null:{x:u/d,y:l/d}},o=r=>{if(!r.parentId)return 0;const h=this.groups.find(c=>c.id===r.parentId);return h?1+o(h):0};for(const r of this.groups){const h=this.getGroupLayout(r);if(!h)continue;const c=n(r);c&&s.push({group:r,layout:h,originalCenter:c,level:o(r)})}const a=new Map;for(const r of s){a.has(r.level)||a.set(r.level,new Map);const h=a.get(r.level),c=r.group.parentId||null;h.has(c)||h.set(c,[]),h.get(c).push(r)}for(const[r,h]of a)for(const[c,u]of h)if(!(u.length<2)){u.sort((l,d)=>{const g=l.originalCenter.y-d.originalCenter.y;return Math.abs(g)>10?g:l.originalCenter.x-d.originalCenter.x});for(let l=0;l<50;l++){let d=!1;for(let g=1;g<u.length;g++){const f=u[g],B=f.layout.position.x,w=B+f.layout.size.width;for(let p=0;p<g;p++){const C=u[p],y=C.layout.position.x,U=y+C.layout.size.width;if(B<U+60&&w+60>y){const Q=f.layout.position.y,E=Q+f.layout.size.height,F=C.layout.position.y,m=F+C.layout.size.height;if(Q<m+60&&E+60>F){d=!0;const v=U+60-B;f.layout.position.x+=v;const H=this.calculateGroupBounds(f.group.nodeIds,f.group.id);H&&(f.layout.size={width:H.maxX-H.minX,height:H.maxY-H.minY})}}}}for(let g=1;g<u.length;g++){const f=u[g],B=f.layout.position.y,w=B+f.layout.size.height;for(let p=0;p<g;p++){const C=u[p],y=C.layout.position.y,U=y+C.layout.size.height;if(B<U+60&&w+60>y){const Q=f.layout.position.x,E=Q+f.layout.size.width,F=C.layout.position.x,m=F+C.layout.size.width;if(Q<m+60&&E+60>F){d=!0;const v=U+60-B;f.layout.position.y+=v;const H=this.calculateGroupBounds(f.group.nodeIds,f.group.id);H&&(f.layout.size={width:H.maxX-H.minX,height:H.maxY-H.minY})}}}}if(!d)break}for(const l of u)l.group.layout=l.layout}}compactLayout(A){const s=r=>{const h=new Set,c=g=>{for(const B of g.nodeIds)h.add(B);const f=this.groups.filter(B=>B.parentId===g.id);for(const B of f)c(B)};if(c(r),h.size===0)return null;let u=0,l=0,d=0;for(const g of h){const f=A.get(g);f&&(u+=f.originalCenterX,l+=f.originalCenterY,d++)}return d>0?{x:u/d,y:l/d}:null},n=r=>{if(!r.parentId)return 0;const h=this.groups.find(c=>c.id===r.parentId);return h?1+n(h):0},o=Array.from(this.nodes).filter(r=>r.position);o.sort((r,h)=>{const c=A.get(r.id),u=A.get(h.id);if(!c||!u)return 0;const l=c.originalCenterY-u.originalCenterY;return Math.abs(l)>10?l:c.originalCenterX-u.originalCenterX});for(let r=1;r<o.length;r++){const h=o[r];if(!h.position)continue;const u=(h.style||{}).width||this.DEFAULT_NODE_WIDTH,l=h.position.x-u/2;let d=-1/0;for(let g=0;g<r;g++){const f=o[g];if(!f.position)continue;const w=(f.style||{}).width||this.DEFAULT_NODE_WIDTH,p=f.position.x+w/2;d=Math.max(d,p)}if(d>-1/0){const g=d+20;if(l>g){const f=g-l;h.position.x+=f}}}for(let r=1;r<o.length;r++){const h=o[r];if(!h.position)continue;const u=(h.style||{}).height||this.DEFAULT_NODE_HEIGHT,l=h.position.y-u/2;let d=-1/0;for(let g=0;g<r;g++){const f=o[g];if(!f.position)continue;const w=(f.style||{}).height||this.DEFAULT_NODE_HEIGHT,p=f.position.y+w/2;d=Math.max(d,p)}if(d>-1/0){const g=d+20;if(l>g){const f=g-l;h.position.y+=f}}}const a=new Map;for(const r of this.groups){const h=n(r);a.has(h)||a.set(h,new Map);const c=a.get(h),u=r.parentId||null;c.has(u)||c.set(u,[]),c.get(u).push(r)}for(const[r,h]of a)for(const[c,u]of h)if(!(u.length<2)){u.sort((l,d)=>{const g=s(l),f=s(d);if(!g||!f)return 0;const B=g.y-f.y;return Math.abs(B)>10?B:g.x-f.x});for(let l=1;l<u.length;l++){const d=u[l],g=this.getGroupLayout(d);if(!g)continue;const f=g.position.x;let B=-1/0;for(let w=0;w<l;w++){const p=u[w],C=this.getGroupLayout(p);if(!C)continue;const y=C.position.x+C.size.width;B=Math.max(B,y)}if(B>-1/0){const w=B+60;if(f>w){const p=w-f;g.position.x+=p,d.layout=g}}}for(let l=1;l<u.length;l++){const d=u[l],g=this.getGroupLayout(d);if(!g)continue;const f=g.position.y;let B=-1/0;for(let w=0;w<l;w++){const p=u[w],C=this.getGroupLayout(p);if(!C)continue;const y=C.position.y+C.size.height;B=Math.max(B,y)}if(B>-1/0){const w=B+60;if(f>w){const p=w-f;g.position.y+=p,d.layout=g}}}}}adjustNodePosition(A,t,e,s,n=20){let a=A.x,r=A.y;const h=A.width,c=A.height,u=e?.originalX??A.x,l=e?.originalY??A.y,d=t.map((g,f)=>{const B=g.width||this.DEFAULT_NODE_WIDTH,w=g.height||this.DEFAULT_NODE_HEIGHT,p=g.x+B/2,C=g.y+w/2,y=p-u,U=C-l;return{x:g.x,y:g.y,width:B,height:w,centerX:p,centerY:C,relativeDx:y,relativeDy:U,originalCenterX:p,originalCenterY:C}});for(let g=0;g<n;g++){let f=!1,B=a,w=r,p=1/0;for(const C of d)if(a<C.x+C.width+20&&a+h+20>C.x&&r<C.y+C.height+20&&r+c+20>C.y){f=!0;const y=a+h/2,U=r+c/2,Q=C.centerX-y,E=C.centerY-U,F=Math.sqrt(Q*Q+E*E);if(F>0){const m=(h+C.width)/2+20;let v=Q,H=E;if(Math.abs(C.relativeDx)>.1||Math.abs(C.relativeDy)>.1)if(Math.abs(C.relativeDx)>Math.abs(C.relativeDy))v=(C.relativeDx>0?-1:1)*Math.abs(Q)/F*m,H=E/F*m*.5;else{const V=C.relativeDy>0?-1:1;v=Q/F*m*.5,H=V*Math.abs(E)/F*m}else v=Q/F*m,H=E/F*m;const b=a+v,I=r+H,T=Math.sqrt(Math.pow(b-u,2)+Math.pow(I-l,2)),D=b+h/2,S=I+c/2,M=D-u,N=S-l;let O=0;(C.relativeDx>0&&M<C.relativeDx||C.relativeDx<0&&M>C.relativeDx)&&(O+=1e3),(C.relativeDy>0&&N<C.relativeDy||C.relativeDy<0&&N>C.relativeDy)&&(O+=1e3);const P=T+O;P<p&&(p=P,B=b,w=I)}else{const m=(h+C.width)/2+20;let v=0,H=0;if(C.relativeDx!==0||C.relativeDy!==0){const D=C.relativeDx>0?-1:1,S=C.relativeDy>0?-1:1;v=D*m,H=S*m}else{const D=Math.random()*Math.PI*2;v=Math.cos(D)*m,H=Math.sin(D)*m}const b=a+v,I=r+H,T=Math.sqrt(Math.pow(b-u,2)+Math.pow(I-l,2));T<p&&(p=T,B=b,w=I)}}if(!f)break;a=B,r=w}return{x:a,y:r}}groupEdgesByPair(A){const t=new Map;for(const e of A){const[s,n]=e.src<e.dst?[e.src,e.dst]:[e.dst,e.src],o=`${s}||${n}`;let a=t.get(o);a||(a={key:o,a:s,b:n,edges:[]},t.set(o,a)),a.edges.push(e),e.src===s&&e.dst===n?(e.srcAnchor&&!a.srcAnchor&&(a.srcAnchor=e.srcAnchor),e.dstAnchor&&!a.dstAnchor&&(a.dstAnchor=e.dstAnchor),e.bends&&!a.bends&&(a.bends=e.bends)):(e.srcAnchor&&!a.dstAnchor&&(a.dstAnchor=e.srcAnchor),e.dstAnchor&&!a.srcAnchor&&(a.srcAnchor=e.dstAnchor),e.bends&&!a.bends&&(a.bends=e.bends))}return Array.from(t.values())}getEdgePairDirection(A){let t=!1,e=!1;for(const s of A.edges)s.src===A.a&&s.dst===A.b?t=!0:s.src===A.b&&s.dst===A.a&&(e=!0);return{hasAtoB:t,hasBtoA:e}}calculateEdgePairPath(A){const t=this.nodes.find(B=>B.id===A.a),e=this.nodes.find(B=>B.id===A.b);if(!t?.position||!e?.position)return"";const s=A.srcAnchor||this.estimateAnchor(t,e),n=A.dstAnchor||this.estimateAnchor(e,t),o=t.style||{},a=e.style||{},r=o.width||this.DEFAULT_NODE_WIDTH,h=o.height||this.DEFAULT_NODE_HEIGHT,c=a.width||this.DEFAULT_NODE_WIDTH,u=a.height||this.DEFAULT_NODE_HEIGHT,l=this.calculateAnchorPosition(t,s,r,h),d=this.calculateAnchorPosition(e,n,c,u),g=[l];A.bends&&g.push(...A.bends),g.push(d);const f=[`M ${g[0].x} ${g[0].y}`];for(let B=1;B<g.length;B++)f.push(`L ${g[B].x} ${g[B].y}`);return f.join(" ")}calculateAnchorPosition(A,t,e,s){if(!A.position)return{x:0,y:0};const n=A.position.x,o=A.position.y,a=e||A.style?.width||this.DEFAULT_NODE_WIDTH,r=s||A.style?.height||this.DEFAULT_NODE_HEIGHT;let h=0,c=0;switch(t.side){case"top":h=n-a/2+a*t.t,c=o-r/2;break;case"right":h=n+a/2,c=o-r/2+r*t.t;break;case"bottom":h=n-a/2+a*t.t,c=o+r/2;break;case"left":h=n-a/2,c=o-r/2+r*t.t;break}return{x:h,y:c}}estimateAnchor(A,t){if(!A.position||!t.position)return{side:"right",t:.5};const e=A.style||{},s=e.width||this.DEFAULT_NODE_WIDTH,n=e.height||this.DEFAULT_NODE_HEIGHT,o=t.position.x-A.position.x,a=t.position.y-A.position.y,r=Math.atan2(a,o),h=r<0?r+2*Math.PI:r;let c,u;return h>=7*Math.PI/4||h<Math.PI/4?(c="right",u=.5+a/n*.5):h>=Math.PI/4&&h<3*Math.PI/4?(c="bottom",u=.5+o/s*.5):h>=3*Math.PI/4&&h<5*Math.PI/4?(c="left",u=.5-a/n*.5):(c="top",u=.5-o/s*.5),u=Math.max(0,Math.min(1,u)),{side:c,t:u}}getEdgePoints(A){const t=this.nodes.find(f=>f.id===A.src),e=this.nodes.find(f=>f.id===A.dst);if(!t?.position||!e?.position)return[];const s=A.srcAnchor||this.estimateAnchor(t,e),n=A.dstAnchor||this.estimateAnchor(e,t),o=t.style||{},a=e.style||{},r=o.width||this.DEFAULT_NODE_WIDTH,h=o.height||this.DEFAULT_NODE_HEIGHT,c=a.width||this.DEFAULT_NODE_WIDTH,u=a.height||this.DEFAULT_NODE_HEIGHT,l=this.calculateAnchorPosition(t,s,r,h),d=this.calculateAnchorPosition(e,n,c,u),g=[l];return A.bends&&g.push(...A.bends),g.push(d),g}calculateEdgePath(A){const t=this.getEdgePoints(A);if(t.length<2)return"";const e=[`M ${t[0].x} ${t[0].y}`];for(let s=1;s<t.length;s++)e.push(`L ${t[s].x} ${t[s].y}`);return e.join(" ")}getEdgePairMarkerAttributes(A){const{hasAtoB:t,hasBtoA:e}=this.getEdgePairDirection(A),s={};return t&&(s.markerEnd="url(#arrow-end)"),e&&(s.markerStart="url(#arrow-start)"),s}deselectEdge(){this.selectedEdgeId=null,this.anchorHandlesGroup.style.display="none",this.bendHandlesGroup.style.display="none",this.anchorHandles.clear(),this.bendHandles.clear(),this.updateControlButtons()}selectEdge(A,t){this.selectedEdgeId===A&&t?this.rotateAnchorSide(A):(this.selectedEdgeId=A,this.updateAnchorHandles(),this.updateBendHandles())}rotateAnchorSide(A){const t=this.edges.find(h=>h.id===A);if(!t)return;this.pushUndoState();const[e,s]=t.src<t.dst?[t.src,t.dst]:[t.dst,t.src],n=`${e}||${s}`,o=this.groupEdgesByPair(this.edges).find(h=>h.key===n);if(!o)return;const a=["top","right","bottom","left"],r=h=>{const c=a.indexOf(h);return a[(c+1)%4]};o.srcAnchor&&(o.srcAnchor.side=r(o.srcAnchor.side)),o.dstAnchor&&(o.dstAnchor.side=r(o.dstAnchor.side));for(const h of o.edges)h.src===o.a&&h.dst===o.b?(h.srcAnchor=o.srcAnchor,h.dstAnchor=o.dstAnchor):(h.srcAnchor=o.dstAnchor,h.dstAnchor=o.srcAnchor);this.render(),this.updateAnchorHandles(),this.updateBendHandles()}updateAnchorHandles(){if(this.anchorHandles.clear(),this.anchorHandlesGroup.innerHTML="",!this.selectedEdgeId||this.mode!=="edit"){this.anchorHandlesGroup.style.display="none";return}const A=this.edges.find(p=>p.id===this.selectedEdgeId);if(!A)return;const[t,e]=A.src<A.dst?[A.src,A.dst]:[A.dst,A.src],s=`${t}||${e}`,n=this.groupEdgesByPair(this.edges).find(p=>p.key===s);if(!n)return;const o=this.nodes.find(p=>p.id===n.a),a=this.nodes.find(p=>p.id===n.b);if(!o||!a)return;const r=n.srcAnchor||this.estimateAnchor(o,a),h=n.dstAnchor||this.estimateAnchor(a,o),c=o.style||{},u=a.style||{},l=c.width||this.DEFAULT_NODE_WIDTH,d=c.height||this.DEFAULT_NODE_HEIGHT,g=u.width||this.DEFAULT_NODE_WIDTH,f=u.height||this.DEFAULT_NODE_HEIGHT,B=this.calculateAnchorPosition(o,r,l,d),w=this.calculateAnchorPosition(a,h,g,f);this.createAnchorHandle(A.id,"src",B.x,B.y),this.createAnchorHandle(A.id,"dst",w.x,w.y),this.anchorHandlesGroup.style.display="block",this.anchorHandlesGroup.style.pointerEvents="auto"}updateBendHandles(){if(this.bendHandles.clear(),this.bendHandlesGroup.innerHTML="",!this.selectedEdgeId||this.mode!=="edit"){this.bendHandlesGroup.style.display="none",this.updateControlButtons();return}const A=this.edges.find(o=>o.id===this.selectedEdgeId);if(!A){this.updateControlButtons();return}const[t,e]=A.src<A.dst?[A.src,A.dst]:[A.dst,A.src],s=`${t}||${e}`,n=this.groupEdgesByPair(this.edges).find(o=>o.key===s);if(!n||!n.bends||n.bends.length===0){this.bendHandlesGroup.style.display="none",this.updateControlButtons();return}n.bends.forEach((o,a)=>{this.createBendHandle(A.id,a,o.x,o.y)}),this.bendHandlesGroup.style.display="block",this.bendHandlesGroup.style.pointerEvents="auto",this.updateControlButtons()}createAnchorHandle(A,t,e,s){const n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttribute("cx",String(e)),n.setAttribute("cy",String(s)),n.setAttribute("r",String(this.HANDLE_RADIUS)),n.setAttribute("fill","#2196f3"),n.setAttribute("stroke","#fff"),n.setAttribute("stroke-width","2"),n.setAttribute("data-edge-id",A),n.setAttribute("data-handle-type",t),n.style.cursor="move",this.anchorHandles.set(t,n),this.anchorHandlesGroup.appendChild(n)}createBendHandle(A,t,e,s){const n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttribute("cx",String(e)),n.setAttribute("cy",String(s)),n.setAttribute("r",String(this.BEND_HANDLE_RADIUS)),n.setAttribute("fill","#ff9800"),n.setAttribute("stroke","#fff"),n.setAttribute("stroke-width","2"),n.setAttribute("data-edge-id",A),n.setAttribute("data-bend-index",String(t)),n.style.cursor="move",this.bendHandles.set(t,n),this.bendHandlesGroup.appendChild(n)}updateNodePosition(A){if(!this.draggingNode)return;const t=this.nodes.find(o=>o.id===this.draggingNode.nodeId);if(!t)return;const e=this.screenToSvg(A.clientX,A.clientY),s=e.x,n=e.y;t.position||(t.position={x:0,y:0}),t.position.x=s-this.draggingNode.offsetX,t.position.y=n-this.draggingNode.offsetY,this.updateGroupLayouts(t.id,void 0),this.render(),this.updateAnchorHandles(),this.updateBendHandles()}updateNodeSize(A){if(!this.resizingNode)return;const t=this.nodes.find(h=>h.id===this.resizingNode.nodeId);if(!t?.position)return;const e=this.screenToSvg(A.clientX,A.clientY),s=e.x,n=e.y;t.style||(t.style={});const o=s-this.resizingNode.startX,a=n-this.resizingNode.startY;switch(this.resizingNode.side){case"right":{const h=Math.max(60,this.resizingNode.startWidth+o);t.style.width=h,t.position.x=this.resizingNode.startNodeX+o/2;break}case"left":{const h=Math.max(60,this.resizingNode.startWidth-o);t.style.width=h,t.position.x=this.resizingNode.startNodeX+o/2;break}case"bottom":{const h=Math.max(40,this.resizingNode.startHeight+a);t.style.height=h,t.position.y=this.resizingNode.startNodeY+a/2;break}case"top":{const h=Math.max(40,this.resizingNode.startHeight-a);t.style.height=h,t.position.y=this.resizingNode.startNodeY+a/2;break}}const r=this.nodeElements.get(t.id);if(r){const h=t.style||{},c=h.width||this.DEFAULT_NODE_WIDTH,u=h.height||this.DEFAULT_NODE_HEIGHT,l=t.position.x-c/2,d=t.position.y-u/2;r.setAttribute("x",String(l)),r.setAttribute("y",String(d)),r.setAttribute("width",String(c)),r.setAttribute("height",String(u));const g=r.parentElement;if(g){const f=g.querySelector("foreignObject");if(f){const B=t.style||{},w=B.width||this.DEFAULT_NODE_WIDTH,p=B.height||this.DEFAULT_NODE_HEIGHT,C=t.position.x-w/2,y=t.position.y-p/2;f.setAttribute("x",String(C)),f.setAttribute("y",String(y))}t.position&&g.querySelectorAll("[data-resize-side]").forEach(w=>{const p=w.getAttribute("data-resize-side");p==="top"?(w.setAttribute("cx",String(t.position.x)),w.setAttribute("cy",String(t.position.y-u/2))):p==="right"?(w.setAttribute("cx",String(t.position.x+c/2)),w.setAttribute("cy",String(t.position.y))):p==="bottom"?(w.setAttribute("cx",String(t.position.x)),w.setAttribute("cy",String(t.position.y+u/2))):p==="left"&&(w.setAttribute("cx",String(t.position.x-c/2)),w.setAttribute("cy",String(t.position.y)))})}}}handleResizeEnd(){this.resizeRenderTimer&&(clearTimeout(this.resizeRenderTimer),this.resizeRenderTimer=null),this.resizingNode&&this.updateGroupLayouts(this.resizingNode.nodeId,void 0),this.render()}saveSnapshot(){this.snapshotBeforeEdit={nodes:this.nodes.map(A=>({...A,position:A.position?{...A.position}:void 0,style:A.style?{...A.style}:void 0,meta:A.meta?{...A.meta}:void 0})),edges:this.edges.map(A=>({...A,srcAnchor:A.srcAnchor?{...A.srcAnchor}:void 0,dstAnchor:A.dstAnchor?{...A.dstAnchor}:void 0,bends:A.bends?A.bends.map(t=>({...t})):void 0,style:A.style?{...A.style}:void 0,meta:A.meta?{...A.meta}:void 0})),groups:this.groups.map(A=>({...A,layout:A.layout?{position:{...A.layout.position},size:{...A.layout.size}}:void 0,info:A.info?{...A.info}:void 0}))}}restoreSnapshot(){this.snapshotBeforeEdit&&(this.nodes=this.snapshotBeforeEdit.nodes.map(A=>({...A,position:A.position?{...A.position}:void 0,style:A.style?{...A.style}:void 0,meta:A.meta?{...A.meta}:void 0})),this.edges=this.snapshotBeforeEdit.edges.map(A=>({...A,srcAnchor:A.srcAnchor?{...A.srcAnchor}:void 0,dstAnchor:A.dstAnchor?{...A.dstAnchor}:void 0,bends:A.bends?A.bends.map(t=>({...t})):void 0,style:A.style?{...A.style}:void 0,meta:A.meta?{...A.meta}:void 0})),this.groups=this.snapshotBeforeEdit.groups.map(A=>({...A,layout:A.layout?{position:{...A.layout.position},size:{...A.layout.size}}:void 0,info:A.info?{...A.info}:void 0})),this.render(),this.deselectEdge())}cloneState(){return{nodes:this.nodes.map(A=>({...A,position:A.position?{...A.position}:void 0,style:A.style?{...A.style}:void 0,meta:A.meta?{...A.meta}:void 0})),edges:this.edges.map(A=>({...A,srcAnchor:A.srcAnchor?{...A.srcAnchor}:void 0,dstAnchor:A.dstAnchor?{...A.dstAnchor}:void 0,bends:A.bends?A.bends.map(t=>({...t})):void 0,style:A.style?{...A.style}:void 0,meta:A.meta?{...A.meta}:void 0})),groups:this.groups.map(A=>({...A,layout:A.layout?{position:{...A.layout.position},size:{...A.layout.size}}:void 0,info:A.info?{...A.info}:void 0}))}}pushUndoState(){if(this.mode!=="edit")return;const A=this.cloneState();this.undoStack.push(A),this.undoStack.length>ve.MAX_UNDO_LEVELS&&this.undoStack.shift(),this.redoStack=[],this.onGraphButtonsUpdate?.()}applyState(A){this.nodes=A.nodes.map(t=>({...t,position:t.position?{...t.position}:void 0,style:t.style?{...t.style}:void 0,meta:t.meta?{...t.meta}:void 0})),this.edges=A.edges.map(t=>({...t,srcAnchor:t.srcAnchor?{...t.srcAnchor}:void 0,dstAnchor:t.dstAnchor?{...t.dstAnchor}:void 0,bends:t.bends?t.bends.map(e=>({...e})):void 0,style:t.style?{...t.style}:void 0,meta:t.meta?{...t.meta}:void 0})),this.groups=A.groups.map(t=>({...t,layout:t.layout?{position:{...t.layout.position},size:{...t.layout.size}}:void 0,info:t.info?{...t.info}:void 0}))}undo(){if(this.mode!=="edit"||this.undoStack.length===0)return;const A=this.cloneState();this.redoStack.push(A);const t=this.undoStack.pop();this.applyState(t),this.render(),this.updateAnchorHandles(),this.updateBendHandles(),this.updateControlButtons(),this.debouncedSave(),this.onGraphButtonsUpdate?.()}redo(){if(this.mode!=="edit"||this.redoStack.length===0)return;const A=this.cloneState();this.undoStack.push(A);const t=this.redoStack.pop();this.applyState(t),this.render(),this.updateAnchorHandles(),this.updateBendHandles(),this.updateControlButtons(),this.debouncedSave(),this.onGraphButtonsUpdate?.()}canUndo(){return this.mode==="edit"&&this.undoStack.length>0}canRedo(){return this.mode==="edit"&&this.redoStack.length>0}updateAnchorPosition(A){if(!this.draggingAnchor)return;const t=this.edges.find(U=>U.id===this.draggingAnchor.edgeId);if(!t)return;const[e,s]=t.src<t.dst?[t.src,t.dst]:[t.dst,t.src],n=`${e}||${s}`,o=this.groupEdgesByPair(this.edges).find(U=>U.key===n);if(!o)return;const a=this.draggingAnchor.type==="src"?o.a:o.b,r=this.nodes.find(U=>U.id===a);if(!r?.position)return;const h=this.screenToSvg(A.clientX,A.clientY),c=h.x-this.draggingAnchor.offsetX,u=h.y-this.draggingAnchor.offsetY,l=r.position.x,d=r.position.y,g=r.style||{},f=g.width||this.DEFAULT_NODE_WIDTH,B=g.height||this.DEFAULT_NODE_HEIGHT,w={top:Math.abs(u-(d-B/2)),right:Math.abs(c-(l+f/2)),bottom:Math.abs(u-(d+B/2)),left:Math.abs(c-(l-f/2))};let p="right",C=w.right;for(const[U,Q]of Object.entries(w))Q<C&&(C=Q,p=U);let y=.5;switch(p){case"top":case"bottom":y=(c-(l-f/2))/f;break;case"left":case"right":y=(u-(d-B/2))/B;break}y=Math.max(0,Math.min(1,y)),this.draggingAnchor.type==="src"?o.srcAnchor={side:p,t:y}:o.dstAnchor={side:p,t:y};for(const U of o.edges)U.src===o.a&&U.dst===o.b?(U.srcAnchor=o.srcAnchor,U.dstAnchor=o.dstAnchor):(U.srcAnchor=o.dstAnchor,U.dstAnchor=o.srcAnchor);this.render(),this.updateAnchorHandles(),this.updateBendHandles()}updateBendPosition(A){if(!this.draggingBend)return;const t=this.edges.find(u=>u.id===this.draggingBend.edgeId);if(!t)return;const[e,s]=t.src<t.dst?[t.src,t.dst]:[t.dst,t.src],n=`${e}||${s}`,o=this.groupEdgesByPair(this.edges).find(u=>u.key===n);if(!o||!o.bends)return;const a=this.draggingBend.bendIndex;if(a<0||a>=o.bends.length)return;const r=this.screenToSvg(A.clientX,A.clientY),h=r.x-this.draggingBend.offsetX,c=r.y-this.draggingBend.offsetY;o.bends[a]={x:h,y:c};for(const u of o.edges)u.bends=[...o.bends];this.render(),this.updateBendHandles()}insertBendPoint(A,t){const e=this.edges.find(I=>I.id===A);if(!e)return;this.pushUndoState();const[s,n]=e.src<e.dst?[e.src,e.dst]:[e.dst,e.src],o=`${s}||${n}`,a=this.groupEdgesByPair(this.edges).find(I=>I.key===o);if(!a)return;const r=this.svg.getBoundingClientRect(),h=t.clientX-r.left,c=t.clientY-r.top,u=[],l=this.nodes.find(I=>I.id===a.a),d=this.nodes.find(I=>I.id===a.b);if(!l?.position||!d?.position)return;const g=a.srcAnchor||this.estimateAnchor(l,d),f=a.dstAnchor||this.estimateAnchor(d,l),B=l.style||{},w=d.style||{},p=B.width||this.DEFAULT_NODE_WIDTH,C=B.height||this.DEFAULT_NODE_HEIGHT,y=w.width||this.DEFAULT_NODE_WIDTH,U=w.height||this.DEFAULT_NODE_HEIGHT,Q=this.calculateAnchorPosition(l,g,p,C),E=this.calculateAnchorPosition(d,f,y,U);u.push(Q),a.bends&&u.push(...a.bends),u.push(E);let F=0,m=1/0;for(let I=0;I<u.length-1;I++){const T=u[I],D=u[I+1],S=this.pointToLineSegmentDistance(h,c,T.x,T.y,D.x,D.y);S<m&&(m=S,F=I)}const v=u[F],H=u[F+1],b={x:(v.x+H.x)/2,y:(v.y+H.y)/2};a.bends||(a.bends=[]),a.bends.splice(F,0,b);for(const I of a.edges)I.bends=[...a.bends];this.selectedEdgeId!==A&&this.selectEdge(A,!1),this.render(),this.updateBendHandles()}pointToLineSegmentDistance(A,t,e,s,n,o){const a=n-e,r=o-s,h=a*a+r*r;if(h===0)return Math.sqrt((A-e)**2+(t-s)**2);const c=Math.max(0,Math.min(1,((A-e)*a+(t-s)*r)/h)),u=e+c*a,l=s+c*r;return Math.sqrt((A-u)**2+(t-l)**2)}deleteNearestBendPoint(){if(!this.selectedEdgeId)return;const A=this.edges.find(o=>o.id===this.selectedEdgeId);if(!A)return;const[t,e]=A.src<A.dst?[A.src,A.dst]:[A.dst,A.src],s=`${t}||${e}`,n=this.groupEdgesByPair(this.edges).find(o=>o.key===s);if(!(!n||!n.bends||n.bends.length===0)){this.pushUndoState(),n.bends.pop(),n.bends.length===0&&delete n.bends;for(const o of n.edges)n.bends?o.bends=[...n.bends]:delete o.bends;this.render(),this.updateBendHandles(),this.updateControlButtons()}}debouncedSave(){this.onSave&&(this.saveDebounceTimer!==null&&clearTimeout(this.saveDebounceTimer),this.saveDebounceTimer=window.setTimeout(()=>{this.onSave({nodes:this.nodes,edges:this.edges,groups:this.groups.length>0?this.groups:void 0}),this.saveDebounceTimer=null},this.SAVE_DEBOUNCE_MS))}render(){this.updateTransform(),this.nodeElements.clear(),this.edgeElements.clear(),this.edgesGroup.innerHTML="",this.groupsGroup.innerHTML="",this.nodesGroup.innerHTML="",this.edgeLabelsGroup.innerHTML="";const A=this.groupEdgesByPair(this.edges);for(const t of A){const e=t.edges.some(U=>U.id===this.selectedEdgeId),s=this.mode==="view"&&t.key===this.hoveredEdgePairKey,n=this.mode==="view"&&t.key===this.tappedEdgePairKey,o=this.alwaysShowEdges||e||s||n,r=t.edges[0].style||{},h=r.color||this.EDGE_DEFAULT_COLOR,c=r.weight||1,u=Math.max(this.EDGE_MIN_WEIGHT,Math.min(this.EDGE_MAX_WEIGHT,c)),l=this.EDGE_DEFAULT_WIDTH+(u-1)*.5,d=o?Math.max(l,this.EDGE_HOVER_WIDTH):l,g=e?"#2196f3":h,f=o?1:.3,B=this.calculateEdgePairPath(t);if(!B)continue;const w=document.createElementNS("http://www.w3.org/2000/svg","path");w.setAttribute("d",B),w.setAttribute("stroke","transparent"),w.setAttribute("stroke-width",String(this.HIT_PATH_WIDTH)),w.setAttribute("fill","none"),w.setAttribute("data-hit-edge-pair-key",t.key),w.style.cursor="pointer",w.style.pointerEvents="stroke",this.edgesGroup.appendChild(w);const p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d",B),p.setAttribute("stroke",g),p.setAttribute("stroke-width",String(d)),p.setAttribute("stroke-opacity",String(f)),p.setAttribute("fill","none"),p.setAttribute("data-edge-pair-key",t.key),p.style.pointerEvents="none",p.style.transition="stroke-opacity 0.2s, stroke-width 0.2s";const C=this.getEdgePairMarkerAttributes(t);if(C.markerStart&&p.setAttribute("marker-start",C.markerStart),C.markerEnd&&p.setAttribute("marker-end",C.markerEnd),this.edgeElements.set(t.key,p),this.edgesGroup.appendChild(p),this.mode==="view")this.setupEdgeInteraction(w,t,r);else if(this.mode==="edit"){this.setupEdgeInteractionForEdit(w,t);const U=t.key;w.addEventListener("click",Q=>{const E=this.edgeClickTimers.get(w);if(E!=null){clearTimeout(E),this.edgeClickTimers.set(w,null);return}const F=window.setTimeout(()=>{if(this.edgeClickTimers.set(w,null),this.mode==="edit"){const m=this.groupEdgesByPair(this.edges).find(v=>v.key===U);m&&m.edges.length>0&&(this.selectEdge(m.edges[0].id,Q.shiftKey),this.render())}},300);this.edgeClickTimers.set(w,F)})}const y=t.key;w.addEventListener("dblclick",U=>{if(this.mode!=="edit")return;const Q=this.edgeClickTimers.get(w);Q!=null&&(clearTimeout(Q),this.edgeClickTimers.set(w,null));const E=this.groupEdgesByPair(this.edges).find(F=>F.key===y);E&&E.edges.length>0&&(this.insertBendPoint(E.edges[0].id,U),U.preventDefault(),U.stopPropagation())}),o&&this.renderEdgeLabels(t,r)}this.renderGroups();for(const t of this.nodes){if(!t.position)continue;const e=t.style||{},s=e.width||this.DEFAULT_NODE_WIDTH,n=e.height||this.DEFAULT_NODE_HEIGHT,o=e.color||"#fff",a=e.borderColor||"#333",r=document.createElementNS("http://www.w3.org/2000/svg","g");r.setAttribute("data-node-id",t.id);const h=document.createElementNS("http://www.w3.org/2000/svg","rect"),c=t.position.x-s/2,u=t.position.y-n/2;h.setAttribute("x",String(c)),h.setAttribute("y",String(u)),h.setAttribute("width",String(s)),h.setAttribute("height",String(n));const l=o.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);if(l){const B=parseInt(l[1],16),w=parseInt(l[2],16),p=parseInt(l[3],16);h.setAttribute("fill",`rgba(${B}, ${w}, ${p}, 0.5)`)}else h.setAttribute("fill",o);const d=this.selectedNodeId===t.id;h.setAttribute("stroke",d?"#2196f3":a),h.setAttribute("stroke-width",d?"4":"2"),h.setAttribute("rx","4"),h.style.cursor=this.mode==="view"?"pointer":"move";const g=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");g.setAttribute("x",String(c)),g.setAttribute("y",String(u)),g.setAttribute("width",String(s)),g.setAttribute("height",String(n));const f=document.createElement("div");f.style.width="100%",f.style.height="100%",f.style.display="flex",f.style.alignItems="flex-start",f.style.justifyContent="center",f.style.textAlign="center",f.style.fontSize="14px",f.style.color="#333",f.style.padding="4px",f.style.wordWrap="break-word",f.style.overflowWrap="break-word",f.style.whiteSpace="normal",f.style.overflow="hidden",f.style.textOverflow="ellipsis",f.textContent=t.label,g.appendChild(f),r.appendChild(h),r.appendChild(g),this.mode==="edit"&&this.addResizeHandles(r,t,s,n),this.nodesGroup.appendChild(r),this.nodeElements.set(t.id,h),this.mode==="view"&&this.onNodeClick&&r.addEventListener("click",B=>{B.stopPropagation(),B.preventDefault();const w=this.svg.getBoundingClientRect(),p=B.clientX-w.left,C=B.clientY-w.top;this.onNodeClick({node:t,position:{x:p,y:C},originalEvent:B})},!0)}this.mode==="edit"&&(this.updateAnchorHandles(),this.updateBendHandles(),this.updateControlButtons())}calculateGroupBounds(A,t){let o=1/0,a=-1/0,r=1/0,h=-1/0,c=!1;const u=t?this.groups.some(f=>f.parentId===t):!1,l=new Set;if(u&&t){const f=this.groups.filter(B=>B.parentId===t);for(const B of f){const w=p=>{for(const y of p.nodeIds)l.add(y);const C=this.groups.filter(y=>y.parentId===p.id);for(const y of C)w(y)};w(B)}}for(const f of A){if(u&&l.has(f))continue;const B=this.nodes.find(F=>F.id===f);if(!B||!B.position)continue;c=!0;const w=B.style||{},p=w.width||this.DEFAULT_NODE_WIDTH,C=w.height||this.DEFAULT_NODE_HEIGHT,y=B.position.x-p/2,U=B.position.x+p/2,Q=B.position.y-C/2,E=B.position.y+C/2;o=Math.min(o,y),a=Math.max(a,U),r=Math.min(r,Q),h=Math.max(h,E)}if(u&&t){const f=this.groups.filter(B=>B.parentId===t);for(const B of f){const w=this.getGroupLayout(B);if(w){c=!0;const p=w.position.x,C=w.position.x+w.size.width,y=w.position.y,U=w.position.y+w.size.height;o=Math.min(o,p),a=Math.max(a,C),r=Math.min(r,y),h=Math.max(h,U)}}}if(!c)return null;const d=u?50:30,g=d+25;return{minX:o-d,maxX:a+d,minY:r-g,maxY:h+d}}getGroupLayout(A){if(A.layout)return A.layout;const t=this.calculateGroupBounds(A.nodeIds,A.id);return t?{position:{x:t.minX,y:t.minY},size:{width:t.maxX-t.minX,height:t.maxY-t.minY}}:null}renderGroups(){if(this.groups.length===0)return;const A=[...this.groups].sort((t,e)=>{const s=n=>{if(!n.parentId)return 0;const o=this.groups.find(a=>a.id===n.parentId);return o?1+s(o):0};return s(t)-s(e)});for(const t of A){let e=this.getGroupLayout(t);if(e)t.layout||(t.layout=e);else{const r=this.calculateGroupBounds(t.nodeIds,t.id);if(r)e={position:{x:r.minX,y:r.minY},size:{width:r.maxX-r.minX,height:r.maxY-r.minY}},t.layout=e;else continue}const s=document.createElementNS("http://www.w3.org/2000/svg","g");s.setAttribute("data-group-id",t.id),s.setAttribute("class","group");const n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("x",String(e.position.x)),n.setAttribute("y",String(e.position.y)),n.setAttribute("width",String(e.size.width)),n.setAttribute("height",String(e.size.height));const o=t.style;n.setAttribute("fill",o?.color??"rgba(200, 200, 200, 0.1)"),n.setAttribute("stroke",o?.borderColor??"#999"),n.setAttribute("stroke-width",String(o?.borderWidth??2)),n.setAttribute("stroke-dasharray",o?.borderDash===!1?"none":"5,5"),n.setAttribute("rx","4"),n.style.pointerEvents="auto",n.style.cursor=this.mode==="edit"?"move":"pointer";const a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("x",String(e.position.x+10)),a.setAttribute("y",String(e.position.y+25)),a.setAttribute("font-size","14"),a.setAttribute("font-weight","bold"),a.setAttribute("fill","#666"),a.textContent=t.label,a.style.pointerEvents="none",s.appendChild(n),s.appendChild(a),this.mode==="edit"&&this.setupGroupEditInteractions(s,t,n),this.mode==="view"&&this.onGroupClick&&s.addEventListener("click",r=>{if(r.target.getAttribute("data-resize-side"))return;r.stopPropagation(),r.preventDefault();const c=this.svg.getBoundingClientRect(),u=r.clientX-c.left,l=r.clientY-c.top;this.onGroupClick({group:t,position:{x:u,y:l},originalEvent:r})},!0),this.groupsGroup.appendChild(s)}}updateGroupLayouts(A,t,e=!1){const s=new Set,n=e&&t?t:null;if(A){const a=this.groups.filter(r=>r.nodeIds.includes(A));a.forEach(r=>s.add(r));for(const r of a)this.addParentGroupsToUpdate(r,s)}if(t){const a=this.groups.find(r=>r.id===t);if(a){e||s.add(a),this.addParentGroupsToUpdate(a,s);const r=this.collectNodeIdsInGroupAndDescendants(a);for(const h of r){const c=this.groups.filter(u=>u.nodeIds.includes(h));for(const u of c)s.add(u),this.addParentGroupsToUpdate(u,s)}}}const o=Array.from(s).sort((a,r)=>{const h=c=>{if(!c.parentId)return 0;const u=this.groups.find(l=>l.id===c.parentId);return u?1+h(u):0};return h(r)-h(a)});for(const a of o){if(n&&a.id===n)continue;const r=this.calculateGroupBounds(a.nodeIds,a.id);r&&(a.layout||(a.layout={position:{x:0,y:0},size:{width:0,height:0}}),a.layout.position.x=r.minX,a.layout.position.y=r.minY,a.layout.size.width=r.maxX-r.minX,a.layout.size.height=r.maxY-r.minY)}}collectNodeIdsInGroupAndDescendants(A){const t=new Set;for(const s of A.nodeIds)t.add(s);const e=this.groups.filter(s=>s.parentId===A.id);for(const s of e)this.collectNodeIdsInGroupAndDescendants(s).forEach(o=>t.add(o));return t}addParentGroupsToUpdate(A,t){if(A.parentId){const e=this.groups.find(s=>s.id===A.parentId);e&&(t.add(e),this.addParentGroupsToUpdate(e,t))}}moveDescendantGroups(A,t,e){const s=this.groups.filter(n=>n.parentId===A);for(const n of s){n.layout&&(n.layout.position.x+=t,n.layout.position.y+=e);for(const o of n.nodeIds){const a=this.nodes.find(r=>r.id===o);a&&a.position&&(a.position.x+=t,a.position.y+=e)}this.moveDescendantGroups(n.id,t,e)}}setupGroupEditInteractions(A,t,e){t.layout&&(e.addEventListener("pointerdown",s=>{if(this.mode!=="edit"||s.target.getAttribute("data-resize-side"))return;s.stopPropagation(),s.preventDefault(),e.setPointerCapture(s.pointerId);const o=this.screenToSvg(s.clientX,s.clientY),a=o.x,r=o.y;if(!t.layout)return;this.pushUndoState();const h=t.layout.position.x,c=t.layout.position.y;this.draggingGroup={groupId:t.id,offsetX:a-h,offsetY:r-c},e.style.cursor="grabbing"}),this.addGroupResizeHandles(A,t,e))}addGroupResizeHandles(A,t,e){if(!t.layout)return;const s=12,n=["top","right","bottom","left"];for(const o of n){const a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("r",String(s/2)),a.setAttribute("fill","#2196f3"),a.setAttribute("stroke","#fff"),a.setAttribute("stroke-width","2"),a.setAttribute("data-resize-side",o),a.setAttribute("data-group-id",t.id),a.style.cursor=this.getResizeCursor(o),a.style.pointerEvents="auto";const r=t.layout.position.x,h=t.layout.position.y,c=t.layout.size.width,u=t.layout.size.height;switch(o){case"top":a.setAttribute("cx",String(r+c/2)),a.setAttribute("cy",String(h));break;case"right":a.setAttribute("cx",String(r+c)),a.setAttribute("cy",String(h+u/2));break;case"bottom":a.setAttribute("cx",String(r+c/2)),a.setAttribute("cy",String(h+u));break;case"left":a.setAttribute("cx",String(r)),a.setAttribute("cy",String(h+u/2));break}a.addEventListener("pointerdown",l=>{if(this.mode!=="edit")return;l.stopPropagation(),l.preventDefault(),a.setPointerCapture(l.pointerId);const d=this.screenToSvg(l.clientX,l.clientY),g=d.x,f=d.y;t.layout&&(this.pushUndoState(),this.resizingGroup={groupId:t.id,side:o,startX:g,startY:f,startWidth:t.layout.size.width,startHeight:t.layout.size.height,startPosX:t.layout.position.x,startPosY:t.layout.position.y})}),A.appendChild(a)}}updateEdgeHighlight(A){const t=this.groupEdgesByPair(this.edges);for(const e of t){const s=this.edgeElements.get(e.key);if(!s)continue;const n=e.edges.some(p=>p.id===this.selectedEdgeId),o=this.mode==="view"&&e.key===this.hoveredEdgePairKey,a=this.mode==="view"&&e.key===this.tappedEdgePairKey,r=this.alwaysShowEdges||n||o||a,c=e.edges[0].style||{},u=c.color||this.EDGE_DEFAULT_COLOR,l=c.weight||1,d=Math.max(this.EDGE_MIN_WEIGHT,Math.min(this.EDGE_MAX_WEIGHT,l)),g=this.EDGE_DEFAULT_WIDTH+(d-1)*.5,f=r?Math.max(g,this.EDGE_HOVER_WIDTH):g,B=n?"#2196f3":u,w=r?1:.3;s.setAttribute("stroke",B),s.setAttribute("stroke-width",String(f)),s.setAttribute("stroke-opacity",String(w)),r?(this.edgeLabelsGroup.querySelectorAll(`[data-edge-pair-key="${e.key}"]`).forEach(C=>C.remove()),this.renderEdgeLabels(e,c)):this.edgeLabelsGroup.querySelectorAll(`[data-edge-pair-key="${e.key}"]`).forEach(C=>C.remove())}}setupEdgeInteraction(A,t,e){A.addEventListener("pointerenter",()=>{this.tappedEdgePairKey!==t.key&&(this.hoveredEdgePairKey=t.key,this.updateEdgeHighlight(t.key))}),A.addEventListener("pointerleave",()=>{this.tappedEdgePairKey!==t.key&&(this.hoveredEdgePairKey=null,this.updateEdgeHighlight(null))}),A.addEventListener("click",s=>{if(this.mode==="view"&&t.edges.length>0&&(this.tappedEdgePairKey=t.key,this.updateEdgeHighlight(t.key),this.onEdgeClick)){const n=this.screenToSvg(s.clientX,s.clientY),o=t.edges[0];this.onEdgeClick({edge:o,position:{x:n.x,y:n.y},originalEvent:s})}})}setupEdgeInteractionForEdit(A,t){A.addEventListener("pointerenter",()=>{if(t.edges.length>0){if(this.selectedEdgeId!==null&&!t.edges.some(s=>s.id===this.selectedEdgeId))return;this.selectedEdgeId=t.edges[0].id,this.updateAnchorHandles(),this.updateBendHandles(),this.updateControlButtons()}}),A.addEventListener("pointerleave",()=>{}),A.addEventListener("pointerdown",e=>{t.edges.length>0&&(this.selectedEdgeId=t.edges[0].id,this.updateAnchorHandles(),this.updateBendHandles(),this.updateControlButtons())})}addResizeHandles(A,t,e,s){const n=[{side:"top",x:t.position.x,y:t.position.y-s/2},{side:"right",x:t.position.x+e/2,y:t.position.y},{side:"bottom",x:t.position.x,y:t.position.y+s/2},{side:"left",x:t.position.x-e/2,y:t.position.y}];for(const o of n){const a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("cx",String(o.x)),a.setAttribute("cy",String(o.y)),a.setAttribute("r","6"),a.setAttribute("fill","#4CAF50"),a.setAttribute("stroke","#fff"),a.setAttribute("stroke-width","2"),a.setAttribute("data-resize-side",o.side),a.setAttribute("data-node-id",t.id),a.style.cursor=this.getResizeCursor(o.side),a.style.pointerEvents="auto",A.appendChild(a)}}getResizeCursor(A){switch(A){case"top":case"bottom":return"ns-resize";case"left":case"right":return"ew-resize"}}updateGroupPosition(A){if(!this.draggingGroup)return;const t=this.groups.find(l=>l.id===this.draggingGroup.groupId);if(!t||!t.layout)return;const e=this.screenToSvg(A.clientX,A.clientY),s=e.x,n=e.y,o=s-this.draggingGroup.offsetX,a=n-this.draggingGroup.offsetY,r=o-t.layout.position.x,h=a-t.layout.position.y,c=new Set,u=this.groups.filter(l=>l.parentId===t.id);for(const l of u)for(const d of l.nodeIds)c.add(d);for(const l of t.nodeIds)if(!c.has(l)){const d=this.nodes.find(g=>g.id===l);d&&d.position&&(d.position.x+=r,d.position.y+=h)}this.moveDescendantGroups(t.id,r,h),t.layout.position.x=o,t.layout.position.y=a,this.updateGroupLayouts(void 0,t.id,!0),this.render(),this.updateAnchorHandles(),this.updateBendHandles()}updateGroupSize(A){if(!this.resizingGroup)return;const t=this.groups.find(h=>h.id===this.resizingGroup.groupId);if(!t||!t.layout)return;const e=this.screenToSvg(A.clientX,A.clientY),s=e.x,n=e.y,o=s-this.resizingGroup.startX,a=n-this.resizingGroup.startY;switch(this.resizingGroup.side){case"right":{const h=Math.max(100,this.resizingGroup.startWidth+o);t.layout.size.width=h;break}case"left":{const h=Math.max(100,this.resizingGroup.startWidth-o);t.layout.size.width=h,t.layout.position.x=this.resizingGroup.startPosX+o;break}case"bottom":{const h=Math.max(100,this.resizingGroup.startHeight+a);t.layout.size.height=h;break}case"top":{const h=Math.max(100,this.resizingGroup.startHeight-a);t.layout.size.height=h,t.layout.position.y=this.resizingGroup.startPosY+a;break}}const r=this.groupsGroup.querySelector(`[data-group-id="${t.id}"]`);if(r){const h=r.querySelector("rect");if(h&&(h.setAttribute("x",String(t.layout.position.x)),h.setAttribute("y",String(t.layout.position.y)),h.setAttribute("width",String(t.layout.size.width)),h.setAttribute("height",String(t.layout.size.height))),!t.layout)return;const c=r.querySelectorAll("[data-resize-side]"),u=t.layout;c.forEach(d=>{const g=d.getAttribute("data-resize-side"),f=u.position.x,B=u.position.y,w=u.size.width,p=u.size.height;switch(g){case"top":d.setAttribute("cx",String(f+w/2)),d.setAttribute("cy",String(B));break;case"right":d.setAttribute("cx",String(f+w)),d.setAttribute("cy",String(B+p/2));break;case"bottom":d.setAttribute("cx",String(f+w/2)),d.setAttribute("cy",String(B+p));break;case"left":d.setAttribute("cx",String(f)),d.setAttribute("cy",String(B+p/2));break}});const l=r.querySelector("text");l&&(l.setAttribute("x",String(t.layout.position.x+10)),l.setAttribute("y",String(t.layout.position.y+20)))}}handleGroupResizeEnd(){this.resizingGroup&&this.updateGroupLayouts(void 0,this.resizingGroup.groupId,!0),this.render()}getPointOnPath(A,t){if(!A)return null;const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.style.position="absolute",e.style.visibility="hidden",e.style.width="0",e.style.height="0",document.body.appendChild(e);const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d",A),e.appendChild(s);try{const n=s.getTotalLength();if(n===0)return document.body.removeChild(e),null;const o=s.getPointAtLength(n*t);return document.body.removeChild(e),{x:o.x,y:o.y}}catch{return document.body.removeChild(e),null}}renderEdgeLabels(A,t){const e=this.nodes.find(Q=>Q.id===A.a),s=this.nodes.find(Q=>Q.id===A.b);if(!e?.position||!s?.position)return;const n=e.style||{},o=s.style||{},a=n.width||this.DEFAULT_NODE_WIDTH,r=n.height||this.DEFAULT_NODE_HEIGHT,h=o.width||this.DEFAULT_NODE_WIDTH,c=o.height||this.DEFAULT_NODE_HEIGHT,u=A.srcAnchor||this.estimateAnchor(e,s),l=A.dstAnchor||this.estimateAnchor(s,e),d=this.calculateAnchorPosition(e,u,a,r),g=this.calculateAnchorPosition(s,l,h,c),f=this.calculateEdgePairPath(A),B=A.edges.find(Q=>Q.src===A.a&&Q.dst===A.b),w=A.edges.find(Q=>Q.src===A.b&&Q.dst===A.a),p=B?.style?.label||B?.relType||"",C=w?.style?.label||w?.relType||"",y=p!==C&&p&&C,U=p===C&&p;if(y){const E=this.getPointOnPath(f,.75),F=this.getPointOnPath(f,.25),m=E?E.x:d.x+(g.x-d.x)*(1-.25),v=E?E.y:d.y+(g.y-d.y)*(1-.25),H=F?F.x:d.x+(g.x-d.x)*.25,b=F?F.y:d.y+(g.y-d.y)*.25;if(p){const I=document.createElementNS("http://www.w3.org/2000/svg","text");I.setAttribute("x",String(m)),I.setAttribute("y",String(v-8)),I.setAttribute("text-anchor","middle"),I.setAttribute("dominant-baseline","middle"),I.setAttribute("font-size","12"),I.setAttribute("fill","#333"),I.setAttribute("font-weight","bold"),I.setAttribute("pointer-events","none"),I.setAttribute("data-edge-pair-key",A.key);const T=document.createElementNS("http://www.w3.org/2000/svg","rect"),D=p.length*7;T.setAttribute("x",String(m-D/2-4)),T.setAttribute("y",String(v-16)),T.setAttribute("width",String(D+8)),T.setAttribute("height","16"),T.setAttribute("fill","rgba(255, 255, 255, 0.9)"),T.setAttribute("rx","2"),T.setAttribute("pointer-events","none"),T.setAttribute("data-edge-pair-key",A.key),this.edgeLabelsGroup.appendChild(T),I.textContent=p,this.edgeLabelsGroup.appendChild(I)}if(C){const I=document.createElementNS("http://www.w3.org/2000/svg","text");I.setAttribute("x",String(H)),I.setAttribute("y",String(b-8)),I.setAttribute("text-anchor","middle"),I.setAttribute("dominant-baseline","middle"),I.setAttribute("font-size","12"),I.setAttribute("fill","#333"),I.setAttribute("font-weight","bold"),I.setAttribute("pointer-events","none"),I.setAttribute("data-edge-pair-key",A.key);const T=document.createElementNS("http://www.w3.org/2000/svg","rect"),D=C.length*7;T.setAttribute("x",String(H-D/2-4)),T.setAttribute("y",String(b-16)),T.setAttribute("width",String(D+8)),T.setAttribute("height","16"),T.setAttribute("fill","rgba(255, 255, 255, 0.9)"),T.setAttribute("rx","2"),T.setAttribute("pointer-events","none"),T.setAttribute("data-edge-pair-key",A.key),this.edgeLabelsGroup.appendChild(T),I.textContent=C,this.edgeLabelsGroup.appendChild(I)}}else if(U){const Q=this.getPointOnPath(f,.5),E=Q?Q.x:(d.x+g.x)/2,F=Q?Q.y:(d.y+g.y)/2,m=document.createElementNS("http://www.w3.org/2000/svg","text");m.setAttribute("x",String(E)),m.setAttribute("y",String(F)),m.setAttribute("text-anchor","middle"),m.setAttribute("dominant-baseline","middle"),m.setAttribute("data-edge-pair-key",A.key),m.setAttribute("font-size","12"),m.setAttribute("fill","#333"),m.setAttribute("font-weight","bold"),m.setAttribute("pointer-events","none");const v=document.createElementNS("http://www.w3.org/2000/svg","rect"),H=p.length*7;v.setAttribute("x",String(E-H/2-4)),v.setAttribute("y",String(F-8)),v.setAttribute("width",String(H+8)),v.setAttribute("height","16"),v.setAttribute("fill","rgba(255, 255, 255, 0.9)"),v.setAttribute("rx","2"),v.setAttribute("pointer-events","none"),v.setAttribute("data-edge-pair-key",A.key),this.edgeLabelsGroup.appendChild(v),m.textContent=p,this.edgeLabelsGroup.appendChild(m)}else if(t.label){const Q=this.getPointOnPath(f,.5),E=Q?Q.x:(d.x+g.x)/2,F=Q?Q.y:(d.y+g.y)/2,m=document.createElementNS("http://www.w3.org/2000/svg","text");m.setAttribute("x",String(E)),m.setAttribute("y",String(F)),m.setAttribute("text-anchor","middle"),m.setAttribute("dominant-baseline","middle"),m.setAttribute("font-size","12"),m.setAttribute("fill","#333"),m.setAttribute("font-weight","bold"),m.setAttribute("pointer-events","none"),m.setAttribute("data-edge-pair-key",A.key);const v=document.createElementNS("http://www.w3.org/2000/svg","rect"),H=t.label.length*7;v.setAttribute("x",String(E-H/2-4)),v.setAttribute("y",String(F-8)),v.setAttribute("width",String(H+8)),v.setAttribute("height","16"),v.setAttribute("fill","rgba(255, 255, 255, 0.9)"),v.setAttribute("rx","2"),v.setAttribute("pointer-events","none"),v.setAttribute("data-edge-pair-key",A.key),this.edgeLabelsGroup.appendChild(v),m.textContent=t.label,this.edgeLabelsGroup.appendChild(m)}}setMode(A){if(!this.editable&&A==="edit")return;const t=this.mode==="edit";A==="edit"&&this.mode==="view"&&(this.saveSnapshot(),this.undoStack=[],this.redoStack=[]),this.mode=A,this.render(),A==="view"&&(this.deselectEdge(),t&&this.onSave&&this.onSave({nodes:this.nodes,edges:this.edges,groups:this.groups.length>0?this.groups:void 0})),this.updateEditToggleButtonIcon(),this.updateControlButtons(),this.onModeChange&&this.onModeChange()}setModeChangeCallback(A){this.onModeChange=A}setAlwaysShowEdgesChangeCallback(A){this.onAlwaysShowEdgesChange=A}setGraphButtonsUpdateCallback(A){this.onGraphButtonsUpdate=A}getAlwaysShowEdges(){return this.alwaysShowEdges}setAlwaysShowEdges(A){this.alwaysShowEdges!==A&&(this.alwaysShowEdges=A,this.updateAlwaysShowEdgesButton(),this.alwaysShowEdges||(this.hoveredEdgePairKey=null,this.tappedEdgePairKey=null),this.render())}clearSelection(){this.deselectEdge()}cancelEdit(){this.restoreSnapshot(),this.setMode("view")}getSelectedEdgeId(){return this.selectedEdgeId}getEdges(){return this.edges}hasBendPoints(A){const t=this.edges.find(a=>a.id===A);if(!t)return!1;const[e,s]=t.src<t.dst?[t.src,t.dst]:[t.dst,t.src],n=`${e}||${s}`,o=this.groupEdgesByPair(this.edges).find(a=>a.key===n);return!!(o&&o.bends&&o.bends.length>0)}isEditable(){return this.editable}getEditToggleButton(){return this.editToggleButton}getMode(){return this.mode}getViewAsSvg(){if(this.nodes.length===0)return null;let A=1/0,t=1/0,e=-1/0,s=-1/0;for(const l of this.nodes){if(!l.position)continue;const d=l.style||{},g=d.width??this.DEFAULT_NODE_WIDTH,f=d.height??this.DEFAULT_NODE_HEIGHT;A=Math.min(A,l.position.x-g/2),t=Math.min(t,l.position.y-f/2),e=Math.max(e,l.position.x+g/2),s=Math.max(s,l.position.y+f/2)}for(const l of this.groups){const d=this.getGroupLayout(l);d&&(A=Math.min(A,d.position.x),t=Math.min(t,d.position.y),e=Math.max(e,d.position.x+d.size.width),s=Math.max(s,d.position.y+d.size.height))}for(const l of this.edges){const d=this.getEdgePoints(l);for(const g of d)A=Math.min(A,g.x),t=Math.min(t,g.y),e=Math.max(e,g.x),s=Math.max(s,g.y)}const n=20;A-=n,t-=n,e+=n,s+=n;const o=e-A,a=s-t,r=this.svg.cloneNode(!0);r.setAttribute("viewBox",`0 0 ${o} ${a}`),r.setAttribute("width",String(Math.round(o))),r.setAttribute("height",String(Math.round(a)));const h=`translate(${-A}, ${-t})`;return[r.querySelector(".groups"),r.querySelector(".edges"),r.querySelector(".nodes"),r.querySelector(".anchor-handles"),r.querySelector(".bend-handles"),r.querySelector(".edge-labels")].forEach(l=>{l instanceof SVGGElement&&l.setAttribute("transform",h)}),r.querySelectorAll(".edges path[data-edge-pair-key]").forEach(l=>{l instanceof SVGPathElement&&(l.setAttribute("stroke-opacity","1"),(parseFloat(l.getAttribute("stroke-width")||"0")||0)<2&&l.setAttribute("stroke-width","2"))}),new XMLSerializer().serializeToString(r)}async exportViewToImage(A,t){const e=this.getViewAsSvg();if(!e)return null;const s="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e);return new Promise(n=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>{const a=o.naturalWidth,r=o.naturalHeight,h=document.createElement("canvas");h.width=a,h.height=r;const c=h.getContext("2d");if(!c){n(null);return}c.fillStyle="#ffffff",c.fillRect(0,0,a,r),c.drawImage(o,0,0);const u=t?.quality??.92;h.toBlob(l=>n(l??null),A==="png"?"image/png":"image/webp",u)},o.onerror=()=>n(null),o.src=s})}show(){this.container.style.display="block",this.nodes.length>0&&setTimeout(()=>{const A=this.container.getBoundingClientRect();A.width>0&&A.height>0&&this.fitAndCenter()},100),this.resize()}createPopup(){const A=document.createElement("div");A.className="relatos-graph-popup",A.style.cssText=`
      position: absolute;
      background: white;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 8px 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      pointer-events: none;
      z-index: 10000;
      font-size: 14px;
      line-height: 1.4;
      max-width: 300px;
      word-wrap: break-word;
      overflow-wrap: break-word;
      white-space: normal;
      opacity: 0;
      transition: opacity 0.2s;
    `;const t=document.createElement("div");return t.style.cssText=`
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 8px solid transparent;
      border-right: 8px solid transparent;
      border-top: 8px solid white;
    `,A.appendChild(t),this.container.appendChild(A),A}showPopup(A){!A||!A.position||(this.hidePopup(),this.popupElement||(this.popupElement=this.createPopup()),this.popupElement.textContent=A.label,this.popupElement.style.opacity="1",this.popupElement.style.display="block",this.popupNodeId=A.id,requestAnimationFrame(()=>{this.popupElement&&this.popupNodeId===A.id&&this.updatePopupPosition(A)}))}updatePopupPosition(A){if(!this.popupElement||!A||!A.position)return;const t=A.style||{};t.width||this.DEFAULT_NODE_WIDTH;const e=t.height||this.DEFAULT_NODE_HEIGHT,s=this.nodeElements.get(A.id);if(!s){this.container.getBoundingClientRect(),this.svg.getBoundingClientRect();const g=isFinite(this.zoom)&&this.zoom>0?this.zoom:1,f=isFinite(this.offsetX)?this.offsetX:0,B=isFinite(this.offsetY)?this.offsetY:0,w=(A.position.x+f)*g,p=(A.position.y+B)*g,C=this.popupElement.getBoundingClientRect(),y=C.width||200,U=C.height||50,Q=w-y/2,E=p-e*g/2-U-10;this.popupElement.style.left=`${Q}px`,this.popupElement.style.top=`${E}px`;return}const n=s.getBoundingClientRect(),o=this.container.getBoundingClientRect(),a=n.left+n.width/2-o.left,r=n.top+n.height/2-o.top,h=this.popupElement.getBoundingClientRect(),c=h.width||200,u=h.height||50,l=a-c/2,d=r-n.height/2-u-10;this.popupElement.style.left=`${l}px`,this.popupElement.style.top=`${d}px`}hidePopup(){this.popupElement&&(this.popupElement.style.opacity="0",setTimeout(()=>{this.popupElement&&this.popupElement.style.opacity==="0"&&(this.popupElement.style.display="none")},200)),this.popupNodeId=null}hide(){this.container.style.display="none",this.hidePopup()}resize(){const A=this.container.getBoundingClientRect();if(this.svg.setAttribute("width",String(A.width)),this.svg.setAttribute("height",String(A.height)),this.popupNodeId&&this.popupElement){const t=this.nodes.find(e=>e.id===this.popupNodeId);t&&this.updatePopupPosition(t)}}destroy(){this.nodeElements.clear(),this.edgeElements.clear(),this.container.contains(this.svg)&&this.container.removeChild(this.svg)}};ve.MAX_UNDO_LEVELS=50;let Se=ve;function lr(i,A=16){return XA(),`<svg width="${A}" height="${A}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <use href="#${i}"></use>
  </svg>`}class cr{constructor(A,t,e,s,n,o){this.viewer=null,this.Cesium=null,this.nodes=[],this.edges=[],this.selectedNodeId=null,this.lastSelectedNodeId=null,this.nodeEntities=new Map,this.edgeEntities=new Map,this.rectEntity=null,this.fitCenterButton=null,this.lightingToggleButton=null,this.alwaysShowEdgesButton=null,this.alwaysShowEdges=!0,this.tileTypeButton=null,this.baseImageryLayer=null,this.timeISO=null,this.customTileUrls=[],this.currentCustomTileIndex=0,this.popupElement=null,this.popupEntity=null,this.popupUpdateListener=null,this.container=A,this.onNodeClick=t,this.cesiumLoader=e,this.globe3dOptions=s,this.onEdgeClick=o;const a=n&&n.length>0?n:s?.customTileUrls;a&&a.length>0?this.customTileUrls=a.map(r=>typeof r=="string"?{url:r}:r):s?.customTileUrl&&(this.customTileUrls=[{url:s.customTileUrl}]),this.container.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"}async initializeCesium(){if(this.viewer)return;if(!this.cesiumLoader)throw new Error("Cesium loader is not provided. Please provide options.loaders.cesium.");const A=await this.cesiumLoader();this.Cesium=A.default||A;const t=new this.Cesium.EllipsoidTerrainProvider;this.Cesium.Ion&&(this.Cesium.Ion.defaultAccessToken=""),this.viewer=new this.Cesium.Viewer(this.container,{terrainProvider:t,baseLayerPicker:!1,animation:!1,timeline:!1,fullscreenButton:!1,vrButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,navigationHelpButton:!1,requestRenderMode:!1,contextOptions:{preserveDrawingBuffer:!0}}),this.viewer.canvas&&(this.viewer.canvas.style.touchAction="none"),this.Cesium.Moon?(this.viewer.scene.moon||(this.viewer.scene.moon=new this.Cesium.Moon),this.viewer.scene.moon.show=!0,this.viewer.scene.moon.onlySunLighting!==void 0&&(this.viewer.scene.moon.onlySunLighting=!1)):this.viewer.scene.moon&&(this.viewer.scene.moon.show=!0),this.viewer.scene.sun&&(this.viewer.scene.sun.show=!0);try{this.viewer.imageryLayers.removeAll()}catch{}this.setupCameraLimits(),this.setupTrackpadPinchZoom(),this.setTileTypeInternal(!0),this.setupTimeAndLighting(),this.setupClickHandler(),(this.nodes.length>0||this.edges.length>0)&&this.render(),this.onLightingChange&&this.isLightingEnabled()}setupTrackpadPinchZoom(){if(!this.viewer||!this.Cesium)return;const A=this.viewer.canvas,t=this.viewer.scene.camera,e=5e5,s=4e7,n=u=>{if(u.ctrlKey){u.preventDefault(),u.stopPropagation();const l=1-u.deltaY*.01,d=this.Cesium.Cartographic.fromCartesian(t.position);let f=d.height/l;f=Math.max(e,Math.min(s,f));const B=this.Cesium.Cartesian3.fromRadians(d.longitude,d.latitude,f);t.setView({destination:B,orientation:{heading:t.heading,pitch:t.pitch,roll:t.roll}})}};let o=1,a=0;const r=u=>{u.preventDefault(),o=u.scale||1,a=this.Cesium.Cartographic.fromCartesian(t.position).height},h=u=>{u.preventDefault();const d=(u.scale||1)/o;let g=a/d;g=Math.max(e,Math.min(s,g));const f=this.Cesium.Cartographic.fromCartesian(t.position),B=this.Cesium.Cartesian3.fromRadians(f.longitude,f.latitude,g);t.setView({destination:B,orientation:{heading:t.heading,pitch:t.pitch,roll:t.roll}})},c=u=>{u.preventDefault(),o=1,a=0};A.addEventListener("wheel",n,{passive:!1}),"GestureEvent"in window&&(A.addEventListener("gesturestart",r,{passive:!1}),A.addEventListener("gesturechange",h,{passive:!1}),A.addEventListener("gestureend",c,{passive:!1})),this._trackpadPinchHandlers={wheel:n,gestureStart:r,gestureChange:h,gestureEnd:c}}setupTimeAndLighting(){!this.viewer||this.Cesium}setTime(A){if(this.timeISO=A,!(!this.viewer||!this.Cesium))try{let t;A.startsWith("-")?t=this.parseBCDate(A):t=this.Cesium.JulianDate.fromIso8601(A),t&&(this.viewer.clock.currentTime=t,this.viewer.clock.startTime=t,this.viewer.clock.stopTime=t,this.viewer.clock.shouldAnimate=!1)}catch{}}parseBCDate(A){if(!this.Cesium)return null;try{const t=A.match(/^-(\d+)-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(Z|[+-]\d{2}:\d{2})?/);if(!t)throw new Error("Invalid BC date format");const e=`2000-${t[2]}-${t[3]}T${t[4]}:${t[5]}:${t[6]}${t[7]||"Z"}`;return this.Cesium.JulianDate.fromIso8601(e)}catch{return null}}setLighting(A){if(!this.viewer||!this.Cesium||this.isLightingEnabled()===A)return;const t=this.viewer.scene.globe;t.enableLighting=A,t.dynamicAtmosphereLighting=A,t.dynamicAtmosphereLightingFromSun=A,t.showGroundAtmosphere=!0,A?(t.lightingFadeOutDistance=0,t.lightingFadeInDistance=0,t.nightFadeInDistance=0,t.nightFadeOutDistance=0,this.baseImageryLayer&&(this.baseImageryLayer.nightAlpha=.9),this.viewer.scene.sun&&(this.viewer.scene.sun.show=!0),this.viewer.scene.moon?.onlySunLighting!==void 0&&(this.viewer.scene.moon.onlySunLighting=!0)):this.viewer.scene.moon?.onlySunLighting!==void 0&&(this.viewer.scene.moon.onlySunLighting=!1),this.updateLightingButton()}isLightingEnabled(){return this.viewer?this.viewer.scene.globe.enableLighting===!0:!1}getAlwaysShowEdges(){return this.alwaysShowEdges}setAlwaysShowEdges(A){this.alwaysShowEdges!==A&&(this.alwaysShowEdges=A,this.updateAlwaysShowEdgesButton(),this.renderWithoutFit())}getLightingEnabled(){return this.isLightingEnabled()}setLightingEnabled(A,t=!0){const e=this.isLightingEnabled();this.setLighting(A),t&&this.onLightingChange&&this.isLightingEnabled()!==e&&this.onLightingChange(this.isLightingEnabled())}setAlwaysShowEdgesChangeCallback(A){this.onAlwaysShowEdgesChange=A}setLightingChangeCallback(A){this.onLightingChange=A}getTileServerCount(){return this.customTileUrls.length}getTileServerIndex(){return this.currentCustomTileIndex}setTileServerIndex(A){if(this.customTileUrls.length===0)return;const t=this.customTileUrls.length,e=(A%t+t)%t;this.currentCustomTileIndex!==e&&(this.currentCustomTileIndex=e,this.viewer&&this.Cesium&&(this.setTileTypeInternal(!0),this.updateTileTypeButton()))}cycleTileServer(){this.switchTileType()}setupCameraLimits(){if(!this.viewer||!this.Cesium)return;const A=5e5,t=4e7,e=this.viewer.scene.screenSpaceCameraController;e.minimumZoomDistance=A,e.maximumZoomDistance=t,e.enableInputs=!0,e.enableZoom=!0,e.enableRotate=!0,e.enableTilt=!0,e.enableTranslate=!0;const s=this.Cesium.CameraEventType;e.zoomEventTypes=[s.WHEEL,s.PINCH],e.rotateEventTypes=s.LEFT_DRAG,e.tiltEventTypes=[{eventType:s.LEFT_DRAG,modifier:this.Cesium.KeyboardEventModifier.CTRL},{eventType:s.MIDDLE_DRAG}],e.translateEventTypes=[s.RIGHT_DRAG];let n=!1,o=!1;this.viewer.scene.camera.changed.addEventListener(()=>{if(n||o)return;const a=this.viewer.scene.camera,r=this.Cesium.Cartographic.fromCartesian(a.position),h=r.height;if(h<A||h>t){n=!0;const c=Math.max(A,Math.min(t,h)),u=this.Cesium.Cartesian3.fromRadians(r.longitude,r.latitude,c);a.setView({destination:u,orientation:a.orientation}),setTimeout(()=>{n=!1},0)}}),this._isFlying=()=>o,this._setIsFlying=a=>{o=a}}setupClickHandler(){if(!this.viewer||!this.Cesium)return;new this.Cesium.ScreenSpaceEventHandler(this.viewer.canvas).setInputAction(t=>{const e=this.viewer.scene.pick(t.position);if(e&&e.id&&e.id.nodeId){const n=e.id.nodeId,o=this.nodes.find(r=>r.id===n),a=this.nodeEntities.get(n);if(o&&a&&(this.showPopup(a,o),this.onNodeClick)){const r=this.viewer.camera.pickEllipsoid(t.position,this.viewer.scene.globe.ellipsoid);if(r){const h=this.Cesium.Cartographic.fromCartesian(r),c=this.Cesium.Math.toDegrees(h.longitude),u=this.Cesium.Math.toDegrees(h.latitude);this.onNodeClick({node:o,position:{x:c,y:u},originalEvent:t.originalEvent})}}return}const s=this.viewer.scene.drillPick(t.position);for(const n of s)if(n.id&&n.id.nodeId){const o=n.id.nodeId,a=this.nodes.find(h=>h.id===o),r=this.nodeEntities.get(o);if(a&&r&&(this.showPopup(r,a),this.onNodeClick)){const h=this.viewer.camera.pickEllipsoid(t.position,this.viewer.scene.globe.ellipsoid);if(h){const c=this.Cesium.Cartographic.fromCartesian(h),u=this.Cesium.Math.toDegrees(c.longitude),l=this.Cesium.Math.toDegrees(c.latitude);this.onNodeClick({node:a,position:{x:u,y:l},originalEvent:t.originalEvent})}}return}s.length===0&&this.hidePopup();for(const n of s)if(n.id&&n.id.edgeId){const o=n.id.edgeId,a=this.edges.find(r=>r.id===o);if(a&&this.onEdgeClick){const r=this.viewer.camera.pickEllipsoid(t.position,this.viewer.scene.globe.ellipsoid);if(r){const h=this.Cesium.Cartographic.fromCartesian(r),c=this.Cesium.Math.toDegrees(h.longitude),u=this.Cesium.Math.toDegrees(h.latitude);this.onEdgeClick({edge:a,position:{x:c,y:u},originalEvent:t.originalEvent})}}return}!e&&(!s||s.length===0)&&this.hidePopup()},this.Cesium.ScreenSpaceEventType.LEFT_CLICK)}setData(A,t){this.nodes=A,this.edges=t,this.viewer&&this.Cesium&&this.render()}selectNode(A){if(!A){this.selectedNodeId=null,this.lastSelectedNodeId=null,this.hidePopup(),this.render();return}if(!this.viewer||!this.Cesium)return;if(A===this.lastSelectedNodeId){this.lastSelectedNodeId=null,this.nodeEntities.size>0&&this.updateNodeSelection(),this.fitToNodes();return}this.lastSelectedNodeId=A,this.selectedNodeId=A,this.nodeEntities.size>0?this.updateNodeSelection():this.render();const t=this.nodes.find(s=>s.id===A);if(!t)return;if(t.coordinates&&t.coordinates.length===2){const[s,n]=t.coordinates;if(Number.isFinite(s)&&Number.isFinite(n)){const[o,a]=t.coordinates,r=3e6,h=this.nodeEntities.get(A);h&&t&&this.showPopup(h,t);const c=this._setIsFlying;c&&c(!0),setTimeout(()=>{this.viewer.camera.flyTo({destination:this.Cesium.Cartesian3.fromDegrees(a,o,r),orientation:{heading:this.Cesium.Math.toRadians(0),pitch:this.Cesium.Math.toRadians(-90),roll:0},duration:1,complete:()=>{c&&c(!1)}})},0);return}}const e=this.nodes.filter(s=>{if(!s.coordinates||!Array.isArray(s.coordinates)||s.coordinates.length!==2)return!0;const[n,o]=s.coordinates;return!Number.isFinite(n)||!Number.isFinite(o)});if(e.length>0){const r=Math.ceil(Math.sqrt(e.length)),c=50/(Math.ceil(e.length/r)+1),u=32/(r+1),l=e.findIndex(d=>d.id===A);if(l>=0){const d=Math.floor(l/r),g=l%r,f=-50+(d+1)*c,B=-32+(g+1)*u,w=3e6,p=this.nodeEntities.get(A);p&&t&&this.showPopup(p,t);const C=this._setIsFlying;C&&C(!0),setTimeout(()=>{this.viewer.camera.flyTo({destination:this.Cesium.Cartesian3.fromDegrees(B,f,w),orientation:{heading:this.Cesium.Math.toRadians(0),pitch:this.Cesium.Math.toRadians(-90),roll:0},duration:1,complete:()=>{C&&C(!1)}})},0)}}}render(){if(!this.viewer||!this.Cesium)return;this.viewer.entities.removeAll(),this.nodeEntities.clear(),this.edgeEntities.clear(),this.rectEntity=null;const A=this.nodes.filter(s=>{if(!s.coordinates||!Array.isArray(s.coordinates)||s.coordinates.length!==2)return!0;const[n,o]=s.coordinates;return!Number.isFinite(n)||!Number.isFinite(o)}),t=this.nodes.filter(s=>{if(!s.coordinates||!Array.isArray(s.coordinates)||s.coordinates.length!==2)return!1;const[n,o]=s.coordinates;return Number.isFinite(n)&&Number.isFinite(o)}),e=new Map;if(A.length>0){const r=[this.Cesium.Cartesian3.fromDegrees(-32,-50,0),this.Cesium.Cartesian3.fromDegrees(0,-50,0),this.Cesium.Cartesian3.fromDegrees(0,0,0),this.Cesium.Cartesian3.fromDegrees(-32,0,0)];this.rectEntity=this.viewer.entities.add({polygon:{hierarchy:r,material:this.Cesium.Color.fromCssColorString("#f0f0f0").withAlpha(.1),outline:!0,outlineColor:this.Cesium.Color.fromCssColorString("#666"),height:0}});const h=Math.ceil(Math.sqrt(A.length)),u=50/(Math.ceil(A.length/h)+1),l=32/(h+1);A.forEach((d,g)=>{const f=Math.floor(g/h),B=g%h,w=-50+(f+1)*u,p=-32+(B+1)*l;e.set(d.id,[w,p]);const C=this.selectedNodeId===d.id,y=d.style?.color||"#ffffff",U=C?"#2196f3":d.style?.borderColor||"#333333";let Q;const E=y.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);if(E){const v=parseInt(E[1],16)/255,H=parseInt(E[2],16)/255,b=parseInt(E[3],16)/255;Q=new this.Cesium.Color(v,H,b,1)}else Q=this.Cesium.Color.fromCssColorString(y),Q=Q.withAlpha(1);const F=this.Cesium.Color.fromCssColorString(U),m=this.viewer.entities.add({position:this.Cesium.Cartesian3.fromDegrees(p,w,0),point:{pixelSize:C?15:10,color:Q,outlineColor:F,outlineWidth:2,heightReference:this.Cesium.HeightReference.CLAMP_TO_GROUND},label:{text:d.label,font:"14px sans-serif",fillColor:this.Cesium.Color.WHITE,outlineColor:this.Cesium.Color.BLACK,outlineWidth:2,style:this.Cesium.LabelStyle.FILL_AND_OUTLINE,verticalOrigin:this.Cesium.VerticalOrigin.BOTTOM,pixelOffset:new this.Cesium.Cartesian2(0,-20),heightReference:this.Cesium.HeightReference.CLAMP_TO_GROUND,show:!1},nodeId:d.id});this.nodeEntities.set(d.id,m)})}for(const s of t){const[n,o]=s.coordinates;e.set(s.id,[n,o]);const a=this.selectedNodeId===s.id,r=s.style?.color||"#ffffff",h=a?"#2196f3":s.style?.borderColor||"#333333";let c;const u=r.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);if(u){const g=parseInt(u[1],16)/255,f=parseInt(u[2],16)/255,B=parseInt(u[3],16)/255;c=new this.Cesium.Color(g,f,B,1)}else c=this.Cesium.Color.fromCssColorString(r),c=c.withAlpha(1);const l=this.Cesium.Color.fromCssColorString(h),d=this.viewer.entities.add({position:this.Cesium.Cartesian3.fromDegrees(o,n,0),point:{pixelSize:a?15:10,color:c,outlineColor:l,outlineWidth:2,heightReference:this.Cesium.HeightReference.CLAMP_TO_GROUND},label:{text:s.label,font:"14px sans-serif",fillColor:this.Cesium.Color.WHITE,outlineColor:this.Cesium.Color.BLACK,outlineWidth:2,style:this.Cesium.LabelStyle.FILL_AND_OUTLINE,verticalOrigin:this.Cesium.VerticalOrigin.BOTTOM,pixelOffset:new this.Cesium.Cartesian2(0,-20),heightReference:this.Cesium.HeightReference.CLAMP_TO_GROUND,show:!1},nodeId:s.id});this.nodeEntities.set(s.id,d)}if(this.alwaysShowEdges)for(const s of this.edges){const n=e.get(s.src),o=e.get(s.dst);if(!n||!o)continue;const[a,r]=n,[h,c]=o,u=s.style?.color||"#999999",l=s.style?.weight||1,d=Math.max(1,Math.min(5,l)),g=this.viewer.entities.add({polyline:{positions:[this.Cesium.Cartesian3.fromDegrees(r,a,0),this.Cesium.Cartesian3.fromDegrees(c,h,0)],width:d,material:this.Cesium.Color.fromCssColorString(u),clampToGround:!0},edgeId:s.id});this.edgeEntities.set(s.id,g)}this.fitToNodes()}updateNodeSelection(){if(!(!this.viewer||!this.Cesium))for(const[A,t]of this.nodeEntities.entries()){const e=this.nodes.find(a=>a.id===A);if(!e)continue;const s=this.selectedNodeId===A,n=e.style?.color||"#ffffff",o=s?"#2196f3":e.style?.borderColor||"#333333";if(t.point){t.point.pixelSize=s?15:10;let a;const r=n.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);if(r){const h=parseInt(r[1],16)/255,c=parseInt(r[2],16)/255,u=parseInt(r[3],16)/255;a=new this.Cesium.Color(h,c,u,1)}else a=this.Cesium.Color.fromCssColorString(n),a=a.withAlpha(1);t.point.color=a,t.point.outlineColor=this.Cesium.Color.fromCssColorString(o)}}}renderWithoutFit(){if(!this.viewer||!this.Cesium)return;this.viewer.entities.removeAll(),this.nodeEntities.clear(),this.edgeEntities.clear(),this.rectEntity=null;const A=this.nodes.filter(s=>{if(!s.coordinates||!Array.isArray(s.coordinates)||s.coordinates.length!==2)return!0;const[n,o]=s.coordinates;return!Number.isFinite(n)||!Number.isFinite(o)}),t=this.nodes.filter(s=>{if(!s.coordinates||!Array.isArray(s.coordinates)||s.coordinates.length!==2)return!1;const[n,o]=s.coordinates;return Number.isFinite(n)&&Number.isFinite(o)}),e=new Map;if(A.length>0){const r=[this.Cesium.Cartesian3.fromDegrees(-32,-50,0),this.Cesium.Cartesian3.fromDegrees(0,-50,0),this.Cesium.Cartesian3.fromDegrees(0,0,0),this.Cesium.Cartesian3.fromDegrees(-32,0,0)];this.rectEntity=this.viewer.entities.add({polygon:{hierarchy:r,material:this.Cesium.Color.fromCssColorString("#f0f0f0").withAlpha(.1),outline:!0,outlineColor:this.Cesium.Color.fromCssColorString("#666"),height:0}});const h=Math.ceil(Math.sqrt(A.length)),u=50/(Math.ceil(A.length/h)+1),l=32/(h+1);A.forEach((d,g)=>{const f=Math.floor(g/h),B=g%h,w=-50+(f+1)*u,p=-32+(B+1)*l;e.set(d.id,[w,p]);const C=this.selectedNodeId===d.id,y=d.style?.color||"#ffffff",U=C?"#2196f3":d.style?.borderColor||"#333333";let Q;const E=y.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);if(E){const v=parseInt(E[1],16)/255,H=parseInt(E[2],16)/255,b=parseInt(E[3],16)/255;Q=new this.Cesium.Color(v,H,b,1)}else Q=this.Cesium.Color.fromCssColorString(y),Q=Q.withAlpha(1);const F=this.Cesium.Color.fromCssColorString(U),m=this.viewer.entities.add({position:this.Cesium.Cartesian3.fromDegrees(p,w,0),point:{pixelSize:C?15:10,color:Q,outlineColor:F,outlineWidth:2,heightReference:this.Cesium.HeightReference.CLAMP_TO_GROUND},label:{text:d.label,font:"14px sans-serif",fillColor:this.Cesium.Color.WHITE,outlineColor:this.Cesium.Color.BLACK,outlineWidth:2,style:this.Cesium.LabelStyle.FILL_AND_OUTLINE,verticalOrigin:this.Cesium.VerticalOrigin.BOTTOM,pixelOffset:new this.Cesium.Cartesian2(0,-20),heightReference:this.Cesium.HeightReference.CLAMP_TO_GROUND,show:!1},nodeId:d.id});this.nodeEntities.set(d.id,m)})}for(const s of t){const[n,o]=s.coordinates;e.set(s.id,[n,o]);const a=this.selectedNodeId===s.id,r=s.style?.color||"#ffffff",h=a?"#2196f3":s.style?.borderColor||"#333333";let c;const u=r.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);if(u){const g=parseInt(u[1],16)/255,f=parseInt(u[2],16)/255,B=parseInt(u[3],16)/255;c=new this.Cesium.Color(g,f,B,1)}else c=this.Cesium.Color.fromCssColorString(r),c=c.withAlpha(1);const l=this.Cesium.Color.fromCssColorString(h),d=this.viewer.entities.add({position:this.Cesium.Cartesian3.fromDegrees(o,n,0),point:{pixelSize:a?15:10,color:c,outlineColor:l,outlineWidth:2,heightReference:this.Cesium.HeightReference.CLAMP_TO_GROUND},label:{text:s.label,font:"14px sans-serif",fillColor:this.Cesium.Color.WHITE,outlineColor:this.Cesium.Color.BLACK,outlineWidth:2,style:this.Cesium.LabelStyle.FILL_AND_OUTLINE,verticalOrigin:this.Cesium.VerticalOrigin.BOTTOM,pixelOffset:new this.Cesium.Cartesian2(0,-20),heightReference:this.Cesium.HeightReference.CLAMP_TO_GROUND,show:!1},nodeId:s.id});this.nodeEntities.set(s.id,d)}if(this.alwaysShowEdges)for(const s of this.edges){const n=e.get(s.src),o=e.get(s.dst);if(!n||!o)continue;const[a,r]=n,[h,c]=o,u=s.style?.color||"#999999",l=s.style?.weight||1,d=Math.max(1,Math.min(5,l)),g=this.viewer.entities.add({polyline:{positions:[this.Cesium.Cartesian3.fromDegrees(r,a,0),this.Cesium.Cartesian3.fromDegrees(c,h,0)],width:d,material:this.Cesium.Color.fromCssColorString(u),clampToGround:!0},edgeId:s.id});this.edgeEntities.set(s.id,g)}}switchTileType(){if(!(!this.viewer||!this.Cesium)&&this.customTileUrls.length>1){this.currentCustomTileIndex=(this.currentCustomTileIndex+1)%this.customTileUrls.length,this.setTileTypeInternal(!0),this.updateTileTypeButton();return}}setTileTypeInternal(A=!1){if(!this.viewer||!this.Cesium)return;const t=(a,r,h,c=!1)=>{const u=d=>String(d).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),l=`<a href="${u(h)}" target="_blank" rel="noopener noreferrer">${u(r)}</a>`;return new a.Credit(l,c)};if(this.baseImageryLayer)try{this.viewer.imageryLayers.remove(this.baseImageryLayer)}catch{}if(this.customTileUrls.length>0){const a=this.customTileUrls[this.currentCustomTileIndex],r=a.url.includes("NaturalEarthII"),h=a.maximumLevel??(r?2:19);let c;if(a.credit){const d=a.credit;d.href?c=t(this.Cesium,d.label,d.href,d.showOnScreen??!1):c=new this.Cesium.Credit(d.label,d.showOnScreen??!1)}else c=new this.Cesium.Credit(`Custom tile server (${this.currentCustomTileIndex+1}/${this.customTileUrls.length})`);const u={url:a.url,maximumLevel:h,credit:c};r&&this.Cesium?.GeographicTilingScheme&&(u.tilingScheme=new this.Cesium.GeographicTilingScheme);const l=new this.Cesium.UrlTemplateImageryProvider(u);this.baseImageryLayer=this.viewer.imageryLayers.addImageryProvider(l,0),this.updateTileTypeButton();return}const e=new this.Cesium.Credit(" NASA",!0),s=new this.Cesium.GeographicTilingScheme({rectangle:this.Cesium.Rectangle.fromDegrees(-180,-90,180,90),numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1}),n="/cesium/Assets/Textures/NaturalEarthII/{z}/{x}/{reverseY}.jpg",o=new this.Cesium.UrlTemplateImageryProvider({url:n,maximumLevel:2,tilingScheme:s,credit:e,customTags:{reverseY:(a,r,h,c)=>{const l=Math.pow(2,c)-1-h;return String(l)}}});this.baseImageryLayer=this.viewer.imageryLayers.addImageryProvider(o,0),this.updateTileTypeButton()}updateTileTypeButton(){if(this.tileTypeButton){if(this.customTileUrls.length>1){this.tileTypeButton.style.display="flex";const A=this.currentCustomTileIndex+1,t=this.customTileUrls.length;this.tileTypeButton.setAttribute("title",`Custom tile ${A}/${t}`),this.tileTypeButton.style.backgroundColor="#fff",this.tileTypeButton.style.borderColor="#ccc",this.tileTypeButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.tileTypeButton.style.transform="translateY(0)";return}if(this.customTileUrls.length>0){this.tileTypeButton.style.display="none";return}this.tileTypeButton.style.display="none"}}updateAlwaysShowEdgesButton(){this.alwaysShowEdgesButton&&(this.alwaysShowEdges?(this.alwaysShowEdgesButton.setAttribute("aria-label","Hide edges"),this.alwaysShowEdgesButton.setAttribute("title","Hide edges"),this.alwaysShowEdgesButton.style.backgroundColor="#fff9c4",this.alwaysShowEdgesButton.style.color="#000000",this.alwaysShowEdgesButton.style.borderColor="#999",this.alwaysShowEdgesButton.style.boxShadow="inset 0 2px 4px rgba(0, 0, 0, 0.2)",this.alwaysShowEdgesButton.style.transform="translateY(1px)"):(this.alwaysShowEdgesButton.setAttribute("aria-label","Show edges"),this.alwaysShowEdgesButton.setAttribute("title","Show edges"),this.alwaysShowEdgesButton.style.backgroundColor="#fff",this.alwaysShowEdgesButton.style.color="#000000",this.alwaysShowEdgesButton.style.borderColor="#ccc",this.alwaysShowEdgesButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.alwaysShowEdgesButton.style.transform="translateY(0)"))}updateLightingButton(){if(!this.lightingToggleButton)return;const A=this.isLightingEnabled();this.lightingToggleButton.innerHTML=lr("icon-sun",16),A?(this.lightingToggleButton.style.backgroundColor="#fff9c4",this.lightingToggleButton.style.boxShadow="inset 0 2px 4px rgba(0, 0, 0, 0.2)",this.lightingToggleButton.style.transform="translateY(1px)"):(this.lightingToggleButton.style.backgroundColor="#fff",this.lightingToggleButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.lightingToggleButton.style.transform="translateY(0)"),this.lightingToggleButton.style.color="#333"}fitAndCenter(){this.fitToNodes()}fitToNodes(){if(!this.viewer||!this.Cesium||this.nodes.length===0)return;const A=this.nodes.filter(y=>{if(!y.coordinates||!Array.isArray(y.coordinates)||y.coordinates.length!==2)return!1;const[U,Q]=y.coordinates;return Number.isFinite(U)&&Number.isFinite(Q)}),t=this.nodes.filter(y=>{if(!y.coordinates||!Array.isArray(y.coordinates)||y.coordinates.length!==2)return!0;const[U,Q]=y.coordinates;return!Number.isFinite(U)||!Number.isFinite(Q)}),e=[],s=[];if(A.forEach(y=>{if(y.coordinates&&y.coordinates.length===2){const[U,Q]=y.coordinates;Number.isFinite(U)&&Number.isFinite(Q)&&(e.push(U),s.push(Q))}}),t.length>0){const F=Math.ceil(Math.sqrt(t.length)),v=50/(Math.ceil(t.length/F)+1),H=32/(F+1);t.forEach((b,I)=>{const T=Math.floor(I/F),D=I%F,S=-50+(T+1)*v,M=-32+(D+1)*H;e.push(S),s.push(M)})}if(e.length===0)return;const n=Math.min(...e),o=Math.max(...e),a=Math.min(...s),r=Math.max(...s),h=(n+o)/2,c=(a+r)/2,u=o-n,l=r-a,d=Math.max(u,l),g=Math.max(1e6,d*111e3*2),w=Math.max(5e5,Math.min(4e7,g)),p=()=>new Promise(y=>{if(!this.baseImageryLayer){y();return}if(this.baseImageryLayer.imageryProvider&&this.baseImageryLayer.imageryProvider.ready){y();return}const U=setTimeout(()=>{y()},2e3);this.baseImageryLayer.imageryProvider&&this.baseImageryLayer.imageryProvider.readyPromise?this.baseImageryLayer.imageryProvider.readyPromise.then(()=>{clearTimeout(U),y()}).catch(()=>{clearTimeout(U),y()}):(clearTimeout(U),y())}),C=this._setIsFlying;C&&C(!0),p().then(()=>{this.viewer.camera.flyTo({destination:this.Cesium.Cartesian3.fromDegrees(c,h,w),orientation:{heading:0,pitch:this.Cesium.Math.toRadians(-90),roll:0},duration:1,complete:()=>{C&&C(!1);const y=this.viewer.scene.camera,U=this.Cesium.Cartographic.fromCartesian(y.position),Q=U.height,E=5e5,F=4e7;if(Q<E||Q>F){const m=Math.max(E,Math.min(F,Q)),v=this.Cesium.Cartesian3.fromRadians(U.longitude,U.latitude,m);y.setView({destination:v,orientation:y.orientation})}}})})}show(){this.container.style.display="block",this.viewer?this.viewer.resize():this.cesiumLoader&&this.initializeCesium().catch(()=>{})}hide(){this.container.style.display="none"}resize(){this.viewer&&this.viewer.resize()}destroy(){if(this.hidePopup(),this.popupElement&&this.popupElement.parentNode&&(this.popupElement.parentNode.removeChild(this.popupElement),this.popupElement=null),this.viewer&&this._trackpadPinchHandlers){const A=this.viewer.canvas,t=this._trackpadPinchHandlers;t.wheel&&A.removeEventListener("wheel",t.wheel),"GestureEvent"in window&&(t.gestureStart&&A.removeEventListener("gesturestart",t.gestureStart),t.gestureChange&&A.removeEventListener("gesturechange",t.gestureChange),t.gestureEnd&&A.removeEventListener("gestureend",t.gestureEnd)),this._trackpadPinchHandlers=null}this.viewer&&(this.viewer.destroy(),this.viewer=null),this.nodeEntities.clear(),this.edgeEntities.clear()}createPopup(){const A=document.createElement("div");A.className="relatos-globe3d-popup",A.style.cssText=`
      position: absolute;
      background: white;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 8px 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      pointer-events: none;
      z-index: 10000;
      font-size: 14px;
      line-height: 1.4;
      max-width: 200px;
      word-wrap: break-word;
      overflow-wrap: break-word;
      white-space: normal;
      opacity: 0;
      transition: opacity 0.2s;
    `;const t=document.createElement("div");return t.style.cssText=`
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 8px solid transparent;
      border-right: 8px solid transparent;
      border-top: 8px solid white;
    `,A.appendChild(t),this.container.appendChild(A),A}showPopup(A,t){if(!(!this.viewer||!this.Cesium||!A)&&(this.hidePopup(),this.popupElement||(this.popupElement=this.createPopup()),this.popupElement.textContent=t.label,this.popupElement.style.opacity="1",this.popupEntity=A,this.updatePopupPosition(),!this.popupUpdateListener)){const e=()=>{this.popupEntity&&this.popupElement&&this.updatePopupPosition()};this.viewer.scene.postRender.addEventListener(e),this.popupUpdateListener=()=>{this.viewer?.scene.postRender.removeEventListener(e)}}}hidePopup(){this.popupElement&&(this.popupElement.style.opacity="0",setTimeout(()=>{this.popupElement&&this.popupElement.style.opacity==="0"&&(this.popupElement.style.display="none")},200)),this.popupEntity=null,this.popupUpdateListener&&(this.popupUpdateListener(),this.popupUpdateListener=null)}updatePopupPosition(){if(!this.viewer||!this.Cesium||!this.popupEntity||!this.popupElement)return;const A=this.popupEntity.position?.getValue(this.viewer.clock.currentTime);if(!A)return;let t=null;if(this.Cesium.SceneTransforms?.worldToWindowCoordinates?t=this.Cesium.SceneTransforms.worldToWindowCoordinates(this.viewer.scene,A):this.Cesium.SceneTransforms?.wgs84ToWindowCoordinates?t=this.Cesium.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,A):t=this.viewer.camera.project(A),!t){this.popupElement.style.display="none";return}let e=1;const s=this.container.getBoundingClientRect(),n=this.container.offsetWidth;n>0&&s.width>0&&(e=s.width/n);const o=t.x/e,a=t.y/e;this.popupElement.style.display="block";const r=o-this.popupElement.offsetWidth/2,h=a-this.popupElement.offsetHeight-15;this.popupElement.style.left=`${r}px`,this.popupElement.style.top=`${h}px`}getViewAsSvg(){return null}async exportViewToImage(A,t){return null}isEditable(){return!1}}function hr(i,A=16){return XA(),`<svg width="${A}" height="${A}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <use href="#${i}"></use>
  </svg>`}class ur{constructor(A,t,e,s,n,o){this.map=null,this.Leaflet=null,this.nodes=[],this.edges=[],this.selectedNodeId=null,this.lastSelectedNodeId=null,this.markers=new Map,this.polylines=new Map,this.rectLayer=null,this.fitCenterButton=null,this.lightingToggleButton=null,this.alwaysShowEdgesButton=null,this.alwaysShowEdges=!0,this.tileTypeButton=null,this.baseTileLayer=null,this.nightShadeLayer=null,this.nightShadeDebugLayer=null,this.lightingEnabled=!1,this.timeISO=null,this.moonToggleButton=null,this.moonEnabled=!1,this.moonMarker=null,this.customTileUrls=[],this.currentCustomTileIndex=0,this.container=A,this.onNodeClick=t,this.leafletLoader=e,this.map2dOptions=n,this.onEdgeClick=o;const a=s&&s.length>0?s:n?.customTileUrls;a&&a.length>0?this.customTileUrls=a.map(r=>typeof r=="string"?{url:r}:r):n?.customTileUrl&&(this.customTileUrls=[{url:n.customTileUrl}]),this.container.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"}async initializeLeaflet(){if(this.map)return;if(!this.leafletLoader)throw new Error("Leaflet loader is not provided. Please provide options.loaders.leaflet.");const A=await this.leafletLoader();this.Leaflet=A.default||A;const t=this.map2dOptions?.center||[0,0],e=this.map2dOptions?.zoom||2;let s=5;if(this.customTileUrls.length>0){const o=this.customTileUrls.map(a=>a.maxZoom??a.maximumLevel??19);s=Math.min(...o)}const n={center:t,zoom:e,zoomControl:!1,attributionControl:!0,maxZoom:s};this.customTileUrls.length===0&&(n.crs=this.Leaflet.CRS.EPSG4326),this.map=this.Leaflet.map(this.container,n),this.setupBaseTileLayer(),this.setupTimeAndLighting(),this.lightingEnabled&&this.updateNightShade(),this.moonEnabled&&this.updateMoonMarker(),this.setupClickHandler(),(this.nodes.length>0||this.edges.length>0)&&this.render()}setupBaseTileLayer(){if(!this.map||!this.Leaflet)return;this.baseTileLayer&&this.map.removeLayer(this.baseTileLayer);let A;if(this.customTileUrls.length>0){const s=this.customTileUrls[this.currentCustomTileIndex],n=s.maxZoom??s.maximumLevel??19,o=s.tms??!1,a=s.attribution??`Custom tile server (${this.currentCustomTileIndex+1}/${this.customTileUrls.length})`;A=this.Leaflet.tileLayer(s.url,{maxZoom:n,tms:o,attribution:a}),A.addTo(this.map),this.baseTileLayer=A;return}const t="/cesium/Assets/Textures/NaturalEarthII/{z}/{x}/{y}.jpg",e=this.Leaflet.latLngBounds([[-90,-180],[90,180]]);A=this.Leaflet.tileLayer(t,{minZoom:0,maxNativeZoom:2,tms:!0,bounds:e,noWrap:!0,continuousWorld:!1,attribution:" NASA"}),A.addTo(this.map),this.baseTileLayer=A}setupTimeAndLighting(){!this.map||this.Leaflet}setTime(A){this.timeISO=A,this.lightingEnabled&&this.updateNightShade(),this.updateMoonButton(),this.moonEnabled&&this.updateMoonMarker()}setLighting(A){if(this.lightingEnabled!==A){if(this.lightingEnabled=A,!this.map||!this.Leaflet){this.updateLightingButton();return}A?this.updateNightShade():(this.nightShadeLayer&&(this.map.removeLayer(this.nightShadeLayer),this.nightShadeLayer=null),this.nightShadeDebugLayer&&(this.map.removeLayer(this.nightShadeDebugLayer),this.nightShadeDebugLayer=null)),this.updateLightingButton()}}isLightingEnabled(){return this.lightingEnabled}getAlwaysShowEdges(){return this.alwaysShowEdges}setAlwaysShowEdges(A){this.alwaysShowEdges!==A&&(this.alwaysShowEdges=A,this.updateAlwaysShowEdgesButton(),this.renderWithoutFit())}getLightingEnabled(){return this.isLightingEnabled()}setLightingEnabled(A,t=!0){const e=this.lightingEnabled;this.setLighting(A),t&&this.onLightingChange&&this.lightingEnabled!==e&&this.onLightingChange(this.lightingEnabled)}setAlwaysShowEdgesChangeCallback(A){this.onAlwaysShowEdgesChange=A}setLightingChangeCallback(A){this.onLightingChange=A}getTileServerCount(){return this.customTileUrls.length}getTileServerIndex(){return this.currentCustomTileIndex}setTileServerIndex(A){if(this.customTileUrls.length===0)return;const t=this.customTileUrls.length,e=(A%t+t)%t;this.currentCustomTileIndex!==e&&(this.currentCustomTileIndex=e,this.map&&this.Leaflet&&(this.setupBaseTileLayer(),this.updateTileTypeButton()))}cycleTileServer(){this.switchTileType()}updateNightShade(){if(!this.map||!this.Leaflet||(this.nightShadeLayer&&(this.map.removeLayer(this.nightShadeLayer),this.nightShadeLayer=null),this.nightShadeDebugLayer&&(this.map.removeLayer(this.nightShadeDebugLayer),this.nightShadeDebugLayer=null),!this.lightingEnabled))return;const A=this.timeISO||new Date().toISOString(),s=this.calculateTerminatorBoundary(A,720,2);if(!s||s.length===0)return;const n=this.unwrapLongitudes(s);let o=n.map(d=>[d.lat,d.lng]);o.length>0&&(o[0][0]!==o[o.length-1][0]||o[0][1]!==o[o.length-1][1])&&o.push([o[0][0],o[0][1]]);const a=o.map(([d,g])=>({lat:d,lng:g}));this.isCounterClockwise(a)&&o.reverse();const h=o.map(([d,g])=>({lat:d,lng:g}));if(this.isCounterClockwise(h)){o.reverse();const d=o.map(([g,f])=>({lat:g,lng:f}));this.isCounterClockwise(d)}const u=n.map(d=>[d.lat,d.lng]);u.length>0&&(u[0][0]!==u[u.length-1][0]||u[0][1]!==u[u.length-1][1])&&u.push([u[0][0],u[0][1]]);const l=this.Leaflet.polygon(u,{fillColor:"#000000",fillOpacity:.3,color:"#000000",weight:0,interactive:!1});if(l.addTo(this.map),this.nightShadeLayer=l,this.map2dOptions?.debugNightShading){const d=this.Leaflet.polyline(o,{color:"#ff0000",weight:2,opacity:.8,interactive:!1});d.addTo(this.map),this.nightShadeDebugLayer=d}}isCounterClockwise(A){if(A.length<3)return!1;let t=0;for(let e=0;e<A.length-1;e++){const s=A[e],n=A[e+1];t+=(n.lng-s.lng)*(n.lat+s.lat)}return t>0}unwrapLongitudes(A){if(A.length===0)return A;const t=[{...A[0]}];for(let e=1;e<A.length;e++){let{lat:s,lng:n}=A[e];const o=t[e-1].lng;for(;n-o>180;)n-=360;for(;n-o<-180;)n+=360;t.push({lat:s,lng:n})}return t}julian(A){return A.getTime()/864e5+24405875e-1}GMST(A){return(18.697374558+24.06570982441908*(A-2451545))%24}sunEclipticPosition(A){const t=A-2451545;let e=280.46+.9856474*t;e=(e%360+360)%360;let s=357.528+.9856003*t;s=(s%360+360)%360;const n=Math.PI/180,o=e+1.915*Math.sin(s*n)+.02*Math.sin(2*s*n),a=1.00014-.01671*Math.cos(s*n)-.0014*Math.cos(2*s*n);return{lambda:o,R:a}}eclipticObliquity(A){const e=(A-2451545)/36525;return 23.43929111-e*(46.836769/3600-e*(1831e-7/3600+e*(.0020034/3600-e*(576e-9/3600-e*434e-10/3600))))}sunEquatorialPosition(A,t){const e=Math.PI/180,s=180/Math.PI,n=Math.atan(Math.cos(t*e)*Math.tan(A*e))*s,o=Math.asin(Math.sin(t*e)*Math.sin(A*e))*s,a=Math.floor(A/90)*90,r=Math.floor(n/90)*90;return{alpha:n+(a-r),delta:o}}hourAngle(A,t,e){return(e+A/15)*15-t.alpha}terminatorLatitude(A,t){const e=Math.PI/180,s=180/Math.PI;return Math.atan(-Math.cos(A*e)/Math.tan(t.delta*e))*s}calculateTerminatorBoundary(A,t=720,e=2){try{let s;if(A.startsWith("-")){if(s=new Date(A),isNaN(s.getTime()))return null}else if(s=new Date(A),isNaN(s.getTime()))return null;const n=this.julian(s),o=this.GMST(n),a=this.sunEclipticPosition(n),r=this.eclipticObliquity(n),h=this.sunEquatorialPosition(a.lambda,r),c=[];for(let u=0;u<=t*e;u++){const l=-t/2+u/e,d=this.hourAngle(l,h,o),g=this.terminatorLatitude(d,h);c.push({lat:g,lng:l})}return h.delta<0?(c.unshift({lat:90,lng:-t/2}),c.push({lat:90,lng:t/2})):(c.unshift({lat:-90,lng:-t/2}),c.push({lat:-90,lng:t/2})),c.length>0?c:null}catch{return null}}getDayOfYear(A){const t=new Date(A.getFullYear(),0,0),e=A.getTime()-t.getTime(),s=1e3*60*60*24;return Math.floor(e/s)}calculateSolarDeclination(A){return 23.45*Math.PI/180*Math.sin(2*Math.PI*(284+A)/365)*180/Math.PI}setupClickHandler(){!this.map||!this.Leaflet||this.map.on("click",A=>{})}setData(A,t){this.nodes=A,this.edges=t,this.map&&this.Leaflet&&this.render()}selectNode(A){if(!A){this.selectedNodeId=null,this.lastSelectedNodeId=null,this.renderWithoutFit();return}if(!this.map||!this.Leaflet)return;if(A===this.lastSelectedNodeId){this.lastSelectedNodeId=null,this.fitToNodes();return}this.lastSelectedNodeId=A,this.selectedNodeId=A;const t=this.nodes.find(s=>s.id===A);if(!t)return;if(t.coordinates&&t.coordinates.length===2){const[s,n]=t.coordinates;if(Number.isFinite(s)&&Number.isFinite(n)){const[o,a]=t.coordinates;this.renderWithoutFit(),this.map.flyTo([o,a],4,{duration:1,easeLinearity:.25});const r=()=>{const h=this.markers.get(A);h&&h.openPopup(),this.map.off("moveend",r)};this.map.once("moveend",r);return}}const e=this.nodes.filter(s=>{if(!s.coordinates||!Array.isArray(s.coordinates)||s.coordinates.length!==2)return!0;const[n,o]=s.coordinates;return!Number.isFinite(n)||!Number.isFinite(o)});if(e.length>0){const r=Math.ceil(Math.sqrt(e.length)),c=50/(Math.ceil(e.length/r)+1),u=32/(r+1),l=e.findIndex(d=>d.id===A);if(l>=0){const d=Math.floor(l/r),g=l%r,f=-50+(d+1)*c,B=-32+(g+1)*u;this.renderWithoutFit(),this.map.flyTo([f,B],4,{duration:1,easeLinearity:.25});const w=()=>{const p=this.markers.get(A);p&&p.openPopup(),this.map.off("moveend",w)};this.map.once("moveend",w)}}else this.renderWithoutFit()}render(){if(!this.map||!this.Leaflet)return;this.markers.forEach(n=>{this.map.removeLayer(n)}),this.markers.clear(),Array.from(this.polylines.keys()).forEach(n=>{const o=this.polylines.get(n);if(o&&this.map)try{this.map.hasLayer(o)&&this.map.removeLayer(o)}catch{}this.polylines.delete(n)}),this.polylines.clear();const t=this.nodes.filter(n=>{if(!n.coordinates||!Array.isArray(n.coordinates)||n.coordinates.length!==2)return!0;const[o,a]=n.coordinates;return!Number.isFinite(o)||!Number.isFinite(a)}),e=this.nodes.filter(n=>{if(!n.coordinates||!Array.isArray(n.coordinates)||n.coordinates.length!==2)return!1;const[o,a]=n.coordinates;return Number.isFinite(o)&&Number.isFinite(a)}),s=new Map;if(t.length>0){const h=this.Leaflet.latLngBounds([-50,-32],[0,0]);this.rectLayer=this.Leaflet.rectangle(h,{color:"#666",fillColor:"#f0f0f0",fillOpacity:.1,weight:1,dashArray:"5,5"}),this.rectLayer.addTo(this.map);const c=Math.ceil(Math.sqrt(t.length)),l=50/(Math.ceil(t.length/c)+1),d=32/(c+1);t.forEach((g,f)=>{const B=Math.floor(f/c),w=f%c,p=-50+(B+1)*l,C=-32+(w+1)*d;s.set(g.id,[p,C]);const y=this.selectedNodeId===g.id,U=g.style?.color||"#ffffff",Q=y?"#2196f3":g.style?.borderColor||"#333333",E=`
          <div style="
            width: ${y?15:10}px;
            height: ${y?15:10}px;
            background-color: ${U};
            border: 2px solid ${Q};
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
          "></div>
        `,F=this.Leaflet.divIcon({html:E,className:"relatos-node-marker",iconSize:[y?15:10,y?15:10],iconAnchor:[y?7.5:5,y?7.5:5]}),m=this.Leaflet.marker([p,C],{icon:F});m.bindPopup(g.label,{closeButton:!1,offset:[0,-10]}),m.on("click",v=>{if(this.onNodeClick){const H=v.latlng;this.onNodeClick({node:g,position:{x:H.lng,y:H.lat},originalEvent:v.originalEvent})}}),m.addTo(this.map),this.markers.set(g.id,m)})}for(const n of e){const[o,a]=n.coordinates;s.set(n.id,[o,a]);const r=this.selectedNodeId===n.id,h=n.style?.color||"#ffffff",c=r?"#2196f3":n.style?.borderColor||"#333333",u=`
        <div style="
          width: ${r?15:10}px;
          height: ${r?15:10}px;
          background-color: ${h};
          border: 2px solid ${c};
          border-radius: 50%;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        "></div>
      `,l=this.Leaflet.divIcon({html:u,className:"relatos-node-marker",iconSize:[r?15:10,r?15:10],iconAnchor:[r?7.5:5,r?7.5:5]}),d=this.Leaflet.marker([o,a],{icon:l});d.bindPopup(n.label,{closeButton:!1,offset:[0,-10]}),d.on("click",g=>{if(this.onNodeClick){const f=g.latlng;this.onNodeClick({node:n,position:{x:f.lng,y:f.lat},originalEvent:g.originalEvent,view:"map2d"})}}),d.addTo(this.map),this.markers.set(n.id,d)}if(this.alwaysShowEdges)for(const n of this.edges){const o=s.get(n.src),a=s.get(n.dst);if(!o||!a)continue;const[r,h]=o,[c,u]=a,l=n.style?.color||"#999999",d=n.style?.weight||1,g=Math.max(1,Math.min(5,d)),f=this.Leaflet.polyline([[r,h],[c,u]],{color:l,weight:g,opacity:.7});f.on("click",w=>{if(this.onEdgeClick){const p=w.latlng;this.onEdgeClick({edge:n,position:{x:p.lng,y:p.lat},originalEvent:w.originalEvent,view:"map2d"})}});const B=this.polylines.get(n.id);if(B&&this.map)try{this.map.hasLayer(B)&&this.map.removeLayer(B)}catch{}f.addTo(this.map),this.polylines.set(n.id,f)}this.fitToNodes()}renderWithoutFit(){if(!this.map||!this.Leaflet)return;this.markers.forEach(n=>{this.map.removeLayer(n)}),this.markers.clear(),Array.from(this.polylines.keys()).forEach(n=>{const o=this.polylines.get(n);if(o&&this.map)try{this.map.hasLayer(o)&&this.map.removeLayer(o)}catch{}this.polylines.delete(n)}),this.polylines.clear(),this.rectLayer&&(this.map.removeLayer(this.rectLayer),this.rectLayer=null);const t=this.nodes.filter(n=>{if(!n.coordinates||!Array.isArray(n.coordinates)||n.coordinates.length!==2)return!0;const[o,a]=n.coordinates;return!Number.isFinite(o)||!Number.isFinite(a)}),e=this.nodes.filter(n=>{if(!n.coordinates||!Array.isArray(n.coordinates)||n.coordinates.length!==2)return!1;const[o,a]=n.coordinates;return Number.isFinite(o)&&Number.isFinite(a)}),s=new Map;if(t.length>0){const h=this.Leaflet.latLngBounds([-50,-32],[0,0]);this.rectLayer=this.Leaflet.rectangle(h,{color:"#666",fillColor:"#f0f0f0",fillOpacity:.1,weight:1,dashArray:"5,5"}),this.rectLayer.addTo(this.map);const c=Math.ceil(Math.sqrt(t.length)),l=50/(Math.ceil(t.length/c)+1),d=32/(c+1);t.forEach((g,f)=>{const B=Math.floor(f/c),w=f%c,p=-50+(B+1)*l,C=-32+(w+1)*d;s.set(g.id,[p,C]);const y=this.selectedNodeId===g.id,U=g.style?.color||"#ffffff",Q=y?"#2196f3":g.style?.borderColor||"#333333",E=`
          <div style="
            width: ${y?15:10}px;
            height: ${y?15:10}px;
            background-color: ${U};
            border: 2px solid ${Q};
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
          "></div>
        `,F=this.Leaflet.divIcon({html:E,className:"relatos-node-marker",iconSize:[y?15:10,y?15:10],iconAnchor:[y?7.5:5,y?7.5:5]}),m=this.Leaflet.marker([p,C],{icon:F});m.bindPopup(g.label,{closeButton:!1,offset:[0,-10]}),m.on("click",v=>{if(this.onNodeClick){const H=v.latlng;this.onNodeClick({node:g,position:{x:H.lng,y:H.lat},originalEvent:v.originalEvent,view:"map2d"})}}),m.addTo(this.map),this.markers.set(g.id,m)})}for(const n of e){const[o,a]=n.coordinates;s.set(n.id,[o,a]);const r=this.selectedNodeId===n.id,h=n.style?.color||"#ffffff",c=r?"#2196f3":n.style?.borderColor||"#333333",u=`
        <div style="
          width: ${r?15:10}px;
          height: ${r?15:10}px;
          background-color: ${h};
          border: 2px solid ${c};
          border-radius: 50%;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        "></div>
      `,l=this.Leaflet.divIcon({html:u,className:"relatos-node-marker",iconSize:[r?15:10,r?15:10],iconAnchor:[r?7.5:5,r?7.5:5]}),d=this.Leaflet.marker([o,a],{icon:l});d.bindPopup(n.label,{closeButton:!1,offset:[0,-10]}),d.on("click",g=>{if(this.onNodeClick){const f=g.latlng;this.onNodeClick({node:n,position:{x:f.lng,y:f.lat},originalEvent:g.originalEvent})}}),d.addTo(this.map),this.markers.set(n.id,d)}if(this.alwaysShowEdges)for(const n of this.edges){const o=s.get(n.src),a=s.get(n.dst);if(!o||!a)continue;const[r,h]=o,[c,u]=a,l=n.style?.color||"#999999",d=n.style?.weight||1,g=Math.max(1,Math.min(5,d)),f=this.Leaflet.polyline([[r,h],[c,u]],{color:l,weight:g,opacity:.7});f.on("click",w=>{if(this.onEdgeClick){const p=w.latlng;this.onEdgeClick({edge:n,position:{x:p.lng,y:p.lat},originalEvent:w.originalEvent,view:"map2d"})}});const B=this.polylines.get(n.id);if(B&&this.map)try{this.map.hasLayer(B)&&this.map.removeLayer(B)}catch{}f.addTo(this.map),this.polylines.set(n.id,f)}}switchTileType(){if(this.customTileUrls.length>1){this.currentCustomTileIndex=(this.currentCustomTileIndex+1)%this.customTileUrls.length,this.setupBaseTileLayer(),this.updateTileTypeButton();return}}updateTileTypeButton(){if(this.tileTypeButton){if(this.customTileUrls.length>1){this.tileTypeButton.style.display="flex";const A=this.currentCustomTileIndex+1,t=this.customTileUrls.length;this.tileTypeButton.setAttribute("title",`Custom tile ${A}/${t}`),this.tileTypeButton.style.backgroundColor="#fff",this.tileTypeButton.style.borderColor="#ccc",this.tileTypeButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.tileTypeButton.style.transform="translateY(0)";return}if(this.customTileUrls.length>0){this.tileTypeButton.style.display="none";return}this.tileTypeButton.style.display="none"}}updateAlwaysShowEdgesButton(){this.alwaysShowEdgesButton&&(this.alwaysShowEdges?(this.alwaysShowEdgesButton.setAttribute("aria-label","Hide edges"),this.alwaysShowEdgesButton.setAttribute("title","Hide edges"),this.alwaysShowEdgesButton.style.backgroundColor="#fff9c4",this.alwaysShowEdgesButton.style.color="#000000",this.alwaysShowEdgesButton.style.borderColor="#999",this.alwaysShowEdgesButton.style.boxShadow="inset 0 2px 4px rgba(0, 0, 0, 0.2)",this.alwaysShowEdgesButton.style.transform="translateY(1px)"):(this.alwaysShowEdgesButton.setAttribute("aria-label","Show edges"),this.alwaysShowEdgesButton.setAttribute("title","Show edges"),this.alwaysShowEdgesButton.style.backgroundColor="#fff",this.alwaysShowEdgesButton.style.color="#000000",this.alwaysShowEdgesButton.style.borderColor="#ccc",this.alwaysShowEdgesButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.alwaysShowEdgesButton.style.transform="translateY(0)"))}getMoonIllumination(A){const e=this.julian(A)-2451545,s=(357.5291+.98560028*e)*Math.PI/180,n=(1.9148*Math.sin(s)+.02*Math.sin(2*s)+3e-4*Math.sin(3*s))*Math.PI/180,o=102.9372*Math.PI/180,a=s+n+o+Math.PI,r=23.4397*Math.PI/180,h=Math.atan2(Math.sin(a)*Math.cos(r)-Math.tan(0)*Math.sin(r),Math.cos(a)),c=Math.asin(Math.sin(0)*Math.cos(r)+Math.cos(0)*Math.sin(r)*Math.sin(a)),u=(218.316+13.176396*e)*Math.PI/180,l=(134.963+13.064993*e)*Math.PI/180,d=(93.272+13.22935*e)*Math.PI/180,g=u+6.289*Math.sin(l)*Math.PI/180,f=5.128*Math.sin(d)*Math.PI/180,B=Math.atan2(Math.sin(g)*Math.cos(r)-Math.tan(f)*Math.sin(r),Math.cos(g)),w=Math.asin(Math.sin(f)*Math.cos(r)+Math.cos(f)*Math.sin(r)*Math.sin(g)),p=385001-20905*Math.cos(l),C=149598e3,y=Math.acos(Math.sin(c)*Math.sin(w)+Math.cos(c)*Math.cos(w)*Math.cos(h-B)),U=Math.atan2(C*Math.sin(y),p-C*Math.cos(y)),Q=Math.atan2(Math.cos(c)*Math.sin(h-B),Math.sin(c)*Math.cos(w)-Math.cos(c)*Math.sin(w)*Math.cos(h-B));return{fraction:(1+Math.cos(U))/2,phase:.5+.5*U*(Q<0?-1:1)/Math.PI,angle:Q}}getMoonPhase(A){const e=this.getMoonIllumination(A).phase;return Math.floor(e*8)%8}getMoonPhaseIcon(A,t=16){const s=["","","","","","","",""][A]||"";return`<span style="font-size: ${t}px; line-height: 1;">${s}</span>`}calculateMoonPosition(A,t,e){try{const s=this.julian(A),n=s-2451545,o=(218.316+13.176396*n)*Math.PI/180,a=(134.963+13.064993*n)*Math.PI/180,r=(93.272+13.22935*n)*Math.PI/180,h=o+6.289*Math.sin(a)*Math.PI/180,c=5.128*Math.sin(r)*Math.PI/180,u=23.4397*Math.PI/180,l=Math.atan2(Math.sin(h)*Math.cos(u)-Math.tan(c)*Math.sin(u),Math.cos(h)),d=Math.asin(Math.sin(c)*Math.cos(u)+Math.cos(c)*Math.sin(u)*Math.sin(h)),f=this.GMST(s)*Math.PI/12,B=d;let w=l-f;const p=B*180/Math.PI;let C=w*180/Math.PI;return C=C%360,C>180?C-=360:C<-180&&(C+=360),[p,C]}catch{return null}}updateMoonMarker(){if(!this.map||!this.Leaflet||(this.moonMarker&&(this.map.removeLayer(this.moonMarker),this.moonMarker=null),!this.moonEnabled))return;const A=this.timeISO?new Date(this.timeISO):new Date;let t=this.calculateMoonPosition(A,0,0);if(!t)return;const e=this.getMoonPhase(A),s=this.getMoonPhaseIcon(e,24),n=this.Leaflet.divIcon({html:s,className:"relatos-moon-marker",iconSize:[32,32],iconAnchor:[16,16]});this.moonMarker=this.Leaflet.marker([t[0],t[1]],{icon:n}),this.moonMarker.addTo(this.map)}createMoonToggleButton(){this.moonToggleButton=document.createElement("button"),this.moonToggleButton.setAttribute("aria-label","Toggle moon"),this.moonToggleButton.setAttribute("title","Toggle moon"),this.moonToggleButton.style.padding="6px",this.moonToggleButton.style.border="1px solid #ccc",this.moonToggleButton.style.borderRadius="4px",this.moonToggleButton.style.backgroundColor="#fff",this.moonToggleButton.style.cursor="pointer",this.moonToggleButton.style.fontSize="16px",this.moonToggleButton.style.width="32px",this.moonToggleButton.style.height="32px",this.moonToggleButton.style.display="flex",this.moonToggleButton.style.alignItems="center",this.moonToggleButton.style.justifyContent="center",this.moonToggleButton.style.pointerEvents="auto",this.moonToggleButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.moonToggleButton.style.transition="0.2s",this.moonToggleButton.addEventListener("click",()=>{this.moonEnabled=!this.moonEnabled,this.updateMoonButton(),this.updateMoonMarker()})}isMoonEnabled(){return this.moonEnabled}toggleMoon(){this.moonEnabled=!this.moonEnabled,this.updateMoonMarker()}getTime(){return this.timeISO}updateMoonButton(){}updateLightingButton(){if(!this.lightingToggleButton)return;const A=this.isLightingEnabled();this.lightingToggleButton.innerHTML=hr("icon-sun",16),A?(this.lightingToggleButton.style.backgroundColor="#fff9c4",this.lightingToggleButton.style.boxShadow="inset 0 2px 4px rgba(0, 0, 0, 0.2)",this.lightingToggleButton.style.transform="translateY(1px)"):(this.lightingToggleButton.style.backgroundColor="#fff",this.lightingToggleButton.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",this.lightingToggleButton.style.transform="translateY(0)"),this.lightingToggleButton.style.color="#333"}fitAndCenter(){this.fitToNodes()}fitToNodes(){if(!this.map||!this.Leaflet||this.nodes.length===0)return;const A=this.nodes.filter(c=>{if(!c.coordinates||!Array.isArray(c.coordinates)||c.coordinates.length!==2)return!1;const[u,l]=c.coordinates;return Number.isFinite(u)&&Number.isFinite(l)}),t=this.nodes.filter(c=>{if(!c.coordinates||!Array.isArray(c.coordinates)||c.coordinates.length!==2)return!0;const[u,l]=c.coordinates;return!Number.isFinite(u)||!Number.isFinite(l)}),e=[],s=[];if(A.forEach(c=>{if(c.coordinates&&c.coordinates.length===2){const[u,l]=c.coordinates;Number.isFinite(u)&&Number.isFinite(l)&&(e.push(u),s.push(l))}}),t.length>0){const g=Math.ceil(Math.sqrt(t.length)),B=50/(Math.ceil(t.length/g)+1),w=32/(g+1);t.forEach((p,C)=>{const y=Math.floor(C/g),U=C%g,Q=-50+(y+1)*B,E=-32+(U+1)*w;e.push(Q),s.push(E)})}if(e.length===0)return;const n=Math.min(...e),o=Math.max(...e),a=Math.min(...s),r=Math.max(...s),h=this.Leaflet.latLngBounds([n,a],[o,r]);this.map.flyToBounds(h,{padding:[20,20],maxZoom:5,duration:1,easeLinearity:.25})}show(){this.container.style.display="block",this.map?this.map.invalidateSize():this.leafletLoader&&this.initializeLeaflet().catch(()=>{})}hide(){this.container.style.display="none"}resize(){this.map&&this.map.invalidateSize()}getViewAsSvg(){return null}async exportViewToImage(A,t){if(!this.container||!this.map)return null;try{const e=(await Promise.resolve().then(()=>Jh)).default,s=await e(this.container,{useCORS:!0,allowTaint:!1,logging:!1,scale:window.devicePixelRatio??1}),n=t?.quality??.92;return new Promise(o=>{s.toBlob(a=>o(a??null),A==="png"?"image/png":"image/webp",n)})}catch{return null}}destroy(){this.map&&(this.map.remove(),this.map=null),this.markers.clear(),this.polylines.clear()}isEditable(){return!1}}const dr=120,gr=60,Br=30,fr=50,pr=25;function at(i){const A=i.style||{};return{width:A.width??dr,height:A.height??gr}}function _s(i,A){if(!i.position||!A.position)return{side:"right",t:.5};const{width:t,height:e}=at(i),s=A.position.x-i.position.x,n=A.position.y-i.position.y,o=Math.atan2(n,s),a=o<0?o+2*Math.PI:o;let r,h;return a>=7*Math.PI/4||a<Math.PI/4?(r="right",h=.5+n/e*.5):a>=Math.PI/4&&a<3*Math.PI/4?(r="bottom",h=.5+s/t*.5):a>=3*Math.PI/4&&a<5*Math.PI/4?(r="left",h=.5-n/e*.5):(r="top",h=.5-s/t*.5),h=Math.max(0,Math.min(1,h)),{side:r,t:h}}function Ps(i,A,t,e){if(!i.position)return{x:0,y:0};const s=i.position.x,n=i.position.y;let o,a;switch(A.side){case"top":o=s-t/2+t*A.t,a=n-e/2;break;case"right":o=s+t/2,a=n-e/2+e*A.t;break;case"bottom":o=s-t/2+t*A.t,a=n+e/2;break;case"left":o=s-t/2,a=n-e/2+e*A.t;break;default:o=s,a=n}return{x:o,y:a}}function wr(i,A){const t=A.find(u=>u.id===i.src),e=A.find(u=>u.id===i.dst);if(!t?.position||!e?.position)return[];const s=i.srcAnchor??_s(t,e),n=i.dstAnchor??_s(e,t),o=at(t),a=at(e),r=Ps(t,s,o.width,o.height),h=Ps(e,n,a.width,a.height),c=[r];return i.bends?.length&&c.push(...i.bends),c.push(h),c}function Cr(i,A,t,e){const s=t.some(d=>d.parentId===i.id),n=new Set;if(s){const d=t.filter(f=>f.parentId===i.id),g=f=>{f.nodeIds.forEach(B=>n.add(B)),t.filter(B=>B.parentId===f.id).forEach(g)};d.forEach(g)}let o=1/0,a=-1/0,r=1/0,h=-1/0,c=!1;for(const d of i.nodeIds){if(s&&n.has(d))continue;const g=A.find(C=>C.id===d);if(!g?.position)continue;c=!0;const{width:f,height:B}=at(g),w=g.position.x-f/2,p=g.position.y-B/2;o=Math.min(o,w),a=Math.max(a,w+f),r=Math.min(r,p),h=Math.max(h,p+B)}if(s){const d=t.filter(g=>g.parentId===i.id);for(const g of d){const f=e(g);f&&(c=!0,o=Math.min(o,f.position.x),a=Math.max(a,f.position.x+f.size.width),r=Math.min(r,f.position.y),h=Math.max(h,f.position.y+f.size.height))}}if(!c)return null;const u=s?fr:Br,l=u+pr;return{minX:o-u,maxX:a+u,minY:r-l,maxY:h+u}}function Vs(i,A,t,e){if(i.layout)return i.layout;const s=Cr(i,A,t,n=>Vs(n,A,t));return s?{position:{x:s.minX,y:s.minY},size:{width:s.maxX-s.minX,height:s.maxY-s.minY}}:null}function Xs(i,A,t=[]){const e=i,s=A,n=[];let o=1/0,a=-1/0,r=1/0,h=-1/0;for(const g of e){if(!g.position)continue;const{width:f,height:B}=at(g),w=g.position.x-f/2,p=g.position.y-B/2,C=g.style||{};n.push({id:g.id,label:g.label,left:w,top:p,width:f,height:B,fillColor:C.color,strokeColor:C.borderColor}),o=Math.min(o,w),a=Math.max(a,w+f),r=Math.min(r,p),h=Math.max(h,p+B)}const c=g=>Vs(g,e,t),u=[];for(const g of t){const f=c(g);if(!f)continue;const B=g.style;u.push({id:g.id,label:g.label,left:f.position.x,top:f.position.y,width:f.size.width,height:f.size.height,nodeIds:[...g.nodeIds],childGroupIds:t.filter(w=>w.parentId===g.id).map(w=>w.id)||void 0,fillColor:B?.color,strokeColor:B?.borderColor,strokeWidth:B?.borderWidth,strokeDash:B?.borderDash}),o=Math.min(o,f.position.x),a=Math.max(a,f.position.x+f.size.width),r=Math.min(r,f.position.y),h=Math.max(h,f.position.y+f.size.height)}const l=[];for(const g of s){const f=wr(g,e);if(f.length<2)continue;const B=g.style||{};l.push({id:g.id,srcId:g.src,dstId:g.dst,points:f,label:B.label??g.relType,srcLabel:B.srcLabel,dstLabel:B.dstLabel,color:B.color,weight:B.weight})}const d=n.length>0||u.length>0?{left:o,top:r,width:a-o,height:h-r}:void 0;return{nodes:n,edges:l,groups:u,bounds:d}}const yr='The "data" option has been removed. Use initialRelat (relat text from importRelat/exportRelat) instead.';function Qr(i,A={}){if(A.data!==void 0&&A.data!==null)throw new Error(yr);XA();let t;if(typeof i=="string"){const l=document.querySelector(i);if(!l||!(l instanceof HTMLElement))throw new Error(`Container element not found: ${i}`);t=l}else t=i;const e=A.enabledViews||["graph","map2d","globe3d"],s=A.initialView||(e.includes("map2d")?"map2d":e[0]),n=A.graph?.mode||"view",o=A.graph?.editable||!1,a=A.tileServers,r=new ar(t,e,{showExportButton:A.showExportButton,showMoonButton:A.showMoonButton,showLightingButton:A.showLightingButton,initialAlwaysShowEdges:A.initialAlwaysShowEdges});A.time&&r.setTime(A.time),typeof A.enableLighting=="boolean"&&r.setLightingEnabled(A.enableLighting),A.tables&&r.setTableOptions(A.tables),A.events?.onNodeClick&&r.setOnNodeClickCallback(A.events.onNodeClick);const h=A.events?.onNodeClick?l=>{A.events.onNodeClick(l),r.highlightNodeRow(l.node.id)}:void 0,c=l=>{A.events?.onEdgeClick&&A.events.onEdgeClick(l),r.highlightEdgeRow(l.edge.id)},u=l=>{A.events?.onGroupClick&&A.events.onGroupClick(l),r.highlightGroupRow(l.group.id)};if(e.includes("graph")){const l=document.createElement("div");l.style.width="100%",l.style.height="100%",r.getViewContainer().appendChild(l);const d=new Se(l,h||A.events?.onNodeClick,A.events?.onSave,o,c,u);d.setModeChangeCallback(()=>{r.updateEditToggleButton(),r.updateGraphButtons()}),d.setAlwaysShowEdgesChangeCallback(g=>{r.setAlwaysShowEdges(g)}),d.setGraphButtonsUpdateCallback(()=>{r.updateGraphButtons()}),d.setMode(n),r.registerView("graph",d)}if(e.includes("map2d")&&A.loaders?.leaflet){const l=document.createElement("div");l.style.width="100%",l.style.height="100%",r.getViewContainer().appendChild(l);const d=new ur(l,h||A.events?.onNodeClick,A.loaders.leaflet,a,A.map2d,c);d.setAlwaysShowEdgesChangeCallback(g=>{r.setAlwaysShowEdges(g)}),d.setLightingChangeCallback(g=>{r.setLightingEnabled(g)}),r.registerView("map2d",d)}if(e.includes("globe3d")&&A.loaders?.cesium)try{const l=document.createElement("div");l.style.width="100%",l.style.height="100%",r.getViewContainer().appendChild(l);const d=new cr(l,h||A.events?.onNodeClick,A.loaders.cesium,A.globe3d?{customTileUrl:A.globe3d.customTileUrl,customTileUrls:A.globe3d.customTileUrls}:void 0,a,c);d.setAlwaysShowEdgesChangeCallback(g=>{r.setAlwaysShowEdges(g)}),d.setLightingChangeCallback(g=>{r.setLightingEnabled(g)}),r.registerView("globe3d",d)}catch{}if(r.setInitialView(s),A.initialRelat){const l=A.onWarnings?{onWarnings:A.onWarnings}:void 0,d=Le(A.initialRelat,l),g=r.getView("graph");g&&g.setData(d.nodes,d.edges,d.groups);const f=r.getView("map2d");f&&f.setData(d.nodes,d.edges);const B=r.getView("globe3d");B&&B.setData(d.nodes,d.edges),r.setData(d.nodes,d.edges,d.groups)}return{setView(l){r.switchView(l)},getView(){const l=r.getCurrentView();if(!l)throw new Error("No view is currently active");return l},setMode(l){const d=r.getView("graph");d&&d.setMode(l)},getMode(){const l=r.getView("graph");return l?l.getMode():null},resize(){r.resize()},destroy(){r.destroy()},selectNode(l){const d=r.getView("graph");d&&d.selectNode&&d.selectNode(l);const g=r.getView("map2d");g&&g.selectNode&&g.selectNode(l);const f=r.getView("globe3d");f&&f.selectNode&&f.selectNode(l)},setTime(l){r.setTime(l)},setLighting(l){r.setLightingEnabled(l)},importRelat(l,d){const g=Le(l,d),f=r.getView("graph");f&&f.setData(g.nodes,g.edges,g.groups);const B=r.getView("map2d");B&&B.setData(g.nodes,g.edges);const w=r.getView("globe3d");w&&w.setData(g.nodes,g.edges),r.setData(g.nodes,g.edges,g.groups)},exportRelat(l){const{nodes:d,edges:g,groups:f}=r.getData();return Lt(d,g,f,l)},getShapeDataForOffice(){const{nodes:l,edges:d,groups:g}=r.getData();return Xs(l,d,g)},getViewAsSvg(){const l=r.getCurrentView();return l?r.getView(l)?.getViewAsSvg?.()??null:null},async exportViewToImage(l,d){const g=r.getCurrentView();return g?r.getView(g)?.exportViewToImage?.(l,d)??Promise.resolve(null):null}}}var De=function(i,A){return De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])},De(i,A)};function fA(i,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");De(i,A);function t(){this.constructor=i}i.prototype=A===null?Object.create(A):(t.prototype=A.prototype,new t)}var Me=function(){return Me=Object.assign||function(A){for(var t,e=1,s=arguments.length;e<s;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(A[n]=t[n])}return A},Me.apply(this,arguments)};function iA(i,A,t,e){function s(n){return n instanceof t?n:new t(function(o){o(n)})}return new(t||(t=Promise))(function(n,o){function a(c){try{h(e.next(c))}catch(u){o(u)}}function r(c){try{h(e.throw(c))}catch(u){o(u)}}function h(c){c.done?n(c.value):s(c.value).then(a,r)}h((e=e.apply(i,[])).next())})}function eA(i,A){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},e,s,n,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(h){return function(c){return r([h,c])}}function r(h){if(e)throw new TypeError("Generator is already executing.");for(;t;)try{if(e=1,s&&(n=h[0]&2?s.return:h[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,h[1])).done)return n;switch(s=0,n&&(h=[h[0]&2,n.value]),h[0]){case 0:case 1:n=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,s=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!n||h[1]>n[0]&&h[1]<n[3])){t.label=h[1];break}if(h[0]===6&&t.label<n[1]){t.label=n[1],n=h;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(h);break}n[2]&&t.ops.pop(),t.trys.pop();continue}h=A.call(i,t)}catch(c){h=[6,c],s=0}finally{e=n=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function St(i,A,t){if(arguments.length===2)for(var e=0,s=A.length,n;e<s;e++)(n||!(e in A))&&(n||(n=Array.prototype.slice.call(A,0,e)),n[e]=A[e]);return i.concat(n||A)}for(var EA=(function(){function i(A,t,e,s){this.left=A,this.top=t,this.width=e,this.height=s}return i.prototype.add=function(A,t,e,s){return new i(this.left+A,this.top+t,this.width+e,this.height+s)},i.fromClientRect=function(A,t){return new i(t.left+A.windowBounds.left,t.top+A.windowBounds.top,t.width,t.height)},i.fromDOMRectList=function(A,t){var e=Array.from(t).find(function(s){return s.width!==0});return e?new i(e.left+A.windowBounds.left,e.top+A.windowBounds.top,e.width,e.height):i.EMPTY},i.EMPTY=new i(0,0,0,0),i})(),Dt=function(i,A){return EA.fromClientRect(i,A.getBoundingClientRect())},mr=function(i){var A=i.body,t=i.documentElement;if(!A||!t)throw new Error("Unable to get document size");var e=Math.max(Math.max(A.scrollWidth,t.scrollWidth),Math.max(A.offsetWidth,t.offsetWidth),Math.max(A.clientWidth,t.clientWidth)),s=Math.max(Math.max(A.scrollHeight,t.scrollHeight),Math.max(A.offsetHeight,t.offsetHeight),Math.max(A.clientHeight,t.clientHeight));return new EA(0,0,e,s)},Mt=function(i){for(var A=[],t=0,e=i.length;t<e;){var s=i.charCodeAt(t++);if(s>=55296&&s<=56319&&t<e){var n=i.charCodeAt(t++);(n&64512)===56320?A.push(((s&1023)<<10)+(n&1023)+65536):(A.push(s),t--)}else A.push(s)}return A},Y=function(){for(var i=[],A=0;A<arguments.length;A++)i[A]=arguments[A];if(String.fromCodePoint)return String.fromCodePoint.apply(String,i);var t=i.length;if(!t)return"";for(var e=[],s=-1,n="";++s<t;){var o=i[s];o<=65535?e.push(o):(o-=65536,e.push((o>>10)+55296,o%1024+56320)),(s+1===t||e.length>16384)&&(n+=String.fromCharCode.apply(String,e),e.length=0)}return n},Ys="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ur=typeof Uint8Array>"u"?[]:new Uint8Array(256),Kt=0;Kt<Ys.length;Kt++)Ur[Ys.charCodeAt(Kt)]=Kt;for(var Ws="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lt=typeof Uint8Array>"u"?[]:new Uint8Array(256),Nt=0;Nt<Ws.length;Nt++)lt[Ws.charCodeAt(Nt)]=Nt;for(var Er=function(i){var A=i.length*.75,t=i.length,e,s=0,n,o,a,r;i[i.length-1]==="="&&(A--,i[i.length-2]==="="&&A--);var h=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(A):new Array(A),c=Array.isArray(h)?h:new Uint8Array(h);for(e=0;e<t;e+=4)n=lt[i.charCodeAt(e)],o=lt[i.charCodeAt(e+1)],a=lt[i.charCodeAt(e+2)],r=lt[i.charCodeAt(e+3)],c[s++]=n<<2|o>>4,c[s++]=(o&15)<<4|a>>2,c[s++]=(a&3)<<6|r&63;return h},Fr=function(i){for(var A=i.length,t=[],e=0;e<A;e+=2)t.push(i[e+1]<<8|i[e]);return t},vr=function(i){for(var A=i.length,t=[],e=0;e<A;e+=4)t.push(i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e]);return t},GA=5,Ke=11,Ne=2,br=Ke-GA,Js=65536>>GA,Ir=1<<GA,Oe=Ir-1,Hr=1024>>GA,Tr=Js+Hr,xr=Tr,Lr=32,Sr=xr+Lr,Dr=65536>>Ke,Mr=1<<br,Kr=Mr-1,zs=function(i,A,t){return i.slice?i.slice(A,t):new Uint16Array(Array.prototype.slice.call(i,A,t))},Nr=function(i,A,t){return i.slice?i.slice(A,t):new Uint32Array(Array.prototype.slice.call(i,A,t))},Or=function(i,A){var t=Er(i),e=Array.isArray(t)?vr(t):new Uint32Array(t),s=Array.isArray(t)?Fr(t):new Uint16Array(t),n=24,o=zs(s,n/2,e[4]/2),a=e[5]===2?zs(s,(n+e[4])/2):Nr(e,Math.ceil((n+e[4])/4));return new kr(e[0],e[1],e[2],e[3],o,a)},kr=(function(){function i(A,t,e,s,n,o){this.initialValue=A,this.errorValue=t,this.highStart=e,this.highValueIndex=s,this.index=n,this.data=o}return i.prototype.get=function(A){var t;if(A>=0){if(A<55296||A>56319&&A<=65535)return t=this.index[A>>GA],t=(t<<Ne)+(A&Oe),this.data[t];if(A<=65535)return t=this.index[Js+(A-55296>>GA)],t=(t<<Ne)+(A&Oe),this.data[t];if(A<this.highStart)return t=Sr-Dr+(A>>Ke),t=this.index[t],t+=A>>GA&Kr,t=this.index[t],t=(t<<Ne)+(A&Oe),this.data[t];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},i})(),Zs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gr=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ot=0;Ot<Zs.length;Ot++)Gr[Zs.charCodeAt(Ot)]=Ot;var Rr="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",js=50,_r=1,$s=2,qs=3,Pr=4,Vr=5,Ai=7,ti=8,ei=9,TA=10,ke=11,si=12,Ge=13,Xr=14,ct=15,Re=16,kt=17,ht=18,Yr=19,ii=20,_e=21,ut=22,Pe=23,YA=24,aA=25,dt=26,gt=27,WA=28,Wr=29,RA=30,Jr=31,Gt=32,Rt=33,Ve=34,Xe=35,Ye=36,Bt=37,We=38,_t=39,Pt=40,Je=41,ni=42,zr=43,Zr=[9001,65288],ri="!",K="",Vt="",ze=Or(Rr),FA=[RA,Ye],Ze=[_r,$s,qs,Vr],oi=[TA,ti],ai=[gt,dt],jr=Ze.concat(oi),li=[We,_t,Pt,Ve,Xe],$r=[ct,Ge],qr=function(i,A){A===void 0&&(A="strict");var t=[],e=[],s=[];return i.forEach(function(n,o){var a=ze.get(n);if(a>js?(s.push(!0),a-=js):s.push(!1),["normal","auto","loose"].indexOf(A)!==-1&&[8208,8211,12316,12448].indexOf(n)!==-1)return e.push(o),t.push(Re);if(a===Pr||a===ke){if(o===0)return e.push(o),t.push(RA);var r=t[o-1];return jr.indexOf(r)===-1?(e.push(e[o-1]),t.push(r)):(e.push(o),t.push(RA))}if(e.push(o),a===Jr)return t.push(A==="strict"?_e:Bt);if(a===ni||a===Wr)return t.push(RA);if(a===zr)return n>=131072&&n<=196605||n>=196608&&n<=262141?t.push(Bt):t.push(RA);t.push(a)}),[e,t,s]},je=function(i,A,t,e){var s=e[t];if(Array.isArray(i)?i.indexOf(s)!==-1:i===s)for(var n=t;n<=e.length;){n++;var o=e[n];if(o===A)return!0;if(o!==TA)break}if(s===TA)for(var n=t;n>0;){n--;var a=e[n];if(Array.isArray(i)?i.indexOf(a)!==-1:i===a)for(var r=t;r<=e.length;){r++;var o=e[r];if(o===A)return!0;if(o!==TA)break}if(a!==TA)break}return!1},ci=function(i,A){for(var t=i;t>=0;){var e=A[t];if(e===TA)t--;else return e}return 0},Ao=function(i,A,t,e,s){if(t[e]===0)return K;var n=e-1;if(Array.isArray(s)&&s[n]===!0)return K;var o=n-1,a=n+1,r=A[n],h=o>=0?A[o]:0,c=A[a];if(r===$s&&c===qs)return K;if(Ze.indexOf(r)!==-1)return ri;if(Ze.indexOf(c)!==-1||oi.indexOf(c)!==-1)return K;if(ci(n,A)===ti)return Vt;if(ze.get(i[n])===ke||(r===Gt||r===Rt)&&ze.get(i[a])===ke||r===Ai||c===Ai||r===ei||[TA,Ge,ct].indexOf(r)===-1&&c===ei||[kt,ht,Yr,YA,WA].indexOf(c)!==-1||ci(n,A)===ut||je(Pe,ut,n,A)||je([kt,ht],_e,n,A)||je(si,si,n,A))return K;if(r===TA)return Vt;if(r===Pe||c===Pe)return K;if(c===Re||r===Re)return Vt;if([Ge,ct,_e].indexOf(c)!==-1||r===Xr||h===Ye&&$r.indexOf(r)!==-1||r===WA&&c===Ye||c===ii||FA.indexOf(c)!==-1&&r===aA||FA.indexOf(r)!==-1&&c===aA||r===gt&&[Bt,Gt,Rt].indexOf(c)!==-1||[Bt,Gt,Rt].indexOf(r)!==-1&&c===dt||FA.indexOf(r)!==-1&&ai.indexOf(c)!==-1||ai.indexOf(r)!==-1&&FA.indexOf(c)!==-1||[gt,dt].indexOf(r)!==-1&&(c===aA||[ut,ct].indexOf(c)!==-1&&A[a+1]===aA)||[ut,ct].indexOf(r)!==-1&&c===aA||r===aA&&[aA,WA,YA].indexOf(c)!==-1)return K;if([aA,WA,YA,kt,ht].indexOf(c)!==-1)for(var u=n;u>=0;){var l=A[u];if(l===aA)return K;if([WA,YA].indexOf(l)!==-1)u--;else break}if([gt,dt].indexOf(c)!==-1)for(var u=[kt,ht].indexOf(r)!==-1?o:n;u>=0;){var l=A[u];if(l===aA)return K;if([WA,YA].indexOf(l)!==-1)u--;else break}if(We===r&&[We,_t,Ve,Xe].indexOf(c)!==-1||[_t,Ve].indexOf(r)!==-1&&[_t,Pt].indexOf(c)!==-1||[Pt,Xe].indexOf(r)!==-1&&c===Pt||li.indexOf(r)!==-1&&[ii,dt].indexOf(c)!==-1||li.indexOf(c)!==-1&&r===gt||FA.indexOf(r)!==-1&&FA.indexOf(c)!==-1||r===YA&&FA.indexOf(c)!==-1||FA.concat(aA).indexOf(r)!==-1&&c===ut&&Zr.indexOf(i[a])===-1||FA.concat(aA).indexOf(c)!==-1&&r===ht)return K;if(r===Je&&c===Je){for(var d=t[n],g=1;d>0&&(d--,A[d]===Je);)g++;if(g%2!==0)return K}return r===Gt&&c===Rt?K:Vt},to=function(i,A){A||(A={lineBreak:"normal",wordBreak:"normal"});var t=qr(i,A.lineBreak),e=t[0],s=t[1],n=t[2];(A.wordBreak==="break-all"||A.wordBreak==="break-word")&&(s=s.map(function(a){return[aA,RA,ni].indexOf(a)!==-1?Bt:a}));var o=A.wordBreak==="keep-all"?n.map(function(a,r){return a&&i[r]>=19968&&i[r]<=40959}):void 0;return[e,s,o]},eo=(function(){function i(A,t,e,s){this.codePoints=A,this.required=t===ri,this.start=e,this.end=s}return i.prototype.slice=function(){return Y.apply(void 0,this.codePoints.slice(this.start,this.end))},i})(),so=function(i,A){var t=Mt(i),e=to(t,A),s=e[0],n=e[1],o=e[2],a=t.length,r=0,h=0;return{next:function(){if(h>=a)return{done:!0,value:null};for(var c=K;h<a&&(c=Ao(t,n,s,++h,o))===K;);if(c!==K||h===a){var u=new eo(t,c,r,h);return r=h,{value:u,done:!1}}return{done:!0,value:null}}}},io=1,no=2,ft=4,hi=8,Xt=10,ui=47,pt=92,ro=9,oo=32,Yt=34,wt=61,ao=35,lo=36,co=37,Wt=39,Jt=40,Ct=41,ho=95,nA=45,uo=33,go=60,Bo=62,fo=64,po=91,wo=93,Co=61,yo=123,zt=63,Qo=125,di=124,mo=126,Uo=128,gi=65533,$e=42,_A=43,Eo=44,Fo=58,vo=59,yt=46,bo=0,Io=8,Ho=11,To=14,xo=31,Lo=127,CA=-1,Bi=48,fi=97,pi=101,So=102,Do=117,Mo=122,wi=65,Ci=69,yi=70,Ko=85,No=90,sA=function(i){return i>=Bi&&i<=57},Oo=function(i){return i>=55296&&i<=57343},JA=function(i){return sA(i)||i>=wi&&i<=yi||i>=fi&&i<=So},ko=function(i){return i>=fi&&i<=Mo},Go=function(i){return i>=wi&&i<=No},Ro=function(i){return ko(i)||Go(i)},_o=function(i){return i>=Uo},Zt=function(i){return i===Xt||i===ro||i===oo},jt=function(i){return Ro(i)||_o(i)||i===ho},Qi=function(i){return jt(i)||sA(i)||i===nA},Po=function(i){return i>=bo&&i<=Io||i===Ho||i>=To&&i<=xo||i===Lo},xA=function(i,A){return i!==pt?!1:A!==Xt},$t=function(i,A,t){return i===nA?jt(A)||xA(A,t):jt(i)?!0:!!(i===pt&&xA(i,A))},qe=function(i,A,t){return i===_A||i===nA?sA(A)?!0:A===yt&&sA(t):sA(i===yt?A:i)},Vo=function(i){var A=0,t=1;(i[A]===_A||i[A]===nA)&&(i[A]===nA&&(t=-1),A++);for(var e=[];sA(i[A]);)e.push(i[A++]);var s=e.length?parseInt(Y.apply(void 0,e),10):0;i[A]===yt&&A++;for(var n=[];sA(i[A]);)n.push(i[A++]);var o=n.length,a=o?parseInt(Y.apply(void 0,n),10):0;(i[A]===Ci||i[A]===pi)&&A++;var r=1;(i[A]===_A||i[A]===nA)&&(i[A]===nA&&(r=-1),A++);for(var h=[];sA(i[A]);)h.push(i[A++]);var c=h.length?parseInt(Y.apply(void 0,h),10):0;return t*(s+a*Math.pow(10,-o))*Math.pow(10,r*c)},Xo={type:2},Yo={type:3},Wo={type:4},Jo={type:13},zo={type:8},Zo={type:21},jo={type:9},$o={type:10},qo={type:11},Aa={type:12},ta={type:14},qt={type:23},ea={type:1},sa={type:25},ia={type:24},na={type:26},ra={type:27},oa={type:28},aa={type:29},la={type:31},As={type:32},mi=(function(){function i(){this._value=[]}return i.prototype.write=function(A){this._value=this._value.concat(Mt(A))},i.prototype.read=function(){for(var A=[],t=this.consumeToken();t!==As;)A.push(t),t=this.consumeToken();return A},i.prototype.consumeToken=function(){var A=this.consumeCodePoint();switch(A){case Yt:return this.consumeStringToken(Yt);case ao:var t=this.peekCodePoint(0),e=this.peekCodePoint(1),s=this.peekCodePoint(2);if(Qi(t)||xA(e,s)){var n=$t(t,e,s)?no:io,o=this.consumeName();return{type:5,value:o,flags:n}}break;case lo:if(this.peekCodePoint(0)===wt)return this.consumeCodePoint(),Jo;break;case Wt:return this.consumeStringToken(Wt);case Jt:return Xo;case Ct:return Yo;case $e:if(this.peekCodePoint(0)===wt)return this.consumeCodePoint(),ta;break;case _A:if(qe(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case Eo:return Wo;case nA:var a=A,r=this.peekCodePoint(0),h=this.peekCodePoint(1);if(qe(a,r,h))return this.reconsumeCodePoint(A),this.consumeNumericToken();if($t(a,r,h))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();if(r===nA&&h===Bo)return this.consumeCodePoint(),this.consumeCodePoint(),ia;break;case yt:if(qe(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case ui:if(this.peekCodePoint(0)===$e)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===$e&&(c=this.consumeCodePoint(),c===ui))return this.consumeToken();if(c===CA)return this.consumeToken()}break;case Fo:return na;case vo:return ra;case go:if(this.peekCodePoint(0)===uo&&this.peekCodePoint(1)===nA&&this.peekCodePoint(2)===nA)return this.consumeCodePoint(),this.consumeCodePoint(),sa;break;case fo:var u=this.peekCodePoint(0),l=this.peekCodePoint(1),d=this.peekCodePoint(2);if($t(u,l,d)){var o=this.consumeName();return{type:7,value:o}}break;case po:return oa;case pt:if(xA(A,this.peekCodePoint(0)))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();break;case wo:return aa;case Co:if(this.peekCodePoint(0)===wt)return this.consumeCodePoint(),zo;break;case yo:return qo;case Qo:return Aa;case Do:case Ko:var g=this.peekCodePoint(0),f=this.peekCodePoint(1);return g===_A&&(JA(f)||f===zt)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(A),this.consumeIdentLikeToken();case di:if(this.peekCodePoint(0)===wt)return this.consumeCodePoint(),jo;if(this.peekCodePoint(0)===di)return this.consumeCodePoint(),Zo;break;case mo:if(this.peekCodePoint(0)===wt)return this.consumeCodePoint(),$o;break;case CA:return As}return Zt(A)?(this.consumeWhiteSpace(),la):sA(A)?(this.reconsumeCodePoint(A),this.consumeNumericToken()):jt(A)?(this.reconsumeCodePoint(A),this.consumeIdentLikeToken()):{type:6,value:Y(A)}},i.prototype.consumeCodePoint=function(){var A=this._value.shift();return typeof A>"u"?-1:A},i.prototype.reconsumeCodePoint=function(A){this._value.unshift(A)},i.prototype.peekCodePoint=function(A){return A>=this._value.length?-1:this._value[A]},i.prototype.consumeUnicodeRangeToken=function(){for(var A=[],t=this.consumeCodePoint();JA(t)&&A.length<6;)A.push(t),t=this.consumeCodePoint();for(var e=!1;t===zt&&A.length<6;)A.push(t),t=this.consumeCodePoint(),e=!0;if(e){var s=parseInt(Y.apply(void 0,A.map(function(r){return r===zt?Bi:r})),16),n=parseInt(Y.apply(void 0,A.map(function(r){return r===zt?yi:r})),16);return{type:30,start:s,end:n}}var o=parseInt(Y.apply(void 0,A),16);if(this.peekCodePoint(0)===nA&&JA(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];JA(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();var n=parseInt(Y.apply(void 0,a),16);return{type:30,start:o,end:n}}else return{type:30,start:o,end:o}},i.prototype.consumeIdentLikeToken=function(){var A=this.consumeName();return A.toLowerCase()==="url"&&this.peekCodePoint(0)===Jt?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Jt?(this.consumeCodePoint(),{type:19,value:A}):{type:20,value:A}},i.prototype.consumeUrlToken=function(){var A=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===CA)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===Wt||t===Yt){var e=this.consumeStringToken(this.consumeCodePoint());return e.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===CA||this.peekCodePoint(0)===Ct)?(this.consumeCodePoint(),{type:22,value:e.value}):(this.consumeBadUrlRemnants(),qt)}for(;;){var s=this.consumeCodePoint();if(s===CA||s===Ct)return{type:22,value:Y.apply(void 0,A)};if(Zt(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===CA||this.peekCodePoint(0)===Ct?(this.consumeCodePoint(),{type:22,value:Y.apply(void 0,A)}):(this.consumeBadUrlRemnants(),qt);if(s===Yt||s===Wt||s===Jt||Po(s))return this.consumeBadUrlRemnants(),qt;if(s===pt)if(xA(s,this.peekCodePoint(0)))A.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),qt;else A.push(s)}},i.prototype.consumeWhiteSpace=function(){for(;Zt(this.peekCodePoint(0));)this.consumeCodePoint()},i.prototype.consumeBadUrlRemnants=function(){for(;;){var A=this.consumeCodePoint();if(A===Ct||A===CA)return;xA(A,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},i.prototype.consumeStringSlice=function(A){for(var t=5e4,e="";A>0;){var s=Math.min(t,A);e+=Y.apply(void 0,this._value.splice(0,s)),A-=s}return this._value.shift(),e},i.prototype.consumeStringToken=function(A){var t="",e=0;do{var s=this._value[e];if(s===CA||s===void 0||s===A)return t+=this.consumeStringSlice(e),{type:0,value:t};if(s===Xt)return this._value.splice(0,e),ea;if(s===pt){var n=this._value[e+1];n!==CA&&n!==void 0&&(n===Xt?(t+=this.consumeStringSlice(e),e=-1,this._value.shift()):xA(s,n)&&(t+=this.consumeStringSlice(e),t+=Y(this.consumeEscapedCodePoint()),e=-1))}e++}while(!0)},i.prototype.consumeNumber=function(){var A=[],t=ft,e=this.peekCodePoint(0);for((e===_A||e===nA)&&A.push(this.consumeCodePoint());sA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());e=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(e===yt&&sA(s))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),t=hi;sA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());e=this.peekCodePoint(0),s=this.peekCodePoint(1);var n=this.peekCodePoint(2);if((e===Ci||e===pi)&&((s===_A||s===nA)&&sA(n)||sA(s)))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),t=hi;sA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());return[Vo(A),t]},i.prototype.consumeNumericToken=function(){var A=this.consumeNumber(),t=A[0],e=A[1],s=this.peekCodePoint(0),n=this.peekCodePoint(1),o=this.peekCodePoint(2);if($t(s,n,o)){var a=this.consumeName();return{type:15,number:t,flags:e,unit:a}}return s===co?(this.consumeCodePoint(),{type:16,number:t,flags:e}):{type:17,number:t,flags:e}},i.prototype.consumeEscapedCodePoint=function(){var A=this.consumeCodePoint();if(JA(A)){for(var t=Y(A);JA(this.peekCodePoint(0))&&t.length<6;)t+=Y(this.consumeCodePoint());Zt(this.peekCodePoint(0))&&this.consumeCodePoint();var e=parseInt(t,16);return e===0||Oo(e)||e>1114111?gi:e}return A===CA?gi:A},i.prototype.consumeName=function(){for(var A="";;){var t=this.consumeCodePoint();if(Qi(t))A+=Y(t);else if(xA(t,this.peekCodePoint(0)))A+=Y(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),A}},i})(),Ui=(function(){function i(A){this._tokens=A}return i.create=function(A){var t=new mi;return t.write(A),new i(t.read())},i.parseValue=function(A){return i.create(A).parseComponentValue()},i.parseValues=function(A){return i.create(A).parseComponentValues()},i.prototype.parseComponentValue=function(){for(var A=this.consumeToken();A.type===31;)A=this.consumeToken();if(A.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(A);var t=this.consumeComponentValue();do A=this.consumeToken();while(A.type===31);if(A.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},i.prototype.parseComponentValues=function(){for(var A=[];;){var t=this.consumeComponentValue();if(t.type===32)return A;A.push(t),A.push()}},i.prototype.consumeComponentValue=function(){var A=this.consumeToken();switch(A.type){case 11:case 28:case 2:return this.consumeSimpleBlock(A.type);case 19:return this.consumeFunction(A)}return A},i.prototype.consumeSimpleBlock=function(A){for(var t={type:A,values:[]},e=this.consumeToken();;){if(e.type===32||ha(e,A))return t;this.reconsumeToken(e),t.values.push(this.consumeComponentValue()),e=this.consumeToken()}},i.prototype.consumeFunction=function(A){for(var t={name:A.value,values:[],type:18};;){var e=this.consumeToken();if(e.type===32||e.type===3)return t;this.reconsumeToken(e),t.values.push(this.consumeComponentValue())}},i.prototype.consumeToken=function(){var A=this._tokens.shift();return typeof A>"u"?As:A},i.prototype.reconsumeToken=function(A){this._tokens.unshift(A)},i})(),Qt=function(i){return i.type===15},zA=function(i){return i.type===17},R=function(i){return i.type===20},ca=function(i){return i.type===0},ts=function(i,A){return R(i)&&i.value===A},Ei=function(i){return i.type!==31},ZA=function(i){return i.type!==31&&i.type!==4},yA=function(i){var A=[],t=[];return i.forEach(function(e){if(e.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");A.push(t),t=[];return}e.type!==31&&t.push(e)}),t.length&&A.push(t),A},ha=function(i,A){return A===11&&i.type===12||A===28&&i.type===29?!0:A===2&&i.type===3},LA=function(i){return i.type===17||i.type===15},z=function(i){return i.type===16||LA(i)},Fi=function(i){return i.length>1?[i[0],i[1]]:[i[0]]},AA={type:17,number:0,flags:ft},es={type:16,number:50,flags:ft},SA={type:16,number:100,flags:ft},mt=function(i,A,t){var e=i[0],s=i[1];return[_(e,A),_(typeof s<"u"?s:e,t)]},_=function(i,A){if(i.type===16)return i.number/100*A;if(Qt(i))switch(i.unit){case"rem":case"em":return 16*i.number;default:return i.number}return i.number},vi="deg",bi="grad",Ii="rad",Hi="turn",Ae={name:"angle",parse:function(i,A){if(A.type===15)switch(A.unit){case vi:return Math.PI*A.number/180;case bi:return Math.PI/200*A.number;case Ii:return A.number;case Hi:return Math.PI*2*A.number}throw new Error("Unsupported angle type")}},Ti=function(i){return i.type===15&&(i.unit===vi||i.unit===bi||i.unit===Ii||i.unit===Hi)},xi=function(i){var A=i.filter(R).map(function(t){return t.value}).join(" ");switch(A){case"to bottom right":case"to right bottom":case"left top":case"top left":return[AA,AA];case"to top":case"bottom":return cA(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[AA,SA];case"to right":case"left":return cA(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[SA,SA];case"to bottom":case"top":return cA(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[SA,AA];case"to left":case"right":return cA(270)}return 0},cA=function(i){return Math.PI*i/180},DA={name:"color",parse:function(i,A){if(A.type===18){var t=ua[A.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+A.name+'"');return t(i,A.values)}if(A.type===5){if(A.value.length===3){var e=A.value.substring(0,1),s=A.value.substring(1,2),n=A.value.substring(2,3);return KA(parseInt(e+e,16),parseInt(s+s,16),parseInt(n+n,16),1)}if(A.value.length===4){var e=A.value.substring(0,1),s=A.value.substring(1,2),n=A.value.substring(2,3),o=A.value.substring(3,4);return KA(parseInt(e+e,16),parseInt(s+s,16),parseInt(n+n,16),parseInt(o+o,16)/255)}if(A.value.length===6){var e=A.value.substring(0,2),s=A.value.substring(2,4),n=A.value.substring(4,6);return KA(parseInt(e,16),parseInt(s,16),parseInt(n,16),1)}if(A.value.length===8){var e=A.value.substring(0,2),s=A.value.substring(2,4),n=A.value.substring(4,6),o=A.value.substring(6,8);return KA(parseInt(e,16),parseInt(s,16),parseInt(n,16),parseInt(o,16)/255)}}if(A.type===20){var a=vA[A.value.toUpperCase()];if(typeof a<"u")return a}return vA.TRANSPARENT}},MA=function(i){return(255&i)===0},j=function(i){var A=255&i,t=255&i>>8,e=255&i>>16,s=255&i>>24;return A<255?"rgba("+s+","+e+","+t+","+A/255+")":"rgb("+s+","+e+","+t+")"},KA=function(i,A,t,e){return(i<<24|A<<16|t<<8|Math.round(e*255)<<0)>>>0},Li=function(i,A){if(i.type===17)return i.number;if(i.type===16){var t=A===3?1:255;return A===3?i.number/100*t:Math.round(i.number/100*t)}return 0},Si=function(i,A){var t=A.filter(ZA);if(t.length===3){var e=t.map(Li),s=e[0],n=e[1],o=e[2];return KA(s,n,o,1)}if(t.length===4){var a=t.map(Li),s=a[0],n=a[1],o=a[2],r=a[3];return KA(s,n,o,r)}return 0};function ss(i,A,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(A-i)*t*6+i:t<1/2?A:t<2/3?(A-i)*6*(2/3-t)+i:i}var Di=function(i,A){var t=A.filter(ZA),e=t[0],s=t[1],n=t[2],o=t[3],a=(e.type===17?cA(e.number):Ae.parse(i,e))/(Math.PI*2),r=z(s)?s.number/100:0,h=z(n)?n.number/100:0,c=typeof o<"u"&&z(o)?_(o,1):1;if(r===0)return KA(h*255,h*255,h*255,1);var u=h<=.5?h*(r+1):h+r-h*r,l=h*2-u,d=ss(l,u,a+1/3),g=ss(l,u,a),f=ss(l,u,a-1/3);return KA(d*255,g*255,f*255,c)},ua={hsl:Di,hsla:Di,rgb:Si,rgba:Si},Ut=function(i,A){return DA.parse(i,Ui.create(A).parseComponentValue())},vA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},da={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(i,A){return A.map(function(t){if(R(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},ga={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},te=function(i,A){var t=DA.parse(i,A[0]),e=A[1];return e&&z(e)?{color:t,stop:e}:{color:t,stop:null}},Mi=function(i,A){var t=i[0],e=i[i.length-1];t.stop===null&&(t.stop=AA),e.stop===null&&(e.stop=SA);for(var s=[],n=0,o=0;o<i.length;o++){var a=i[o].stop;if(a!==null){var r=_(a,A);r>n?s.push(r):s.push(n),n=r}else s.push(null)}for(var h=null,o=0;o<s.length;o++){var c=s[o];if(c===null)h===null&&(h=o);else if(h!==null){for(var u=o-h,l=s[h-1],d=(c-l)/(u+1),g=1;g<=u;g++)s[h+g-1]=d*g;h=null}}return i.map(function(f,B){var w=f.color;return{color:w,stop:Math.max(Math.min(1,s[B]/A),0)}})},Ba=function(i,A,t){var e=A/2,s=t/2,n=_(i[0],A)-e,o=s-_(i[1],t);return(Math.atan2(o,n)+Math.PI*2)%(Math.PI*2)},fa=function(i,A,t){var e=typeof i=="number"?i:Ba(i,A,t),s=Math.abs(A*Math.sin(e))+Math.abs(t*Math.cos(e)),n=A/2,o=t/2,a=s/2,r=Math.sin(e-Math.PI/2)*a,h=Math.cos(e-Math.PI/2)*a;return[s,n-h,n+h,o-r,o+r]},pA=function(i,A){return Math.sqrt(i*i+A*A)},Ki=function(i,A,t,e,s){var n=[[0,0],[0,A],[i,0],[i,A]];return n.reduce(function(o,a){var r=a[0],h=a[1],c=pA(t-r,e-h);return(s?c<o.optimumDistance:c>o.optimumDistance)?{optimumCorner:a,optimumDistance:c}:o},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},pa=function(i,A,t,e,s){var n=0,o=0;switch(i.size){case 0:i.shape===0?n=o=Math.min(Math.abs(A),Math.abs(A-e),Math.abs(t),Math.abs(t-s)):i.shape===1&&(n=Math.min(Math.abs(A),Math.abs(A-e)),o=Math.min(Math.abs(t),Math.abs(t-s)));break;case 2:if(i.shape===0)n=o=Math.min(pA(A,t),pA(A,t-s),pA(A-e,t),pA(A-e,t-s));else if(i.shape===1){var a=Math.min(Math.abs(t),Math.abs(t-s))/Math.min(Math.abs(A),Math.abs(A-e)),r=Ki(e,s,A,t,!0),h=r[0],c=r[1];n=pA(h-A,(c-t)/a),o=a*n}break;case 1:i.shape===0?n=o=Math.max(Math.abs(A),Math.abs(A-e),Math.abs(t),Math.abs(t-s)):i.shape===1&&(n=Math.max(Math.abs(A),Math.abs(A-e)),o=Math.max(Math.abs(t),Math.abs(t-s)));break;case 3:if(i.shape===0)n=o=Math.max(pA(A,t),pA(A,t-s),pA(A-e,t),pA(A-e,t-s));else if(i.shape===1){var a=Math.max(Math.abs(t),Math.abs(t-s))/Math.max(Math.abs(A),Math.abs(A-e)),u=Ki(e,s,A,t,!1),h=u[0],c=u[1];n=pA(h-A,(c-t)/a),o=a*n}break}return Array.isArray(i.size)&&(n=_(i.size[0],e),o=i.size.length===2?_(i.size[1],s):n),[n,o]},wa=function(i,A){var t=cA(180),e=[];return yA(A).forEach(function(s,n){if(n===0){var o=s[0];if(o.type===20&&o.value==="to"){t=xi(s);return}else if(Ti(o)){t=Ae.parse(i,o);return}}var a=te(i,s);e.push(a)}),{angle:t,stops:e,type:1}},ee=function(i,A){var t=cA(180),e=[];return yA(A).forEach(function(s,n){if(n===0){var o=s[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){t=xi(s);return}else if(Ti(o)){t=(Ae.parse(i,o)+cA(270))%cA(360);return}}var a=te(i,s);e.push(a)}),{angle:t,stops:e,type:1}},Ca=function(i,A){var t=cA(180),e=[],s=1,n=0,o=3,a=[];return yA(A).forEach(function(r,h){var c=r[0];if(h===0){if(R(c)&&c.value==="linear"){s=1;return}else if(R(c)&&c.value==="radial"){s=2;return}}if(c.type===18){if(c.name==="from"){var u=DA.parse(i,c.values[0]);e.push({stop:AA,color:u})}else if(c.name==="to"){var u=DA.parse(i,c.values[0]);e.push({stop:SA,color:u})}else if(c.name==="color-stop"){var l=c.values.filter(ZA);if(l.length===2){var u=DA.parse(i,l[1]),d=l[0];zA(d)&&e.push({stop:{type:16,number:d.number*100,flags:d.flags},color:u})}}}}),s===1?{angle:(t+cA(180))%cA(360),stops:e,type:s}:{size:o,shape:n,stops:e,position:a,type:s}},Ni="closest-side",Oi="farthest-side",ki="closest-corner",Gi="farthest-corner",Ri="circle",_i="ellipse",Pi="cover",Vi="contain",ya=function(i,A){var t=0,e=3,s=[],n=[];return yA(A).forEach(function(o,a){var r=!0;if(a===0){var h=!1;r=o.reduce(function(u,l){if(h)if(R(l))switch(l.value){case"center":return n.push(es),u;case"top":case"left":return n.push(AA),u;case"right":case"bottom":return n.push(SA),u}else(z(l)||LA(l))&&n.push(l);else if(R(l))switch(l.value){case Ri:return t=0,!1;case _i:return t=1,!1;case"at":return h=!0,!1;case Ni:return e=0,!1;case Pi:case Oi:return e=1,!1;case Vi:case ki:return e=2,!1;case Gi:return e=3,!1}else if(LA(l)||z(l))return Array.isArray(e)||(e=[]),e.push(l),!1;return u},r)}if(r){var c=te(i,o);s.push(c)}}),{size:e,shape:t,stops:s,position:n,type:2}},se=function(i,A){var t=0,e=3,s=[],n=[];return yA(A).forEach(function(o,a){var r=!0;if(a===0?r=o.reduce(function(c,u){if(R(u))switch(u.value){case"center":return n.push(es),!1;case"top":case"left":return n.push(AA),!1;case"right":case"bottom":return n.push(SA),!1}else if(z(u)||LA(u))return n.push(u),!1;return c},r):a===1&&(r=o.reduce(function(c,u){if(R(u))switch(u.value){case Ri:return t=0,!1;case _i:return t=1,!1;case Vi:case Ni:return e=0,!1;case Oi:return e=1,!1;case ki:return e=2,!1;case Pi:case Gi:return e=3,!1}else if(LA(u)||z(u))return Array.isArray(e)||(e=[]),e.push(u),!1;return c},r)),r){var h=te(i,o);s.push(h)}}),{size:e,shape:t,stops:s,position:n,type:2}},Qa=function(i){return i.type===1},ma=function(i){return i.type===2},is={name:"image",parse:function(i,A){if(A.type===22){var t={url:A.value,type:0};return i.cache.addImage(A.value),t}if(A.type===18){var e=Xi[A.name];if(typeof e>"u")throw new Error('Attempting to parse an unsupported image function "'+A.name+'"');return e(i,A.values)}throw new Error("Unsupported image type "+A.type)}};function Ua(i){return!(i.type===20&&i.value==="none")&&(i.type!==18||!!Xi[i.name])}var Xi={"linear-gradient":wa,"-moz-linear-gradient":ee,"-ms-linear-gradient":ee,"-o-linear-gradient":ee,"-webkit-linear-gradient":ee,"radial-gradient":ya,"-moz-radial-gradient":se,"-ms-radial-gradient":se,"-o-radial-gradient":se,"-webkit-radial-gradient":se,"-webkit-gradient":Ca},Ea={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(i,A){if(A.length===0)return[];var t=A[0];return t.type===20&&t.value==="none"?[]:A.filter(function(e){return ZA(e)&&Ua(e)}).map(function(e){return is.parse(i,e)})}},Fa={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(i,A){return A.map(function(t){if(R(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},va={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(i,A){return yA(A).map(function(t){return t.filter(z)}).map(Fi)}},ba={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(i,A){return yA(A).map(function(t){return t.filter(R).map(function(e){return e.value}).join(" ")}).map(Ia)}},Ia=function(i){switch(i){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},jA;(function(i){i.AUTO="auto",i.CONTAIN="contain",i.COVER="cover"})(jA||(jA={}));var Ha={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(i,A){return yA(A).map(function(t){return t.filter(Ta)})}},Ta=function(i){return R(i)||z(i)},ie=function(i){return{name:"border-"+i+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},xa=ie("top"),La=ie("right"),Sa=ie("bottom"),Da=ie("left"),ne=function(i){return{name:"border-radius-"+i,initialValue:"0 0",prefix:!1,type:1,parse:function(A,t){return Fi(t.filter(z))}}},Ma=ne("top-left"),Ka=ne("top-right"),Na=ne("bottom-right"),Oa=ne("bottom-left"),re=function(i){return{name:"border-"+i+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(A,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ka=re("top"),Ga=re("right"),Ra=re("bottom"),_a=re("left"),oe=function(i){return{name:"border-"+i+"-width",initialValue:"0",type:0,prefix:!1,parse:function(A,t){return Qt(t)?t.number:0}}},Pa=oe("top"),Va=oe("right"),Xa=oe("bottom"),Ya=oe("left"),Wa={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ja={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(i,A){return A==="rtl"?1:0}},za={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(i,A){return A.filter(R).reduce(function(t,e){return t|Za(e.value)},0)}},Za=function(i){switch(i){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ja={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(i,A){switch(A){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},$a={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(i,A){return A.type===20&&A.value==="normal"?0:A.type===17||A.type===15?A.number:0}},ae;(function(i){i.NORMAL="normal",i.STRICT="strict"})(ae||(ae={}));var qa={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(i,A){return A==="strict"?ae.STRICT:ae.NORMAL}},Al={name:"line-height",initialValue:"normal",prefix:!1,type:4},Yi=function(i,A){return R(i)&&i.value==="normal"?1.2*A:i.type===17?A*i.number:z(i)?_(i,A):A},tl={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(i,A){return A.type===20&&A.value==="none"?null:is.parse(i,A)}},el={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(i,A){return A==="inside"?0:1}},ns={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(i,A){switch(A){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},le=function(i){return{name:"margin-"+i,initialValue:"0",prefix:!1,type:4}},sl=le("top"),il=le("right"),nl=le("bottom"),rl=le("left"),ol={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(i,A){return A.filter(R).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},al={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(i,A){return A==="break-word"?"break-word":"normal"}},ce=function(i){return{name:"padding-"+i,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},ll=ce("top"),cl=ce("right"),hl=ce("bottom"),ul=ce("left"),dl={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(i,A){switch(A){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},gl={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(i,A){switch(A){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Bl={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(i,A){return A.length===1&&ts(A[0],"none")?[]:yA(A).map(function(t){for(var e={color:vA.TRANSPARENT,offsetX:AA,offsetY:AA,blur:AA},s=0,n=0;n<t.length;n++){var o=t[n];LA(o)?(s===0?e.offsetX=o:s===1?e.offsetY=o:e.blur=o,s++):e.color=DA.parse(i,o)}return e})}},fl={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(i,A){switch(A){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},pl={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(i,A){if(A.type===20&&A.value==="none")return null;if(A.type===18){var t=yl[A.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+A.name+'"');return t(A.values)}return null}},wl=function(i){var A=i.filter(function(t){return t.type===17}).map(function(t){return t.number});return A.length===6?A:null},Cl=function(i){var A=i.filter(function(r){return r.type===17}).map(function(r){return r.number}),t=A[0],e=A[1];A[2],A[3];var s=A[4],n=A[5];A[6],A[7],A[8],A[9],A[10],A[11];var o=A[12],a=A[13];return A[14],A[15],A.length===16?[t,e,s,n,o,a]:null},yl={matrix:wl,matrix3d:Cl},Wi={type:16,number:50,flags:ft},Ql=[Wi,Wi],ml={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(i,A){var t=A.filter(z);return t.length!==2?Ql:[t[0],t[1]]}},Ul={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(i,A){switch(A){case"hidden":return 1;case"collapse":return 2;default:return 0}}},Et;(function(i){i.NORMAL="normal",i.BREAK_ALL="break-all",i.KEEP_ALL="keep-all"})(Et||(Et={}));for(var El={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(i,A){switch(A){case"break-all":return Et.BREAK_ALL;case"keep-all":return Et.KEEP_ALL;default:return Et.NORMAL}}},Fl={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(i,A){if(A.type===20)return{auto:!0,order:0};if(zA(A))return{auto:!1,order:A.number};throw new Error("Invalid z-index number parsed")}},Ji={name:"time",parse:function(i,A){if(A.type===15)switch(A.unit.toLowerCase()){case"s":return 1e3*A.number;case"ms":return A.number}throw new Error("Unsupported time type")}},vl={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(i,A){return zA(A)?A.number:1}},bl={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Il={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(i,A){return A.filter(R).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},Hl={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(i,A){var t=[],e=[];return A.forEach(function(s){switch(s.type){case 20:case 0:t.push(s.value);break;case 17:t.push(s.number.toString());break;case 4:e.push(t.join(" ")),t.length=0;break}}),t.length&&e.push(t.join(" ")),e.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},Tl={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},xl={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(i,A){return zA(A)?A.number:R(A)&&A.value==="bold"?700:400}},Ll={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(i,A){return A.filter(R).map(function(t){return t.value})}},Sl={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(i,A){switch(A){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Z=function(i,A){return(i&A)!==0},Dl={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(i,A){if(A.length===0)return[];var t=A[0];return t.type===20&&t.value==="none"?[]:A}},Ml={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(i,A){if(A.length===0)return null;var t=A[0];if(t.type===20&&t.value==="none")return null;for(var e=[],s=A.filter(Ei),n=0;n<s.length;n++){var o=s[n],a=s[n+1];if(o.type===20){var r=a&&zA(a)?a.number:1;e.push({counter:o.value,increment:r})}}return e}},Kl={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(i,A){if(A.length===0)return[];for(var t=[],e=A.filter(Ei),s=0;s<e.length;s++){var n=e[s],o=e[s+1];if(R(n)&&n.value!=="none"){var a=o&&zA(o)?o.number:0;t.push({counter:n.value,reset:a})}}return t}},Nl={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(i,A){return A.filter(Qt).map(function(t){return Ji.parse(i,t)})}},Ol={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(i,A){if(A.length===0)return null;var t=A[0];if(t.type===20&&t.value==="none")return null;var e=[],s=A.filter(ca);if(s.length%2!==0)return null;for(var n=0;n<s.length;n+=2){var o=s[n].value,a=s[n+1].value;e.push({open:o,close:a})}return e}},zi=function(i,A,t){if(!i)return"";var e=i[Math.min(A,i.length-1)];return e?t?e.open:e.close:""},kl={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(i,A){return A.length===1&&ts(A[0],"none")?[]:yA(A).map(function(t){for(var e={color:255,offsetX:AA,offsetY:AA,blur:AA,spread:AA,inset:!1},s=0,n=0;n<t.length;n++){var o=t[n];ts(o,"inset")?e.inset=!0:LA(o)?(s===0?e.offsetX=o:s===1?e.offsetY=o:s===2?e.blur=o:e.spread=o,s++):e.color=DA.parse(i,o)}return e})}},Gl={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(i,A){var t=[0,1,2],e=[];return A.filter(R).forEach(function(s){switch(s.value){case"stroke":e.push(1);break;case"fill":e.push(0);break;case"markers":e.push(2);break}}),t.forEach(function(s){e.indexOf(s)===-1&&e.push(s)}),e}},Rl={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},_l={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(i,A){return Qt(A)?A.number:0}},Pl=(function(){function i(A,t){var e,s;this.animationDuration=L(A,Nl,t.animationDuration),this.backgroundClip=L(A,da,t.backgroundClip),this.backgroundColor=L(A,ga,t.backgroundColor),this.backgroundImage=L(A,Ea,t.backgroundImage),this.backgroundOrigin=L(A,Fa,t.backgroundOrigin),this.backgroundPosition=L(A,va,t.backgroundPosition),this.backgroundRepeat=L(A,ba,t.backgroundRepeat),this.backgroundSize=L(A,Ha,t.backgroundSize),this.borderTopColor=L(A,xa,t.borderTopColor),this.borderRightColor=L(A,La,t.borderRightColor),this.borderBottomColor=L(A,Sa,t.borderBottomColor),this.borderLeftColor=L(A,Da,t.borderLeftColor),this.borderTopLeftRadius=L(A,Ma,t.borderTopLeftRadius),this.borderTopRightRadius=L(A,Ka,t.borderTopRightRadius),this.borderBottomRightRadius=L(A,Na,t.borderBottomRightRadius),this.borderBottomLeftRadius=L(A,Oa,t.borderBottomLeftRadius),this.borderTopStyle=L(A,ka,t.borderTopStyle),this.borderRightStyle=L(A,Ga,t.borderRightStyle),this.borderBottomStyle=L(A,Ra,t.borderBottomStyle),this.borderLeftStyle=L(A,_a,t.borderLeftStyle),this.borderTopWidth=L(A,Pa,t.borderTopWidth),this.borderRightWidth=L(A,Va,t.borderRightWidth),this.borderBottomWidth=L(A,Xa,t.borderBottomWidth),this.borderLeftWidth=L(A,Ya,t.borderLeftWidth),this.boxShadow=L(A,kl,t.boxShadow),this.color=L(A,Wa,t.color),this.direction=L(A,Ja,t.direction),this.display=L(A,za,t.display),this.float=L(A,ja,t.cssFloat),this.fontFamily=L(A,Hl,t.fontFamily),this.fontSize=L(A,Tl,t.fontSize),this.fontStyle=L(A,Sl,t.fontStyle),this.fontVariant=L(A,Ll,t.fontVariant),this.fontWeight=L(A,xl,t.fontWeight),this.letterSpacing=L(A,$a,t.letterSpacing),this.lineBreak=L(A,qa,t.lineBreak),this.lineHeight=L(A,Al,t.lineHeight),this.listStyleImage=L(A,tl,t.listStyleImage),this.listStylePosition=L(A,el,t.listStylePosition),this.listStyleType=L(A,ns,t.listStyleType),this.marginTop=L(A,sl,t.marginTop),this.marginRight=L(A,il,t.marginRight),this.marginBottom=L(A,nl,t.marginBottom),this.marginLeft=L(A,rl,t.marginLeft),this.opacity=L(A,vl,t.opacity);var n=L(A,ol,t.overflow);this.overflowX=n[0],this.overflowY=n[n.length>1?1:0],this.overflowWrap=L(A,al,t.overflowWrap),this.paddingTop=L(A,ll,t.paddingTop),this.paddingRight=L(A,cl,t.paddingRight),this.paddingBottom=L(A,hl,t.paddingBottom),this.paddingLeft=L(A,ul,t.paddingLeft),this.paintOrder=L(A,Gl,t.paintOrder),this.position=L(A,gl,t.position),this.textAlign=L(A,dl,t.textAlign),this.textDecorationColor=L(A,bl,(e=t.textDecorationColor)!==null&&e!==void 0?e:t.color),this.textDecorationLine=L(A,Il,(s=t.textDecorationLine)!==null&&s!==void 0?s:t.textDecoration),this.textShadow=L(A,Bl,t.textShadow),this.textTransform=L(A,fl,t.textTransform),this.transform=L(A,pl,t.transform),this.transformOrigin=L(A,ml,t.transformOrigin),this.visibility=L(A,Ul,t.visibility),this.webkitTextStrokeColor=L(A,Rl,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=L(A,_l,t.webkitTextStrokeWidth),this.wordBreak=L(A,El,t.wordBreak),this.zIndex=L(A,Fl,t.zIndex)}return i.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},i.prototype.isTransparent=function(){return MA(this.backgroundColor)},i.prototype.isTransformed=function(){return this.transform!==null},i.prototype.isPositioned=function(){return this.position!==0},i.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},i.prototype.isFloating=function(){return this.float!==0},i.prototype.isInlineLevel=function(){return Z(this.display,4)||Z(this.display,33554432)||Z(this.display,268435456)||Z(this.display,536870912)||Z(this.display,67108864)||Z(this.display,134217728)},i})(),Vl=(function(){function i(A,t){this.content=L(A,Dl,t.content),this.quotes=L(A,Ol,t.quotes)}return i})(),Zi=(function(){function i(A,t){this.counterIncrement=L(A,Ml,t.counterIncrement),this.counterReset=L(A,Kl,t.counterReset)}return i})(),L=function(i,A,t){var e=new mi,s=t!==null&&typeof t<"u"?t.toString():A.initialValue;e.write(s);var n=new Ui(e.read());switch(A.type){case 2:var o=n.parseComponentValue();return A.parse(i,R(o)?o.value:A.initialValue);case 0:return A.parse(i,n.parseComponentValue());case 1:return A.parse(i,n.parseComponentValues());case 4:return n.parseComponentValue();case 3:switch(A.format){case"angle":return Ae.parse(i,n.parseComponentValue());case"color":return DA.parse(i,n.parseComponentValue());case"image":return is.parse(i,n.parseComponentValue());case"length":var a=n.parseComponentValue();return LA(a)?a:AA;case"length-percentage":var r=n.parseComponentValue();return z(r)?r:AA;case"time":return Ji.parse(i,n.parseComponentValue())}break}},Xl="data-html2canvas-debug",Yl=function(i){var A=i.getAttribute(Xl);switch(A){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},rs=function(i,A){var t=Yl(i);return t===1||A===t},QA=(function(){function i(A,t){if(this.context=A,this.textNodes=[],this.elements=[],this.flags=0,rs(t,3))debugger;this.styles=new Pl(A,window.getComputedStyle(t,null)),ys(t)&&(this.styles.animationDuration.some(function(e){return e>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=Dt(this.context,t),rs(t,4)&&(this.flags|=16)}return i})(),Wl="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ji="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ft=typeof Uint8Array>"u"?[]:new Uint8Array(256),he=0;he<ji.length;he++)Ft[ji.charCodeAt(he)]=he;for(var Jl=function(i){var A=i.length*.75,t=i.length,e,s=0,n,o,a,r;i[i.length-1]==="="&&(A--,i[i.length-2]==="="&&A--);var h=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(A):new Array(A),c=Array.isArray(h)?h:new Uint8Array(h);for(e=0;e<t;e+=4)n=Ft[i.charCodeAt(e)],o=Ft[i.charCodeAt(e+1)],a=Ft[i.charCodeAt(e+2)],r=Ft[i.charCodeAt(e+3)],c[s++]=n<<2|o>>4,c[s++]=(o&15)<<4|a>>2,c[s++]=(a&3)<<6|r&63;return h},zl=function(i){for(var A=i.length,t=[],e=0;e<A;e+=2)t.push(i[e+1]<<8|i[e]);return t},Zl=function(i){for(var A=i.length,t=[],e=0;e<A;e+=4)t.push(i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e]);return t},PA=5,os=11,as=2,jl=os-PA,$i=65536>>PA,$l=1<<PA,ls=$l-1,ql=1024>>PA,Ac=$i+ql,tc=Ac,ec=32,sc=tc+ec,ic=65536>>os,nc=1<<jl,rc=nc-1,qi=function(i,A,t){return i.slice?i.slice(A,t):new Uint16Array(Array.prototype.slice.call(i,A,t))},oc=function(i,A,t){return i.slice?i.slice(A,t):new Uint32Array(Array.prototype.slice.call(i,A,t))},ac=function(i,A){var t=Jl(i),e=Array.isArray(t)?Zl(t):new Uint32Array(t),s=Array.isArray(t)?zl(t):new Uint16Array(t),n=24,o=qi(s,n/2,e[4]/2),a=e[5]===2?qi(s,(n+e[4])/2):oc(e,Math.ceil((n+e[4])/4));return new lc(e[0],e[1],e[2],e[3],o,a)},lc=(function(){function i(A,t,e,s,n,o){this.initialValue=A,this.errorValue=t,this.highStart=e,this.highValueIndex=s,this.index=n,this.data=o}return i.prototype.get=function(A){var t;if(A>=0){if(A<55296||A>56319&&A<=65535)return t=this.index[A>>PA],t=(t<<as)+(A&ls),this.data[t];if(A<=65535)return t=this.index[$i+(A-55296>>PA)],t=(t<<as)+(A&ls),this.data[t];if(A<this.highStart)return t=sc-ic+(A>>os),t=this.index[t],t+=A>>PA&rc,t=this.index[t],t=(t<<as)+(A&ls),this.data[t];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},i})(),An="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cc=typeof Uint8Array>"u"?[]:new Uint8Array(256),ue=0;ue<An.length;ue++)cc[An.charCodeAt(ue)]=ue;var hc=1,cs=2,hs=3,tn=4,en=5,uc=7,sn=8,us=9,ds=10,nn=11,rn=12,on=13,an=14,gs=15,dc=function(i){for(var A=[],t=0,e=i.length;t<e;){var s=i.charCodeAt(t++);if(s>=55296&&s<=56319&&t<e){var n=i.charCodeAt(t++);(n&64512)===56320?A.push(((s&1023)<<10)+(n&1023)+65536):(A.push(s),t--)}else A.push(s)}return A},gc=function(){for(var i=[],A=0;A<arguments.length;A++)i[A]=arguments[A];if(String.fromCodePoint)return String.fromCodePoint.apply(String,i);var t=i.length;if(!t)return"";for(var e=[],s=-1,n="";++s<t;){var o=i[s];o<=65535?e.push(o):(o-=65536,e.push((o>>10)+55296,o%1024+56320)),(s+1===t||e.length>16384)&&(n+=String.fromCharCode.apply(String,e),e.length=0)}return n},Bc=ac(Wl),hA="",Bs="",fc=function(i){return Bc.get(i)},pc=function(i,A,t){var e=t-2,s=A[e],n=A[t-1],o=A[t];if(n===cs&&o===hs)return hA;if(n===cs||n===hs||n===tn||o===cs||o===hs||o===tn)return Bs;if(n===sn&&[sn,us,nn,rn].indexOf(o)!==-1||(n===nn||n===us)&&(o===us||o===ds)||(n===rn||n===ds)&&o===ds||o===on||o===en||o===uc||n===hc)return hA;if(n===on&&o===an){for(;s===en;)s=A[--e];if(s===an)return hA}if(n===gs&&o===gs){for(var a=0;s===gs;)a++,s=A[--e];if(a%2===0)return hA}return Bs},wc=function(i){var A=dc(i),t=A.length,e=0,s=0,n=A.map(fc);return{next:function(){if(e>=t)return{done:!0,value:null};for(var o=hA;e<t&&(o=pc(A,n,++e))===hA;);if(o!==hA||e===t){var a=gc.apply(null,A.slice(s,e));return s=e,{value:a,done:!1}}return{done:!0,value:null}}}},Cc=function(i){for(var A=wc(i),t=[],e;!(e=A.next()).done;)e.value&&t.push(e.value.slice());return t},yc=function(i){var A=123;if(i.createRange){var t=i.createRange();if(t.getBoundingClientRect){var e=i.createElement("boundtest");e.style.height=A+"px",e.style.display="block",i.body.appendChild(e),t.selectNode(e);var s=t.getBoundingClientRect(),n=Math.round(s.height);if(i.body.removeChild(e),n===A)return!0}}return!1},Qc=function(i){var A=i.createElement("boundtest");A.style.width="50px",A.style.display="block",A.style.fontSize="12px",A.style.letterSpacing="0px",A.style.wordSpacing="0px",i.body.appendChild(A);var t=i.createRange();A.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var e=A.firstChild,s=Mt(e.data).map(function(r){return Y(r)}),n=0,o={},a=s.every(function(r,h){t.setStart(e,n),t.setEnd(e,n+r.length);var c=t.getBoundingClientRect();n+=r.length;var u=c.x>o.x||c.y>o.y;return o=c,h===0?!0:u});return i.body.removeChild(A),a},mc=function(){return typeof new Image().crossOrigin<"u"},Uc=function(){return typeof new XMLHttpRequest().responseType=="string"},Ec=function(i){var A=new Image,t=i.createElement("canvas"),e=t.getContext("2d");if(!e)return!1;A.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{e.drawImage(A,0,0),t.toDataURL()}catch{return!1}return!0},ln=function(i){return i[0]===0&&i[1]===255&&i[2]===0&&i[3]===255},Fc=function(i){var A=i.createElement("canvas"),t=100;A.width=t,A.height=t;var e=A.getContext("2d");if(!e)return Promise.reject(!1);e.fillStyle="rgb(0, 255, 0)",e.fillRect(0,0,t,t);var s=new Image,n=A.toDataURL();s.src=n;var o=fs(t,t,0,0,s);return e.fillStyle="red",e.fillRect(0,0,t,t),cn(o).then(function(a){e.drawImage(a,0,0);var r=e.getImageData(0,0,t,t).data;e.fillStyle="red",e.fillRect(0,0,t,t);var h=i.createElement("div");return h.style.backgroundImage="url("+n+")",h.style.height=t+"px",ln(r)?cn(fs(t,t,0,0,h)):Promise.reject(!1)}).then(function(a){return e.drawImage(a,0,0),ln(e.getImageData(0,0,t,t).data)}).catch(function(){return!1})},fs=function(i,A,t,e,s){var n="http://www.w3.org/2000/svg",o=document.createElementNS(n,"svg"),a=document.createElementNS(n,"foreignObject");return o.setAttributeNS(null,"width",i.toString()),o.setAttributeNS(null,"height",A.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",e.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(a),a.appendChild(s),o},cn=function(i){return new Promise(function(A,t){var e=new Image;e.onload=function(){return A(e)},e.onerror=t,e.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(i))})},tA={get SUPPORT_RANGE_BOUNDS(){var i=yc(document);return Object.defineProperty(tA,"SUPPORT_RANGE_BOUNDS",{value:i}),i},get SUPPORT_WORD_BREAKING(){var i=tA.SUPPORT_RANGE_BOUNDS&&Qc(document);return Object.defineProperty(tA,"SUPPORT_WORD_BREAKING",{value:i}),i},get SUPPORT_SVG_DRAWING(){var i=Ec(document);return Object.defineProperty(tA,"SUPPORT_SVG_DRAWING",{value:i}),i},get SUPPORT_FOREIGNOBJECT_DRAWING(){var i=typeof Array.from=="function"&&typeof window.fetch=="function"?Fc(document):Promise.resolve(!1);return Object.defineProperty(tA,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:i}),i},get SUPPORT_CORS_IMAGES(){var i=mc();return Object.defineProperty(tA,"SUPPORT_CORS_IMAGES",{value:i}),i},get SUPPORT_RESPONSE_TYPE(){var i=Uc();return Object.defineProperty(tA,"SUPPORT_RESPONSE_TYPE",{value:i}),i},get SUPPORT_CORS_XHR(){var i="withCredentials"in new XMLHttpRequest;return Object.defineProperty(tA,"SUPPORT_CORS_XHR",{value:i}),i},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var i=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(tA,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:i}),i}},vt=(function(){function i(A,t){this.text=A,this.bounds=t}return i})(),vc=function(i,A,t,e){var s=Hc(A,t),n=[],o=0;return s.forEach(function(a){if(t.textDecorationLine.length||a.trim().length>0)if(tA.SUPPORT_RANGE_BOUNDS){var r=hn(e,o,a.length).getClientRects();if(r.length>1){var h=ps(a),c=0;h.forEach(function(l){n.push(new vt(l,EA.fromDOMRectList(i,hn(e,c+o,l.length).getClientRects()))),c+=l.length})}else n.push(new vt(a,EA.fromDOMRectList(i,r)))}else{var u=e.splitText(a.length);n.push(new vt(a,bc(i,e))),e=u}else tA.SUPPORT_RANGE_BOUNDS||(e=e.splitText(a.length));o+=a.length}),n},bc=function(i,A){var t=A.ownerDocument;if(t){var e=t.createElement("html2canvaswrapper");e.appendChild(A.cloneNode(!0));var s=A.parentNode;if(s){s.replaceChild(e,A);var n=Dt(i,e);return e.firstChild&&s.replaceChild(e.firstChild,e),n}}return EA.EMPTY},hn=function(i,A,t){var e=i.ownerDocument;if(!e)throw new Error("Node has no owner document");var s=e.createRange();return s.setStart(i,A),s.setEnd(i,A+t),s},ps=function(i){if(tA.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(A.segment(i)).map(function(t){return t.segment})}return Cc(i)},Ic=function(i,A){if(tA.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(i)).map(function(e){return e.segment})}return xc(i,A)},Hc=function(i,A){return A.letterSpacing!==0?ps(i):Ic(i,A)},Tc=[32,160,4961,65792,65793,4153,4241],xc=function(i,A){for(var t=so(i,{lineBreak:A.lineBreak,wordBreak:A.overflowWrap==="break-word"?"break-word":A.wordBreak}),e=[],s,n=function(){if(s.value){var o=s.value.slice(),a=Mt(o),r="";a.forEach(function(h){Tc.indexOf(h)===-1?r+=Y(h):(r.length&&e.push(r),e.push(Y(h)),r="")}),r.length&&e.push(r)}};!(s=t.next()).done;)n();return e},Lc=(function(){function i(A,t,e){this.text=Sc(t.data,e.textTransform),this.textBounds=vc(A,this.text,e,t)}return i})(),Sc=function(i,A){switch(A){case 1:return i.toLowerCase();case 3:return i.replace(Dc,Mc);case 2:return i.toUpperCase();default:return i}},Dc=/(^|\s|:|-|\(|\))([a-z])/g,Mc=function(i,A,t){return i.length>0?A+t.toUpperCase():i},un=(function(i){fA(A,i);function A(t,e){var s=i.call(this,t,e)||this;return s.src=e.currentSrc||e.src,s.intrinsicWidth=e.naturalWidth,s.intrinsicHeight=e.naturalHeight,s.context.cache.addImage(s.src),s}return A})(QA),dn=(function(i){fA(A,i);function A(t,e){var s=i.call(this,t,e)||this;return s.canvas=e,s.intrinsicWidth=e.width,s.intrinsicHeight=e.height,s}return A})(QA),gn=(function(i){fA(A,i);function A(t,e){var s=i.call(this,t,e)||this,n=new XMLSerializer,o=Dt(t,e);return e.setAttribute("width",o.width+"px"),e.setAttribute("height",o.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(n.serializeToString(e)),s.intrinsicWidth=e.width.baseVal.value,s.intrinsicHeight=e.height.baseVal.value,s.context.cache.addImage(s.svg),s}return A})(QA),Bn=(function(i){fA(A,i);function A(t,e){var s=i.call(this,t,e)||this;return s.value=e.value,s}return A})(QA),ws=(function(i){fA(A,i);function A(t,e){var s=i.call(this,t,e)||this;return s.start=e.start,s.reversed=typeof e.reversed=="boolean"&&e.reversed===!0,s}return A})(QA),Kc=[{type:15,flags:0,unit:"px",number:3}],Nc=[{type:16,flags:0,number:50}],Oc=function(i){return i.width>i.height?new EA(i.left+(i.width-i.height)/2,i.top,i.height,i.height):i.width<i.height?new EA(i.left,i.top+(i.height-i.width)/2,i.width,i.width):i},kc=function(i){var A=i.type===Gc?new Array(i.value.length+1).join(""):i.value;return A.length===0?i.placeholder||"":A},de="checkbox",ge="radio",Gc="password",fn=707406591,Cs=(function(i){fA(A,i);function A(t,e){var s=i.call(this,t,e)||this;switch(s.type=e.type.toLowerCase(),s.checked=e.checked,s.value=kc(e),(s.type===de||s.type===ge)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=Oc(s.bounds)),s.type){case de:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Kc;break;case ge:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Nc;break}return s}return A})(QA),pn=(function(i){fA(A,i);function A(t,e){var s=i.call(this,t,e)||this,n=e.options[e.selectedIndex||0];return s.value=n&&n.text||"",s}return A})(QA),wn=(function(i){fA(A,i);function A(t,e){var s=i.call(this,t,e)||this;return s.value=e.value,s}return A})(QA),Cn=(function(i){fA(A,i);function A(t,e){var s=i.call(this,t,e)||this;s.src=e.src,s.width=parseInt(e.width,10)||0,s.height=parseInt(e.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(e.contentWindow&&e.contentWindow.document&&e.contentWindow.document.documentElement){s.tree=Qn(t,e.contentWindow.document.documentElement);var n=e.contentWindow.document.documentElement?Ut(t,getComputedStyle(e.contentWindow.document.documentElement).backgroundColor):vA.TRANSPARENT,o=e.contentWindow.document.body?Ut(t,getComputedStyle(e.contentWindow.document.body).backgroundColor):vA.TRANSPARENT;s.backgroundColor=MA(n)?MA(o)?s.styles.backgroundColor:o:n}}catch{}return s}return A})(QA),Rc=["OL","UL","MENU"],Be=function(i,A,t,e){for(var s=A.firstChild,n=void 0;s;s=n)if(n=s.nextSibling,mn(s)&&s.data.trim().length>0)t.textNodes.push(new Lc(i,s,t.styles));else if($A(s))if(In(s)&&s.assignedNodes)s.assignedNodes().forEach(function(a){return Be(i,a,t,e)});else{var o=yn(i,s);o.styles.isVisible()&&(_c(s,o,e)?o.flags|=4:Pc(o.styles)&&(o.flags|=2),Rc.indexOf(s.tagName)!==-1&&(o.flags|=8),t.elements.push(o),s.slot,s.shadowRoot?Be(i,s.shadowRoot,o,e):!pe(s)&&!Un(s)&&!we(s)&&Be(i,s,o,e))}},yn=function(i,A){return ms(A)?new un(i,A):En(A)?new dn(i,A):Un(A)?new gn(i,A):Vc(A)?new Bn(i,A):Xc(A)?new ws(i,A):Yc(A)?new Cs(i,A):we(A)?new pn(i,A):pe(A)?new wn(i,A):vn(A)?new Cn(i,A):new QA(i,A)},Qn=function(i,A){var t=yn(i,A);return t.flags|=4,Be(i,A,t,t),t},_c=function(i,A,t){return A.styles.isPositionedWithZIndex()||A.styles.opacity<1||A.styles.isTransformed()||Qs(i)&&t.styles.isTransparent()},Pc=function(i){return i.isPositioned()||i.isFloating()},mn=function(i){return i.nodeType===Node.TEXT_NODE},$A=function(i){return i.nodeType===Node.ELEMENT_NODE},ys=function(i){return $A(i)&&typeof i.style<"u"&&!fe(i)},fe=function(i){return typeof i.className=="object"},Vc=function(i){return i.tagName==="LI"},Xc=function(i){return i.tagName==="OL"},Yc=function(i){return i.tagName==="INPUT"},Wc=function(i){return i.tagName==="HTML"},Un=function(i){return i.tagName==="svg"},Qs=function(i){return i.tagName==="BODY"},En=function(i){return i.tagName==="CANVAS"},Fn=function(i){return i.tagName==="VIDEO"},ms=function(i){return i.tagName==="IMG"},vn=function(i){return i.tagName==="IFRAME"},bn=function(i){return i.tagName==="STYLE"},Jc=function(i){return i.tagName==="SCRIPT"},pe=function(i){return i.tagName==="TEXTAREA"},we=function(i){return i.tagName==="SELECT"},In=function(i){return i.tagName==="SLOT"},Hn=function(i){return i.tagName.indexOf("-")>0},zc=(function(){function i(){this.counters={}}return i.prototype.getCounterValue=function(A){var t=this.counters[A];return t&&t.length?t[t.length-1]:1},i.prototype.getCounterValues=function(A){var t=this.counters[A];return t||[]},i.prototype.pop=function(A){var t=this;A.forEach(function(e){return t.counters[e].pop()})},i.prototype.parse=function(A){var t=this,e=A.counterIncrement,s=A.counterReset,n=!0;e!==null&&e.forEach(function(a){var r=t.counters[a.counter];r&&a.increment!==0&&(n=!1,r.length||r.push(1),r[Math.max(0,r.length-1)]+=a.increment)});var o=[];return n&&s.forEach(function(a){var r=t.counters[a.counter];o.push(a.counter),r||(r=t.counters[a.counter]=[]),r.push(a.reset)}),o},i})(),Tn={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},xn={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Zc={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},jc={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},qA=function(i,A,t,e,s,n){return i<A||i>t?It(i,s,n.length>0):e.integers.reduce(function(o,a,r){for(;i>=a;)i-=a,o+=e.values[r];return o},"")+n},Ln=function(i,A,t,e){var s="";do t||i--,s=e(i)+s,i/=A;while(i*A>=A);return s},W=function(i,A,t,e,s){var n=t-A+1;return(i<0?"-":"")+(Ln(Math.abs(i),n,e,function(o){return Y(Math.floor(o%n)+A)})+s)},VA=function(i,A,t){t===void 0&&(t=". ");var e=A.length;return Ln(Math.abs(i),e,!1,function(s){return A[Math.floor(s%e)]})+t},At=1,NA=2,OA=4,bt=8,bA=function(i,A,t,e,s,n){if(i<-9999||i>9999)return It(i,4,s.length>0);var o=Math.abs(i),a=s;if(o===0)return A[0]+a;for(var r=0;o>0&&r<=4;r++){var h=o%10;h===0&&Z(n,At)&&a!==""?a=A[h]+a:h>1||h===1&&r===0||h===1&&r===1&&Z(n,NA)||h===1&&r===1&&Z(n,OA)&&i>100||h===1&&r>1&&Z(n,bt)?a=A[h]+(r>0?t[r-1]:"")+a:h===1&&r>0&&(a=t[r-1]+a),o=Math.floor(o/10)}return(i<0?e:"")+a},Sn="",Dn="",Mn="",Us="",It=function(i,A,t){var e=t?". ":"",s=t?"":"",n=t?", ":"",o=t?" ":"";switch(A){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var a=W(i,48,57,!0,e);return a.length<4?"0"+a:a;case 4:return VA(i,"",s);case 6:return qA(i,1,3999,Tn,3,e).toLowerCase();case 7:return qA(i,1,3999,Tn,3,e);case 8:return W(i,945,969,!1,e);case 9:return W(i,97,122,!1,e);case 10:return W(i,65,90,!1,e);case 11:return W(i,1632,1641,!0,e);case 12:case 49:return qA(i,1,9999,xn,3,e);case 35:return qA(i,1,9999,xn,3,e).toLowerCase();case 13:return W(i,2534,2543,!0,e);case 14:case 30:return W(i,6112,6121,!0,e);case 15:return VA(i,"",s);case 16:return VA(i,"",s);case 17:case 48:return bA(i,"",Sn,"",s,NA|OA|bt);case 47:return bA(i,"",Dn,"",s,At|NA|OA|bt);case 42:return bA(i,"",Sn,"",s,NA|OA|bt);case 41:return bA(i,"",Dn,"",s,At|NA|OA|bt);case 26:return bA(i,"","",Mn,s,0);case 25:return bA(i,"","",Mn,s,At|NA|OA);case 31:return bA(i,"","",Us,n,At|NA|OA);case 33:return bA(i,"","",Us,n,0);case 32:return bA(i,"","",Us,n,At|NA|OA);case 18:return W(i,2406,2415,!0,e);case 20:return qA(i,1,19999,jc,3,e);case 21:return W(i,2790,2799,!0,e);case 22:return W(i,2662,2671,!0,e);case 22:return qA(i,1,10999,Zc,3,e);case 23:return VA(i,"");case 24:return VA(i,"");case 27:return W(i,3302,3311,!0,e);case 28:return VA(i,"",s);case 29:return VA(i,"",s);case 34:return W(i,3792,3801,!0,e);case 37:return W(i,6160,6169,!0,e);case 38:return W(i,4160,4169,!0,e);case 39:return W(i,2918,2927,!0,e);case 40:return W(i,1776,1785,!0,e);case 43:return W(i,3046,3055,!0,e);case 44:return W(i,3174,3183,!0,e);case 45:return W(i,3664,3673,!0,e);case 46:return W(i,3872,3881,!0,e);default:return W(i,48,57,!0,e)}},Kn="data-html2canvas-ignore",Nn=(function(){function i(A,t,e){if(this.context=A,this.options=e,this.scrolledElements=[],this.referenceElement=t,this.counters=new zc,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return i.prototype.toIFrame=function(A,t){var e=this,s=$c(A,t);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var n=A.defaultView.pageXOffset,o=A.defaultView.pageYOffset,a=s.contentWindow,r=a.document,h=th(s).then(function(){return iA(e,void 0,void 0,function(){var c,u;return eA(this,function(l){switch(l.label){case 0:return this.scrolledElements.forEach(nh),a&&(a.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==t.top||a.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-t.left,a.scrollY-t.top,0,0))),c=this.options.onclone,u=this.clonedReferenceElement,typeof u>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:r.fonts&&r.fonts.ready?[4,r.fonts.ready]:[3,2];case 1:l.sent(),l.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Ah(r)]:[3,4];case 3:l.sent(),l.label=4;case 4:return typeof c=="function"?[2,Promise.resolve().then(function(){return c(r,u)}).then(function(){return s})]:[2,s]}})})});return r.open(),r.write(sh(document.doctype)+"<html></html>"),ih(this.referenceElement.ownerDocument,n,o),r.replaceChild(r.adoptNode(this.documentElement),r.documentElement),r.close(),h},i.prototype.createElementClone=function(A){if(rs(A,2))debugger;if(En(A))return this.createCanvasClone(A);if(Fn(A))return this.createVideoClone(A);if(bn(A))return this.createStyleClone(A);var t=A.cloneNode(!1);return ms(t)&&(ms(A)&&A.currentSrc&&A.currentSrc!==A.src&&(t.src=A.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),Hn(t)?this.createCustomElementClone(t):t},i.prototype.createCustomElementClone=function(A){var t=document.createElement("html2canvascustomelement");return Es(A.style,t),t},i.prototype.createStyleClone=function(A){try{var t=A.sheet;if(t&&t.cssRules){var e=[].slice.call(t.cssRules,0).reduce(function(n,o){return o&&typeof o.cssText=="string"?n+o.cssText:n},""),s=A.cloneNode(!1);return s.textContent=e,s}}catch(n){if(this.context.logger.error("Unable to access cssRules property",n),n.name!=="SecurityError")throw n}return A.cloneNode(!1)},i.prototype.createCanvasClone=function(A){var t;if(this.options.inlineImages&&A.ownerDocument){var e=A.ownerDocument.createElement("img");try{return e.src=A.toDataURL(),e}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",A)}}var s=A.cloneNode(!1);try{s.width=A.width,s.height=A.height;var n=A.getContext("2d"),o=s.getContext("2d");if(o)if(!this.options.allowTaint&&n)o.putImageData(n.getImageData(0,0,A.width,A.height),0,0);else{var a=(t=A.getContext("webgl2"))!==null&&t!==void 0?t:A.getContext("webgl");if(a){var r=a.getContextAttributes();r?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",A)}o.drawImage(A,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",A)}return s},i.prototype.createVideoClone=function(A){var t=A.ownerDocument.createElement("canvas");t.width=A.offsetWidth,t.height=A.offsetHeight;var e=t.getContext("2d");try{return e&&(e.drawImage(A,0,0,t.width,t.height),this.options.allowTaint||e.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",A)}var s=A.ownerDocument.createElement("canvas");return s.width=A.offsetWidth,s.height=A.offsetHeight,s},i.prototype.appendChildNode=function(A,t,e){(!$A(t)||!Jc(t)&&!t.hasAttribute(Kn)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!$A(t)||!bn(t))&&A.appendChild(this.cloneNode(t,e))},i.prototype.cloneChildNodes=function(A,t,e){for(var s=this,n=A.shadowRoot?A.shadowRoot.firstChild:A.firstChild;n;n=n.nextSibling)if($A(n)&&In(n)&&typeof n.assignedNodes=="function"){var o=n.assignedNodes();o.length&&o.forEach(function(a){return s.appendChildNode(t,a,e)})}else this.appendChildNode(t,n,e)},i.prototype.cloneNode=function(A,t){if(mn(A))return document.createTextNode(A.data);if(!A.ownerDocument)return A.cloneNode(!1);var e=A.ownerDocument.defaultView;if(e&&$A(A)&&(ys(A)||fe(A))){var s=this.createElementClone(A);s.style.transitionProperty="none";var n=e.getComputedStyle(A),o=e.getComputedStyle(A,":before"),a=e.getComputedStyle(A,":after");this.referenceElement===A&&ys(s)&&(this.clonedReferenceElement=s),Qs(s)&&ah(s);var r=this.counters.parse(new Zi(this.context,n)),h=this.resolvePseudoContent(A,s,o,Ht.BEFORE);Hn(A)&&(t=!0),Fn(A)||this.cloneChildNodes(A,s,t),h&&s.insertBefore(h,s.firstChild);var c=this.resolvePseudoContent(A,s,a,Ht.AFTER);return c&&s.appendChild(c),this.counters.pop(r),(n&&(this.options.copyStyles||fe(A))&&!vn(A)||t)&&Es(n,s),(A.scrollTop!==0||A.scrollLeft!==0)&&this.scrolledElements.push([s,A.scrollLeft,A.scrollTop]),(pe(A)||we(A))&&(pe(s)||we(s))&&(s.value=A.value),s}return A.cloneNode(!1)},i.prototype.resolvePseudoContent=function(A,t,e,s){var n=this;if(e){var o=e.content,a=t.ownerDocument;if(!(!a||!o||o==="none"||o==="-moz-alt-content"||e.display==="none")){this.counters.parse(new Zi(this.context,e));var r=new Vl(this.context,e),h=a.createElement("html2canvaspseudoelement");Es(e,h),r.content.forEach(function(u){if(u.type===0)h.appendChild(a.createTextNode(u.value));else if(u.type===22){var l=a.createElement("img");l.src=u.value,l.style.opacity="1",h.appendChild(l)}else if(u.type===18){if(u.name==="attr"){var d=u.values.filter(R);d.length&&h.appendChild(a.createTextNode(A.getAttribute(d[0].value)||""))}else if(u.name==="counter"){var g=u.values.filter(ZA),f=g[0],B=g[1];if(f&&R(f)){var w=n.counters.getCounterValue(f.value),p=B&&R(B)?ns.parse(n.context,B.value):3;h.appendChild(a.createTextNode(It(w,p,!1)))}}else if(u.name==="counters"){var C=u.values.filter(ZA),f=C[0],y=C[1],B=C[2];if(f&&R(f)){var U=n.counters.getCounterValues(f.value),Q=B&&R(B)?ns.parse(n.context,B.value):3,E=y&&y.type===0?y.value:"",F=U.map(function(H){return It(H,Q,!1)}).join(E);h.appendChild(a.createTextNode(F))}}}else if(u.type===20)switch(u.value){case"open-quote":h.appendChild(a.createTextNode(zi(r.quotes,n.quoteDepth++,!0)));break;case"close-quote":h.appendChild(a.createTextNode(zi(r.quotes,--n.quoteDepth,!1)));break;default:h.appendChild(a.createTextNode(u.value))}}),h.className=Fs+" "+vs;var c=s===Ht.BEFORE?" "+Fs:" "+vs;return fe(t)?t.className.baseValue+=c:t.className+=c,h}}},i.destroy=function(A){return A.parentNode?(A.parentNode.removeChild(A),!0):!1},i})(),Ht;(function(i){i[i.BEFORE=0]="BEFORE",i[i.AFTER=1]="AFTER"})(Ht||(Ht={}));var $c=function(i,A){var t=i.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=A.width.toString(),t.height=A.height.toString(),t.scrolling="no",t.setAttribute(Kn,"true"),i.body.appendChild(t),t},qc=function(i){return new Promise(function(A){if(i.complete){A();return}if(!i.src){A();return}i.onload=A,i.onerror=A})},Ah=function(i){return Promise.all([].slice.call(i.images,0).map(qc))},th=function(i){return new Promise(function(A,t){var e=i.contentWindow;if(!e)return t("No window assigned for iframe");var s=e.document;e.onload=i.onload=function(){e.onload=i.onload=null;var n=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(n),A(i))},50)}})},eh=["all","d","content"],Es=function(i,A){for(var t=i.length-1;t>=0;t--){var e=i.item(t);eh.indexOf(e)===-1&&A.style.setProperty(e,i.getPropertyValue(e))}return A},sh=function(i){var A="";return i&&(A+="<!DOCTYPE ",i.name&&(A+=i.name),i.internalSubset&&(A+=i.internalSubset),i.publicId&&(A+='"'+i.publicId+'"'),i.systemId&&(A+='"'+i.systemId+'"'),A+=">"),A},ih=function(i,A,t){i&&i.defaultView&&(A!==i.defaultView.pageXOffset||t!==i.defaultView.pageYOffset)&&i.defaultView.scrollTo(A,t)},nh=function(i){var A=i[0],t=i[1],e=i[2];A.scrollLeft=t,A.scrollTop=e},rh=":before",oh=":after",Fs="___html2canvas___pseudoelement_before",vs="___html2canvas___pseudoelement_after",On=`{
    content: "" !important;
    display: none !important;
}`,ah=function(i){lh(i,"."+Fs+rh+On+`
         .`+vs+oh+On)},lh=function(i,A){var t=i.ownerDocument;if(t){var e=t.createElement("style");e.textContent=A,i.appendChild(e)}},kn=(function(){function i(){}return i.getOrigin=function(A){var t=i._link;return t?(t.href=A,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},i.isSameOrigin=function(A){return i.getOrigin(A)===i._origin},i.setContext=function(A){i._link=A.document.createElement("a"),i._origin=i.getOrigin(A.location.href)},i._origin="about:blank",i})(),ch=(function(){function i(A,t){this.context=A,this._options=t,this._cache={}}return i.prototype.addImage=function(A){var t=Promise.resolve();return this.has(A)||(Is(A)||gh(A))&&(this._cache[A]=this.loadImage(A)).catch(function(){}),t},i.prototype.match=function(A){return this._cache[A]},i.prototype.loadImage=function(A){return iA(this,void 0,void 0,function(){var t,e,s,n,o=this;return eA(this,function(a){switch(a.label){case 0:return t=kn.isSameOrigin(A),e=!bs(A)&&this._options.useCORS===!0&&tA.SUPPORT_CORS_IMAGES&&!t,s=!bs(A)&&!t&&!Is(A)&&typeof this._options.proxy=="string"&&tA.SUPPORT_CORS_XHR&&!e,!t&&this._options.allowTaint===!1&&!bs(A)&&!Is(A)&&!s&&!e?[2]:(n=A,s?[4,this.proxy(n)]:[3,2]);case 1:n=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+A.substring(0,256)),[4,new Promise(function(r,h){var c=new Image;c.onload=function(){return r(c)},c.onerror=h,(Bh(n)||e)&&(c.crossOrigin="anonymous"),c.src=n,c.complete===!0&&setTimeout(function(){return r(c)},500),o._options.imageTimeout>0&&setTimeout(function(){return h("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},i.prototype.has=function(A){return typeof this._cache[A]<"u"},i.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},i.prototype.proxy=function(A){var t=this,e=this._options.proxy;if(!e)throw new Error("No proxy defined");var s=A.substring(0,256);return new Promise(function(n,o){var a=tA.SUPPORT_RESPONSE_TYPE?"blob":"text",r=new XMLHttpRequest;r.onload=function(){if(r.status===200)if(a==="text")n(r.response);else{var u=new FileReader;u.addEventListener("load",function(){return n(u.result)},!1),u.addEventListener("error",function(l){return o(l)},!1),u.readAsDataURL(r.response)}else o("Failed to proxy resource "+s+" with status code "+r.status)},r.onerror=o;var h=e.indexOf("?")>-1?"&":"?";if(r.open("GET",""+e+h+"url="+encodeURIComponent(A)+"&responseType="+a),a!=="text"&&r instanceof XMLHttpRequest&&(r.responseType=a),t._options.imageTimeout){var c=t._options.imageTimeout;r.timeout=c,r.ontimeout=function(){return o("Timed out ("+c+"ms) proxying "+s)}}r.send()})},i})(),hh=/^data:image\/svg\+xml/i,uh=/^data:image\/.*;base64,/i,dh=/^data:image\/.*/i,gh=function(i){return tA.SUPPORT_SVG_DRAWING||!fh(i)},bs=function(i){return dh.test(i)},Bh=function(i){return uh.test(i)},Is=function(i){return i.substr(0,4)==="blob"},fh=function(i){return i.substr(-3).toLowerCase()==="svg"||hh.test(i)},x=(function(){function i(A,t){this.type=0,this.x=A,this.y=t}return i.prototype.add=function(A,t){return new i(this.x+A,this.y+t)},i})(),tt=function(i,A,t){return new x(i.x+(A.x-i.x)*t,i.y+(A.y-i.y)*t)},Ce=(function(){function i(A,t,e,s){this.type=1,this.start=A,this.startControl=t,this.endControl=e,this.end=s}return i.prototype.subdivide=function(A,t){var e=tt(this.start,this.startControl,A),s=tt(this.startControl,this.endControl,A),n=tt(this.endControl,this.end,A),o=tt(e,s,A),a=tt(s,n,A),r=tt(o,a,A);return t?new i(this.start,e,o,r):new i(r,a,n,this.end)},i.prototype.add=function(A,t){return new i(this.start.add(A,t),this.startControl.add(A,t),this.endControl.add(A,t),this.end.add(A,t))},i.prototype.reverse=function(){return new i(this.end,this.endControl,this.startControl,this.start)},i})(),uA=function(i){return i.type===1},ph=(function(){function i(A){var t=A.styles,e=A.bounds,s=mt(t.borderTopLeftRadius,e.width,e.height),n=s[0],o=s[1],a=mt(t.borderTopRightRadius,e.width,e.height),r=a[0],h=a[1],c=mt(t.borderBottomRightRadius,e.width,e.height),u=c[0],l=c[1],d=mt(t.borderBottomLeftRadius,e.width,e.height),g=d[0],f=d[1],B=[];B.push((n+r)/e.width),B.push((g+u)/e.width),B.push((o+f)/e.height),B.push((h+l)/e.height);var w=Math.max.apply(Math,B);w>1&&(n/=w,o/=w,r/=w,h/=w,u/=w,l/=w,g/=w,f/=w);var p=e.width-r,C=e.height-l,y=e.width-u,U=e.height-f,Q=t.borderTopWidth,E=t.borderRightWidth,F=t.borderBottomWidth,m=t.borderLeftWidth,v=_(t.paddingTop,A.bounds.width),H=_(t.paddingRight,A.bounds.width),b=_(t.paddingBottom,A.bounds.width),I=_(t.paddingLeft,A.bounds.width);this.topLeftBorderDoubleOuterBox=n>0||o>0?X(e.left+m/3,e.top+Q/3,n-m/3,o-Q/3,k.TOP_LEFT):new x(e.left+m/3,e.top+Q/3),this.topRightBorderDoubleOuterBox=n>0||o>0?X(e.left+p,e.top+Q/3,r-E/3,h-Q/3,k.TOP_RIGHT):new x(e.left+e.width-E/3,e.top+Q/3),this.bottomRightBorderDoubleOuterBox=u>0||l>0?X(e.left+y,e.top+C,u-E/3,l-F/3,k.BOTTOM_RIGHT):new x(e.left+e.width-E/3,e.top+e.height-F/3),this.bottomLeftBorderDoubleOuterBox=g>0||f>0?X(e.left+m/3,e.top+U,g-m/3,f-F/3,k.BOTTOM_LEFT):new x(e.left+m/3,e.top+e.height-F/3),this.topLeftBorderDoubleInnerBox=n>0||o>0?X(e.left+m*2/3,e.top+Q*2/3,n-m*2/3,o-Q*2/3,k.TOP_LEFT):new x(e.left+m*2/3,e.top+Q*2/3),this.topRightBorderDoubleInnerBox=n>0||o>0?X(e.left+p,e.top+Q*2/3,r-E*2/3,h-Q*2/3,k.TOP_RIGHT):new x(e.left+e.width-E*2/3,e.top+Q*2/3),this.bottomRightBorderDoubleInnerBox=u>0||l>0?X(e.left+y,e.top+C,u-E*2/3,l-F*2/3,k.BOTTOM_RIGHT):new x(e.left+e.width-E*2/3,e.top+e.height-F*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||f>0?X(e.left+m*2/3,e.top+U,g-m*2/3,f-F*2/3,k.BOTTOM_LEFT):new x(e.left+m*2/3,e.top+e.height-F*2/3),this.topLeftBorderStroke=n>0||o>0?X(e.left+m/2,e.top+Q/2,n-m/2,o-Q/2,k.TOP_LEFT):new x(e.left+m/2,e.top+Q/2),this.topRightBorderStroke=n>0||o>0?X(e.left+p,e.top+Q/2,r-E/2,h-Q/2,k.TOP_RIGHT):new x(e.left+e.width-E/2,e.top+Q/2),this.bottomRightBorderStroke=u>0||l>0?X(e.left+y,e.top+C,u-E/2,l-F/2,k.BOTTOM_RIGHT):new x(e.left+e.width-E/2,e.top+e.height-F/2),this.bottomLeftBorderStroke=g>0||f>0?X(e.left+m/2,e.top+U,g-m/2,f-F/2,k.BOTTOM_LEFT):new x(e.left+m/2,e.top+e.height-F/2),this.topLeftBorderBox=n>0||o>0?X(e.left,e.top,n,o,k.TOP_LEFT):new x(e.left,e.top),this.topRightBorderBox=r>0||h>0?X(e.left+p,e.top,r,h,k.TOP_RIGHT):new x(e.left+e.width,e.top),this.bottomRightBorderBox=u>0||l>0?X(e.left+y,e.top+C,u,l,k.BOTTOM_RIGHT):new x(e.left+e.width,e.top+e.height),this.bottomLeftBorderBox=g>0||f>0?X(e.left,e.top+U,g,f,k.BOTTOM_LEFT):new x(e.left,e.top+e.height),this.topLeftPaddingBox=n>0||o>0?X(e.left+m,e.top+Q,Math.max(0,n-m),Math.max(0,o-Q),k.TOP_LEFT):new x(e.left+m,e.top+Q),this.topRightPaddingBox=r>0||h>0?X(e.left+Math.min(p,e.width-E),e.top+Q,p>e.width+E?0:Math.max(0,r-E),Math.max(0,h-Q),k.TOP_RIGHT):new x(e.left+e.width-E,e.top+Q),this.bottomRightPaddingBox=u>0||l>0?X(e.left+Math.min(y,e.width-m),e.top+Math.min(C,e.height-F),Math.max(0,u-E),Math.max(0,l-F),k.BOTTOM_RIGHT):new x(e.left+e.width-E,e.top+e.height-F),this.bottomLeftPaddingBox=g>0||f>0?X(e.left+m,e.top+Math.min(U,e.height-F),Math.max(0,g-m),Math.max(0,f-F),k.BOTTOM_LEFT):new x(e.left+m,e.top+e.height-F),this.topLeftContentBox=n>0||o>0?X(e.left+m+I,e.top+Q+v,Math.max(0,n-(m+I)),Math.max(0,o-(Q+v)),k.TOP_LEFT):new x(e.left+m+I,e.top+Q+v),this.topRightContentBox=r>0||h>0?X(e.left+Math.min(p,e.width+m+I),e.top+Q+v,p>e.width+m+I?0:r-m+I,h-(Q+v),k.TOP_RIGHT):new x(e.left+e.width-(E+H),e.top+Q+v),this.bottomRightContentBox=u>0||l>0?X(e.left+Math.min(y,e.width-(m+I)),e.top+Math.min(C,e.height+Q+v),Math.max(0,u-(E+H)),l-(F+b),k.BOTTOM_RIGHT):new x(e.left+e.width-(E+H),e.top+e.height-(F+b)),this.bottomLeftContentBox=g>0||f>0?X(e.left+m+I,e.top+U,Math.max(0,g-(m+I)),f-(F+b),k.BOTTOM_LEFT):new x(e.left+m+I,e.top+e.height-(F+b))}return i})(),k;(function(i){i[i.TOP_LEFT=0]="TOP_LEFT",i[i.TOP_RIGHT=1]="TOP_RIGHT",i[i.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",i[i.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(k||(k={}));var X=function(i,A,t,e,s){var n=4*((Math.sqrt(2)-1)/3),o=t*n,a=e*n,r=i+t,h=A+e;switch(s){case k.TOP_LEFT:return new Ce(new x(i,h),new x(i,h-a),new x(r-o,A),new x(r,A));case k.TOP_RIGHT:return new Ce(new x(i,A),new x(i+o,A),new x(r,h-a),new x(r,h));case k.BOTTOM_RIGHT:return new Ce(new x(r,A),new x(r,A+a),new x(i+o,h),new x(i,h));case k.BOTTOM_LEFT:default:return new Ce(new x(r,h),new x(r-o,h),new x(i,A+a),new x(i,A))}},ye=function(i){return[i.topLeftBorderBox,i.topRightBorderBox,i.bottomRightBorderBox,i.bottomLeftBorderBox]},wh=function(i){return[i.topLeftContentBox,i.topRightContentBox,i.bottomRightContentBox,i.bottomLeftContentBox]},Qe=function(i){return[i.topLeftPaddingBox,i.topRightPaddingBox,i.bottomRightPaddingBox,i.bottomLeftPaddingBox]},Ch=(function(){function i(A,t,e){this.offsetX=A,this.offsetY=t,this.matrix=e,this.type=0,this.target=6}return i})(),me=(function(){function i(A,t){this.path=A,this.target=t,this.type=1}return i})(),yh=(function(){function i(A){this.opacity=A,this.type=2,this.target=6}return i})(),Qh=function(i){return i.type===0},Gn=function(i){return i.type===1},mh=function(i){return i.type===2},Rn=function(i,A){return i.length===A.length?i.some(function(t,e){return t===A[e]}):!1},Uh=function(i,A,t,e,s){return i.map(function(n,o){switch(o){case 0:return n.add(A,t);case 1:return n.add(A+e,t);case 2:return n.add(A+e,t+s);case 3:return n.add(A,t+s)}return n})},_n=(function(){function i(A){this.element=A,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return i})(),Pn=(function(){function i(A,t){if(this.container=A,this.parent=t,this.effects=[],this.curves=new ph(this.container),this.container.styles.opacity<1&&this.effects.push(new yh(this.container.styles.opacity)),this.container.styles.transform!==null){var e=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,n=this.container.styles.transform;this.effects.push(new Ch(e,s,n))}if(this.container.styles.overflowX!==0){var o=ye(this.curves),a=Qe(this.curves);Rn(o,a)?this.effects.push(new me(o,6)):(this.effects.push(new me(o,2)),this.effects.push(new me(a,4)))}}return i.prototype.getEffects=function(A){for(var t=[2,3].indexOf(this.container.styles.position)===-1,e=this.parent,s=this.effects.slice(0);e;){var n=e.effects.filter(function(r){return!Gn(r)});if(t||e.container.styles.position!==0||!e.parent){if(s.unshift.apply(s,n),t=[2,3].indexOf(e.container.styles.position)===-1,e.container.styles.overflowX!==0){var o=ye(e.curves),a=Qe(e.curves);Rn(o,a)||s.unshift(new me(a,6))}}else s.unshift.apply(s,n);e=e.parent}return s.filter(function(r){return Z(r.target,A)})},i})(),Hs=function(i,A,t,e){i.container.elements.forEach(function(s){var n=Z(s.flags,4),o=Z(s.flags,2),a=new Pn(s,i);Z(s.styles.display,2048)&&e.push(a);var r=Z(s.flags,8)?[]:e;if(n||o){var h=n||s.styles.isPositioned()?t:A,c=new _n(a);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var u=s.styles.zIndex.order;if(u<0){var l=0;h.negativeZIndex.some(function(g,f){return u>g.element.container.styles.zIndex.order?(l=f,!1):l>0}),h.negativeZIndex.splice(l,0,c)}else if(u>0){var d=0;h.positiveZIndex.some(function(g,f){return u>=g.element.container.styles.zIndex.order?(d=f+1,!1):d>0}),h.positiveZIndex.splice(d,0,c)}else h.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else s.styles.isFloating()?h.nonPositionedFloats.push(c):h.nonPositionedInlineLevel.push(c);Hs(a,c,n?c:t,r)}else s.styles.isInlineLevel()?A.inlineLevel.push(a):A.nonInlineLevel.push(a),Hs(a,A,t,r);Z(s.flags,8)&&Vn(s,r)})},Vn=function(i,A){for(var t=i instanceof ws?i.start:1,e=i instanceof ws?i.reversed:!1,s=0;s<A.length;s++){var n=A[s];n.container instanceof Bn&&typeof n.container.value=="number"&&n.container.value!==0&&(t=n.container.value),n.listValue=It(t,n.container.styles.listStyleType,!0),t+=e?-1:1}},Eh=function(i){var A=new Pn(i,null),t=new _n(A),e=[];return Hs(A,t,t,e),Vn(A.container,e),t},Xn=function(i,A){switch(A){case 0:return dA(i.topLeftBorderBox,i.topLeftPaddingBox,i.topRightBorderBox,i.topRightPaddingBox);case 1:return dA(i.topRightBorderBox,i.topRightPaddingBox,i.bottomRightBorderBox,i.bottomRightPaddingBox);case 2:return dA(i.bottomRightBorderBox,i.bottomRightPaddingBox,i.bottomLeftBorderBox,i.bottomLeftPaddingBox);default:return dA(i.bottomLeftBorderBox,i.bottomLeftPaddingBox,i.topLeftBorderBox,i.topLeftPaddingBox)}},Fh=function(i,A){switch(A){case 0:return dA(i.topLeftBorderBox,i.topLeftBorderDoubleOuterBox,i.topRightBorderBox,i.topRightBorderDoubleOuterBox);case 1:return dA(i.topRightBorderBox,i.topRightBorderDoubleOuterBox,i.bottomRightBorderBox,i.bottomRightBorderDoubleOuterBox);case 2:return dA(i.bottomRightBorderBox,i.bottomRightBorderDoubleOuterBox,i.bottomLeftBorderBox,i.bottomLeftBorderDoubleOuterBox);default:return dA(i.bottomLeftBorderBox,i.bottomLeftBorderDoubleOuterBox,i.topLeftBorderBox,i.topLeftBorderDoubleOuterBox)}},vh=function(i,A){switch(A){case 0:return dA(i.topLeftBorderDoubleInnerBox,i.topLeftPaddingBox,i.topRightBorderDoubleInnerBox,i.topRightPaddingBox);case 1:return dA(i.topRightBorderDoubleInnerBox,i.topRightPaddingBox,i.bottomRightBorderDoubleInnerBox,i.bottomRightPaddingBox);case 2:return dA(i.bottomRightBorderDoubleInnerBox,i.bottomRightPaddingBox,i.bottomLeftBorderDoubleInnerBox,i.bottomLeftPaddingBox);default:return dA(i.bottomLeftBorderDoubleInnerBox,i.bottomLeftPaddingBox,i.topLeftBorderDoubleInnerBox,i.topLeftPaddingBox)}},bh=function(i,A){switch(A){case 0:return Ue(i.topLeftBorderStroke,i.topRightBorderStroke);case 1:return Ue(i.topRightBorderStroke,i.bottomRightBorderStroke);case 2:return Ue(i.bottomRightBorderStroke,i.bottomLeftBorderStroke);default:return Ue(i.bottomLeftBorderStroke,i.topLeftBorderStroke)}},Ue=function(i,A){var t=[];return uA(i)?t.push(i.subdivide(.5,!1)):t.push(i),uA(A)?t.push(A.subdivide(.5,!0)):t.push(A),t},dA=function(i,A,t,e){var s=[];return uA(i)?s.push(i.subdivide(.5,!1)):s.push(i),uA(t)?s.push(t.subdivide(.5,!0)):s.push(t),uA(e)?s.push(e.subdivide(.5,!0).reverse()):s.push(e),uA(A)?s.push(A.subdivide(.5,!1).reverse()):s.push(A),s},Yn=function(i){var A=i.bounds,t=i.styles;return A.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},Ee=function(i){var A=i.styles,t=i.bounds,e=_(A.paddingLeft,t.width),s=_(A.paddingRight,t.width),n=_(A.paddingTop,t.width),o=_(A.paddingBottom,t.width);return t.add(e+A.borderLeftWidth,n+A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth+e+s),-(A.borderTopWidth+A.borderBottomWidth+n+o))},Ih=function(i,A){return i===0?A.bounds:i===2?Ee(A):Yn(A)},Hh=function(i,A){return i===0?A.bounds:i===2?Ee(A):Yn(A)},Ts=function(i,A,t){var e=Ih(st(i.styles.backgroundOrigin,A),i),s=Hh(st(i.styles.backgroundClip,A),i),n=Th(st(i.styles.backgroundSize,A),t,e),o=n[0],a=n[1],r=mt(st(i.styles.backgroundPosition,A),e.width-o,e.height-a),h=xh(st(i.styles.backgroundRepeat,A),r,n,e,s),c=Math.round(e.left+r[0]),u=Math.round(e.top+r[1]);return[h,c,u,o,a]},et=function(i){return R(i)&&i.value===jA.AUTO},Fe=function(i){return typeof i=="number"},Th=function(i,A,t){var e=A[0],s=A[1],n=A[2],o=i[0],a=i[1];if(!o)return[0,0];if(z(o)&&a&&z(a))return[_(o,t.width),_(a,t.height)];var r=Fe(n);if(R(o)&&(o.value===jA.CONTAIN||o.value===jA.COVER)){if(Fe(n)){var h=t.width/t.height;return h<n!=(o.value===jA.COVER)?[t.width,t.width/n]:[t.height*n,t.height]}return[t.width,t.height]}var c=Fe(e),u=Fe(s),l=c||u;if(et(o)&&(!a||et(a))){if(c&&u)return[e,s];if(!r&&!l)return[t.width,t.height];if(l&&r){var d=c?e:s*n,g=u?s:e/n;return[d,g]}var f=c?e:t.width,B=u?s:t.height;return[f,B]}if(r){var w=0,p=0;return z(o)?w=_(o,t.width):z(a)&&(p=_(a,t.height)),et(o)?w=p*n:(!a||et(a))&&(p=w/n),[w,p]}var C=null,y=null;if(z(o)?C=_(o,t.width):a&&z(a)&&(y=_(a,t.height)),C!==null&&(!a||et(a))&&(y=c&&u?C/e*s:t.height),y!==null&&et(o)&&(C=c&&u?y/s*e:t.width),C!==null&&y!==null)return[C,y];throw new Error("Unable to calculate background-size for element")},st=function(i,A){var t=i[A];return typeof t>"u"?i[0]:t},xh=function(i,A,t,e,s){var n=A[0],o=A[1],a=t[0],r=t[1];switch(i){case 2:return[new x(Math.round(e.left),Math.round(e.top+o)),new x(Math.round(e.left+e.width),Math.round(e.top+o)),new x(Math.round(e.left+e.width),Math.round(r+e.top+o)),new x(Math.round(e.left),Math.round(r+e.top+o))];case 3:return[new x(Math.round(e.left+n),Math.round(e.top)),new x(Math.round(e.left+n+a),Math.round(e.top)),new x(Math.round(e.left+n+a),Math.round(e.height+e.top)),new x(Math.round(e.left+n),Math.round(e.height+e.top))];case 1:return[new x(Math.round(e.left+n),Math.round(e.top+o)),new x(Math.round(e.left+n+a),Math.round(e.top+o)),new x(Math.round(e.left+n+a),Math.round(e.top+o+r)),new x(Math.round(e.left+n),Math.round(e.top+o+r))];default:return[new x(Math.round(s.left),Math.round(s.top)),new x(Math.round(s.left+s.width),Math.round(s.top)),new x(Math.round(s.left+s.width),Math.round(s.height+s.top)),new x(Math.round(s.left),Math.round(s.height+s.top))]}},Lh="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Wn="Hidden Text",Sh=(function(){function i(A){this._data={},this._document=A}return i.prototype.parseMetrics=function(A,t){var e=this._document.createElement("div"),s=this._document.createElement("img"),n=this._document.createElement("span"),o=this._document.body;e.style.visibility="hidden",e.style.fontFamily=A,e.style.fontSize=t,e.style.margin="0",e.style.padding="0",e.style.whiteSpace="nowrap",o.appendChild(e),s.src=Lh,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",n.style.fontFamily=A,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.appendChild(this._document.createTextNode(Wn)),e.appendChild(n),e.appendChild(s);var a=s.offsetTop-n.offsetTop+2;e.removeChild(n),e.appendChild(this._document.createTextNode(Wn)),e.style.lineHeight="normal",s.style.verticalAlign="super";var r=s.offsetTop-e.offsetTop+2;return o.removeChild(e),{baseline:a,middle:r}},i.prototype.getMetrics=function(A,t){var e=A+" "+t;return typeof this._data[e]>"u"&&(this._data[e]=this.parseMetrics(A,t)),this._data[e]},i})(),Jn=(function(){function i(A,t){this.context=A,this.options=t}return i})(),Dh=1e4,Mh=(function(i){fA(A,i);function A(t,e){var s=i.call(this,t,e)||this;return s._activeEffects=[],s.canvas=e.canvas?e.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),e.canvas||(s.canvas.width=Math.floor(e.width*e.scale),s.canvas.height=Math.floor(e.height*e.scale),s.canvas.style.width=e.width+"px",s.canvas.style.height=e.height+"px"),s.fontMetrics=new Sh(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-e.x,-e.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+e.width+"x"+e.height+") with scale "+e.scale),s}return A.prototype.applyEffects=function(t){for(var e=this;this._activeEffects.length;)this.popEffect();t.forEach(function(s){return e.applyEffect(s)})},A.prototype.applyEffect=function(t){this.ctx.save(),mh(t)&&(this.ctx.globalAlpha=t.opacity),Qh(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),Gn(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},A.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},A.prototype.renderStack=function(t){return iA(this,void 0,void 0,function(){var e;return eA(this,function(s){switch(s.label){case 0:return e=t.element.container.styles,e.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},A.prototype.renderNode=function(t){return iA(this,void 0,void 0,function(){return eA(this,function(e){switch(e.label){case 0:if(Z(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(t)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},A.prototype.renderTextWithLetterSpacing=function(t,e,s){var n=this;if(e===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+s);else{var o=ps(t.text);o.reduce(function(a,r){return n.ctx.fillText(r,a,t.bounds.top+s),a+n.ctx.measureText(r).width},t.bounds.left)}},A.prototype.createFontStyle=function(t){var e=t.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),s=Gh(t.fontFamily).join(", "),n=Qt(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,e,t.fontWeight,n,s].join(" "),s,n]},A.prototype.renderTextNode=function(t,e){return iA(this,void 0,void 0,function(){var s,n,o,a,r,h,c,u,l=this;return eA(this,function(d){return s=this.createFontStyle(e),n=s[0],o=s[1],a=s[2],this.ctx.font=n,this.ctx.direction=e.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",r=this.fontMetrics.getMetrics(o,a),h=r.baseline,c=r.middle,u=e.paintOrder,t.textBounds.forEach(function(g){u.forEach(function(f){switch(f){case 0:l.ctx.fillStyle=j(e.color),l.renderTextWithLetterSpacing(g,e.letterSpacing,h);var B=e.textShadow;B.length&&g.text.trim().length&&(B.slice(0).reverse().forEach(function(w){l.ctx.shadowColor=j(w.color),l.ctx.shadowOffsetX=w.offsetX.number*l.options.scale,l.ctx.shadowOffsetY=w.offsetY.number*l.options.scale,l.ctx.shadowBlur=w.blur.number,l.renderTextWithLetterSpacing(g,e.letterSpacing,h)}),l.ctx.shadowColor="",l.ctx.shadowOffsetX=0,l.ctx.shadowOffsetY=0,l.ctx.shadowBlur=0),e.textDecorationLine.length&&(l.ctx.fillStyle=j(e.textDecorationColor||e.color),e.textDecorationLine.forEach(function(w){switch(w){case 1:l.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+h),g.bounds.width,1);break;case 2:l.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:l.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+c),g.bounds.width,1);break}}));break;case 1:e.webkitTextStrokeWidth&&g.text.trim().length&&(l.ctx.strokeStyle=j(e.webkitTextStrokeColor),l.ctx.lineWidth=e.webkitTextStrokeWidth,l.ctx.lineJoin=window.chrome?"miter":"round",l.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+h)),l.ctx.strokeStyle="",l.ctx.lineWidth=0,l.ctx.lineJoin="miter";break}})}),[2]})})},A.prototype.renderReplacedElement=function(t,e,s){if(s&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var n=Ee(t),o=Qe(e);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,t.intrinsicWidth,t.intrinsicHeight,n.left,n.top,n.width,n.height),this.ctx.restore()}},A.prototype.renderNodeContent=function(t){return iA(this,void 0,void 0,function(){var e,s,n,o,a,r,p,p,h,c,u,l,y,d,g,U,f,B,w,p,C,y,U;return eA(this,function(Q){switch(Q.label){case 0:this.applyEffects(t.getEffects(4)),e=t.container,s=t.curves,n=e.styles,o=0,a=e.textNodes,Q.label=1;case 1:return o<a.length?(r=a[o],[4,this.renderTextNode(r,n)]):[3,4];case 2:Q.sent(),Q.label=3;case 3:return o++,[3,1];case 4:if(!(e instanceof un))return[3,8];Q.label=5;case 5:return Q.trys.push([5,7,,8]),[4,this.context.cache.match(e.src)];case 6:return p=Q.sent(),this.renderReplacedElement(e,s,p),[3,8];case 7:return Q.sent(),this.context.logger.error("Error loading image "+e.src),[3,8];case 8:if(e instanceof dn&&this.renderReplacedElement(e,s,e.canvas),!(e instanceof gn))return[3,12];Q.label=9;case 9:return Q.trys.push([9,11,,12]),[4,this.context.cache.match(e.svg)];case 10:return p=Q.sent(),this.renderReplacedElement(e,s,p),[3,12];case 11:return Q.sent(),this.context.logger.error("Error loading svg "+e.svg.substring(0,255)),[3,12];case 12:return e instanceof Cn&&e.tree?(h=new A(this.context,{scale:this.options.scale,backgroundColor:e.backgroundColor,x:0,y:0,width:e.width,height:e.height}),[4,h.render(e.tree)]):[3,14];case 13:c=Q.sent(),e.width&&e.height&&this.ctx.drawImage(c,0,0,e.width,e.height,e.bounds.left,e.bounds.top,e.bounds.width,e.bounds.height),Q.label=14;case 14:if(e instanceof Cs&&(u=Math.min(e.bounds.width,e.bounds.height),e.type===de?e.checked&&(this.ctx.save(),this.path([new x(e.bounds.left+u*.39363,e.bounds.top+u*.79),new x(e.bounds.left+u*.16,e.bounds.top+u*.5549),new x(e.bounds.left+u*.27347,e.bounds.top+u*.44071),new x(e.bounds.left+u*.39694,e.bounds.top+u*.5649),new x(e.bounds.left+u*.72983,e.bounds.top+u*.23),new x(e.bounds.left+u*.84,e.bounds.top+u*.34085),new x(e.bounds.left+u*.39363,e.bounds.top+u*.79)]),this.ctx.fillStyle=j(fn),this.ctx.fill(),this.ctx.restore()):e.type===ge&&e.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.bounds.left+u/2,e.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=j(fn),this.ctx.fill(),this.ctx.restore())),Kh(e)&&e.value.length){switch(l=this.createFontStyle(n),y=l[0],d=l[1],g=this.fontMetrics.getMetrics(y,d).baseline,this.ctx.font=y,this.ctx.fillStyle=j(n.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Oh(e.styles.textAlign),U=Ee(e),f=0,e.styles.textAlign){case 1:f+=U.width/2;break;case 2:f+=U.width;break}B=U.add(f,0,0,-U.height/2+1),this.ctx.save(),this.path([new x(U.left,U.top),new x(U.left+U.width,U.top),new x(U.left+U.width,U.top+U.height),new x(U.left,U.top+U.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new vt(e.value,B),n.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Z(e.styles.display,2048))return[3,20];if(e.styles.listStyleImage===null)return[3,19];if(w=e.styles.listStyleImage,w.type!==0)return[3,18];p=void 0,C=w.url,Q.label=15;case 15:return Q.trys.push([15,17,,18]),[4,this.context.cache.match(C)];case 16:return p=Q.sent(),this.ctx.drawImage(p,e.bounds.left-(p.width+10),e.bounds.top),[3,18];case 17:return Q.sent(),this.context.logger.error("Error loading list-style-image "+C),[3,18];case 18:return[3,20];case 19:t.listValue&&e.styles.listStyleType!==-1&&(y=this.createFontStyle(n)[0],this.ctx.font=y,this.ctx.fillStyle=j(n.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",U=new EA(e.bounds.left,e.bounds.top+_(e.styles.paddingTop,e.bounds.width),e.bounds.width,Yi(n.lineHeight,n.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new vt(t.listValue,U),n.letterSpacing,Yi(n.lineHeight,n.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Q.label=20;case 20:return[2]}})})},A.prototype.renderStackContent=function(t){return iA(this,void 0,void 0,function(){var e,s,w,n,o,w,a,r,w,h,c,w,u,l,w,d,g,w,f,B,w;return eA(this,function(p){switch(p.label){case 0:if(Z(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:p.sent(),e=0,s=t.negativeZIndex,p.label=2;case 2:return e<s.length?(w=s[e],[4,this.renderStack(w)]):[3,5];case 3:p.sent(),p.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:p.sent(),n=0,o=t.nonInlineLevel,p.label=7;case 7:return n<o.length?(w=o[n],[4,this.renderNode(w)]):[3,10];case 8:p.sent(),p.label=9;case 9:return n++,[3,7];case 10:a=0,r=t.nonPositionedFloats,p.label=11;case 11:return a<r.length?(w=r[a],[4,this.renderStack(w)]):[3,14];case 12:p.sent(),p.label=13;case 13:return a++,[3,11];case 14:h=0,c=t.nonPositionedInlineLevel,p.label=15;case 15:return h<c.length?(w=c[h],[4,this.renderStack(w)]):[3,18];case 16:p.sent(),p.label=17;case 17:return h++,[3,15];case 18:u=0,l=t.inlineLevel,p.label=19;case 19:return u<l.length?(w=l[u],[4,this.renderNode(w)]):[3,22];case 20:p.sent(),p.label=21;case 21:return u++,[3,19];case 22:d=0,g=t.zeroOrAutoZIndexOrTransformedOrOpacity,p.label=23;case 23:return d<g.length?(w=g[d],[4,this.renderStack(w)]):[3,26];case 24:p.sent(),p.label=25;case 25:return d++,[3,23];case 26:f=0,B=t.positiveZIndex,p.label=27;case 27:return f<B.length?(w=B[f],[4,this.renderStack(w)]):[3,30];case 28:p.sent(),p.label=29;case 29:return f++,[3,27];case 30:return[2]}})})},A.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},A.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},A.prototype.formatPath=function(t){var e=this;t.forEach(function(s,n){var o=uA(s)?s.start:s;n===0?e.ctx.moveTo(o.x,o.y):e.ctx.lineTo(o.x,o.y),uA(s)&&e.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},A.prototype.renderRepeat=function(t,e,s,n){this.path(t),this.ctx.fillStyle=e,this.ctx.translate(s,n),this.ctx.fill(),this.ctx.translate(-s,-n)},A.prototype.resizeImage=function(t,e,s){var n;if(t.width===e&&t.height===s)return t;var o=(n=this.canvas.ownerDocument)!==null&&n!==void 0?n:document,a=o.createElement("canvas");a.width=Math.max(1,e),a.height=Math.max(1,s);var r=a.getContext("2d");return r.drawImage(t,0,0,t.width,t.height,0,0,e,s),a},A.prototype.renderBackgroundImage=function(t){return iA(this,void 0,void 0,function(){var e,s,n,o,a,r;return eA(this,function(h){switch(h.label){case 0:e=t.styles.backgroundImage.length-1,s=function(c){var u,l,d,v,S,M,I,T,F,g,v,S,M,I,T,f,B,w,p,C,y,U,Q,E,F,m,v,H,b,I,T,D,S,M,N,O,P,V,lA,$,J,G;return eA(this,function(rA){switch(rA.label){case 0:if(c.type!==0)return[3,5];u=void 0,l=c.url,rA.label=1;case 1:return rA.trys.push([1,3,,4]),[4,n.context.cache.match(l)];case 2:return u=rA.sent(),[3,4];case 3:return rA.sent(),n.context.logger.error("Error loading background-image "+l),[3,4];case 4:return u&&(d=Ts(t,e,[u.width,u.height,u.width/u.height]),v=d[0],S=d[1],M=d[2],I=d[3],T=d[4],F=n.ctx.createPattern(n.resizeImage(u,I,T),"repeat"),n.renderRepeat(v,F,S,M)),[3,6];case 5:Qa(c)?(g=Ts(t,e,[null,null,null]),v=g[0],S=g[1],M=g[2],I=g[3],T=g[4],f=fa(c.angle,I,T),B=f[0],w=f[1],p=f[2],C=f[3],y=f[4],U=document.createElement("canvas"),U.width=I,U.height=T,Q=U.getContext("2d"),E=Q.createLinearGradient(w,C,p,y),Mi(c.stops,B).forEach(function(oA){return E.addColorStop(oA.stop,j(oA.color))}),Q.fillStyle=E,Q.fillRect(0,0,I,T),I>0&&T>0&&(F=n.ctx.createPattern(U,"repeat"),n.renderRepeat(v,F,S,M))):ma(c)&&(m=Ts(t,e,[null,null,null]),v=m[0],H=m[1],b=m[2],I=m[3],T=m[4],D=c.position.length===0?[es]:c.position,S=_(D[0],I),M=_(D[D.length-1],T),N=pa(c,S,M,I,T),O=N[0],P=N[1],O>0&&P>0&&(V=n.ctx.createRadialGradient(H+S,b+M,0,H+S,b+M,O),Mi(c.stops,O*2).forEach(function(oA){return V.addColorStop(oA.stop,j(oA.color))}),n.path(v),n.ctx.fillStyle=V,O!==P?(lA=t.bounds.left+.5*t.bounds.width,$=t.bounds.top+.5*t.bounds.height,J=P/O,G=1/J,n.ctx.save(),n.ctx.translate(lA,$),n.ctx.transform(1,0,0,J,0,0),n.ctx.translate(-lA,-$),n.ctx.fillRect(H,G*(b-$)+$,I,T*G),n.ctx.restore()):n.ctx.fill())),rA.label=6;case 6:return e--,[2]}})},n=this,o=0,a=t.styles.backgroundImage.slice(0).reverse(),h.label=1;case 1:return o<a.length?(r=a[o],[5,s(r)]):[3,4];case 2:h.sent(),h.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},A.prototype.renderSolidBorder=function(t,e,s){return iA(this,void 0,void 0,function(){return eA(this,function(n){return this.path(Xn(s,e)),this.ctx.fillStyle=j(t),this.ctx.fill(),[2]})})},A.prototype.renderDoubleBorder=function(t,e,s,n){return iA(this,void 0,void 0,function(){var o,a;return eA(this,function(r){switch(r.label){case 0:return e<3?[4,this.renderSolidBorder(t,s,n)]:[3,2];case 1:return r.sent(),[2];case 2:return o=Fh(n,s),this.path(o),this.ctx.fillStyle=j(t),this.ctx.fill(),a=vh(n,s),this.path(a),this.ctx.fill(),[2]}})})},A.prototype.renderNodeBackgroundAndBorders=function(t){return iA(this,void 0,void 0,function(){var e,s,n,o,a,r,h,c,u=this;return eA(this,function(l){switch(l.label){case 0:return this.applyEffects(t.getEffects(2)),e=t.container.styles,s=!MA(e.backgroundColor)||e.backgroundImage.length,n=[{style:e.borderTopStyle,color:e.borderTopColor,width:e.borderTopWidth},{style:e.borderRightStyle,color:e.borderRightColor,width:e.borderRightWidth},{style:e.borderBottomStyle,color:e.borderBottomColor,width:e.borderBottomWidth},{style:e.borderLeftStyle,color:e.borderLeftColor,width:e.borderLeftWidth}],o=Nh(st(e.backgroundClip,0),t.curves),s||e.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),MA(e.backgroundColor)||(this.ctx.fillStyle=j(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:l.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach(function(d){u.ctx.save();var g=ye(t.curves),f=d.inset?0:Dh,B=Uh(g,-f+(d.inset?1:-1)*d.spread.number,(d.inset?1:-1)*d.spread.number,d.spread.number*(d.inset?-2:2),d.spread.number*(d.inset?-2:2));d.inset?(u.path(g),u.ctx.clip(),u.mask(B)):(u.mask(g),u.ctx.clip(),u.path(B)),u.ctx.shadowOffsetX=d.offsetX.number+f,u.ctx.shadowOffsetY=d.offsetY.number,u.ctx.shadowColor=j(d.color),u.ctx.shadowBlur=d.blur.number,u.ctx.fillStyle=d.inset?j(d.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),l.label=2;case 2:a=0,r=0,h=n,l.label=3;case 3:return r<h.length?(c=h[r],c.style!==0&&!MA(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,2)]:[3,11]):[3,13];case 4:return l.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,3)];case 6:return l.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,a,t.curves)];case 8:return l.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,a,t.curves)];case 10:l.sent(),l.label=11;case 11:a++,l.label=12;case 12:return r++,[3,3];case 13:return[2]}})})},A.prototype.renderDashedDottedBorder=function(t,e,s,n,o){return iA(this,void 0,void 0,function(){var a,r,h,c,u,l,d,g,f,B,w,p,C,y,U,Q,U,Q;return eA(this,function(E){return this.ctx.save(),a=bh(n,s),r=Xn(n,s),o===2&&(this.path(r),this.ctx.clip()),uA(r[0])?(h=r[0].start.x,c=r[0].start.y):(h=r[0].x,c=r[0].y),uA(r[1])?(u=r[1].end.x,l=r[1].end.y):(u=r[1].x,l=r[1].y),s===0||s===2?d=Math.abs(h-u):d=Math.abs(c-l),this.ctx.beginPath(),o===3?this.formatPath(a):this.formatPath(r.slice(0,2)),g=e<3?e*3:e*2,f=e<3?e*2:e,o===3&&(g=e,f=e),B=!0,d<=g*2?B=!1:d<=g*2+f?(w=d/(2*g+f),g*=w,f*=w):(p=Math.floor((d+f)/(g+f)),C=(d-p*g)/(p-1),y=(d-(p+1)*g)/p,f=y<=0||Math.abs(f-C)<Math.abs(f-y)?C:y),B&&(o===3?this.ctx.setLineDash([0,g+f]):this.ctx.setLineDash([g,f])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=e):this.ctx.lineWidth=e*2+1.1,this.ctx.strokeStyle=j(t),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(uA(r[0])&&(U=r[3],Q=r[0],this.ctx.beginPath(),this.formatPath([new x(U.end.x,U.end.y),new x(Q.start.x,Q.start.y)]),this.ctx.stroke()),uA(r[1])&&(U=r[1],Q=r[2],this.ctx.beginPath(),this.formatPath([new x(U.end.x,U.end.y),new x(Q.start.x,Q.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},A.prototype.render=function(t){return iA(this,void 0,void 0,function(){var e;return eA(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=j(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),e=Eh(t),[4,this.renderStack(e)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},A})(Jn),Kh=function(i){return i instanceof wn||i instanceof pn?!0:i instanceof Cs&&i.type!==ge&&i.type!==de},Nh=function(i,A){switch(i){case 0:return ye(A);case 2:return wh(A);default:return Qe(A)}},Oh=function(i){switch(i){case 1:return"center";case 2:return"right";default:return"left"}},kh=["-apple-system","system-ui"],Gh=function(i){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?i.filter(function(A){return kh.indexOf(A)===-1}):i},Rh=(function(i){fA(A,i);function A(t,e){var s=i.call(this,t,e)||this;return s.canvas=e.canvas?e.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=e,s.canvas.width=Math.floor(e.width*e.scale),s.canvas.height=Math.floor(e.height*e.scale),s.canvas.style.width=e.width+"px",s.canvas.style.height=e.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-e.x,-e.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale),s}return A.prototype.render=function(t){return iA(this,void 0,void 0,function(){var e,s;return eA(this,function(n){switch(n.label){case 0:return e=fs(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,_h(e)];case 1:return s=n.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=j(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},A})(Jn),_h=function(i){return new Promise(function(A,t){var e=new Image;e.onload=function(){A(e)},e.onerror=t,e.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(i))})},Ph=(function(){function i(A){var t=A.id,e=A.enabled;this.id=t,this.enabled=e,this.start=Date.now()}return i.prototype.debug=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,St([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},i.prototype.getTime=function(){return Date.now()-this.start},i.prototype.info=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,St([this.id,this.getTime()+"ms"],A))},i.prototype.warn=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,St([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},i.prototype.error=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,St([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},i.instances={},i})(),Vh=(function(){function i(A,t){var e;this.windowBounds=t,this.instanceName="#"+i.instanceCount++,this.logger=new Ph({id:this.instanceName,enabled:A.logging}),this.cache=(e=A.cache)!==null&&e!==void 0?e:new ch(this,A)}return i.instanceCount=1,i})(),Xh=function(i,A){return A===void 0&&(A={}),Yh(i,A)};typeof window<"u"&&kn.setContext(window);var Yh=function(i,A){return iA(void 0,void 0,void 0,function(){var t,e,s,n,o,a,r,h,c,u,l,d,g,f,B,w,p,C,y,U,E,Q,E,F,m,v,H,b,I,T,D,S,M,N,O,P,V,lA,$,J;return eA(this,function(G){switch(G.label){case 0:if(!i||typeof i!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=i.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(e=t.defaultView,!e)throw new Error("Document is not attached to a Window");return s={allowTaint:(F=A.allowTaint)!==null&&F!==void 0?F:!1,imageTimeout:(m=A.imageTimeout)!==null&&m!==void 0?m:15e3,proxy:A.proxy,useCORS:(v=A.useCORS)!==null&&v!==void 0?v:!1},n=Me({logging:(H=A.logging)!==null&&H!==void 0?H:!0,cache:A.cache},s),o={windowWidth:(b=A.windowWidth)!==null&&b!==void 0?b:e.innerWidth,windowHeight:(I=A.windowHeight)!==null&&I!==void 0?I:e.innerHeight,scrollX:(T=A.scrollX)!==null&&T!==void 0?T:e.pageXOffset,scrollY:(D=A.scrollY)!==null&&D!==void 0?D:e.pageYOffset},a=new EA(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),r=new Vh(n,a),h=(S=A.foreignObjectRendering)!==null&&S!==void 0?S:!1,c={allowTaint:(M=A.allowTaint)!==null&&M!==void 0?M:!1,onclone:A.onclone,ignoreElements:A.ignoreElements,inlineImages:h,copyStyles:h},r.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),u=new Nn(r,i,c),l=u.clonedReferenceElement,l?[4,u.toIFrame(t,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return d=G.sent(),g=Qs(l)||Wc(l)?mr(l.ownerDocument):Dt(r,l),f=g.width,B=g.height,w=g.left,p=g.top,C=Wh(r,l,A.backgroundColor),y={canvas:A.canvas,backgroundColor:C,scale:(O=(N=A.scale)!==null&&N!==void 0?N:e.devicePixelRatio)!==null&&O!==void 0?O:1,x:((P=A.x)!==null&&P!==void 0?P:0)+w,y:((V=A.y)!==null&&V!==void 0?V:0)+p,width:(lA=A.width)!==null&&lA!==void 0?lA:Math.ceil(f),height:($=A.height)!==null&&$!==void 0?$:Math.ceil(B)},h?(r.logger.debug("Document cloned, using foreign object rendering"),E=new Rh(r,y),[4,E.render(l)]):[3,3];case 2:return U=G.sent(),[3,5];case 3:return r.logger.debug("Document cloned, element located at "+w+","+p+" with size "+f+"x"+B+" using computed rendering"),r.logger.debug("Starting DOM parsing"),Q=Qn(r,l),C===Q.styles.backgroundColor&&(Q.styles.backgroundColor=vA.TRANSPARENT),r.logger.debug("Starting renderer for element at "+y.x+","+y.y+" with size "+y.width+"x"+y.height),E=new Mh(r,y),[4,E.render(Q)];case 4:U=G.sent(),G.label=5;case 5:return(!((J=A.removeContainer)!==null&&J!==void 0)||J)&&(Nn.destroy(d)||r.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),r.logger.debug("Finished rendering"),[2,U]}})})},Wh=function(i,A,t){var e=A.ownerDocument,s=e.documentElement?Ut(i,getComputedStyle(e.documentElement).backgroundColor):vA.TRANSPARENT,n=e.body?Ut(i,getComputedStyle(e.body).backgroundColor):vA.TRANSPARENT,o=typeof t=="string"?Ut(i,t):t===null?vA.TRANSPARENT:4294967295;return A===e.documentElement?MA(s)?MA(n)?o:n:s:o};const Jh=Object.freeze(Object.defineProperty({__proto__:null,default:Xh},Symbol.toStringTag,{value:"Module"}));gA.createRelatosViewer=Qr,gA.exportRelat=Lt,gA.getShapeDataForOffice=Xs,gA.importRelat=Le,gA.irToRelatosData=ks,gA.parseRelat=Ms,Object.defineProperty(gA,Symbol.toStringTag,{value:"Module"})}));
